function Ui(t,r){const e=Object.create(null),i=t.split(",");for(let n=0;n<i.length;n++)e[i[n]]=!0;return r?n=>!!e[n.toLowerCase()]:n=>!!e[n]}const Ho="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bo=Ui(Ho);function nr(t){return!!t||t===""}function Wi(t){if(he(t)){const r={};for(let e=0;e<t.length;e++){const i=t[e],n=De(i)?Fo(i):Wi(i);if(n)for(const s in n)r[s]=n[s]}return r}else{if(De(t))return t;if(Pe(t))return t}}const Ao=/;(?![^(]*\))/g,Lo=/:(.+)/;function Fo(t){const r={};return t.split(Ao).forEach(e=>{if(e){const i=e.split(Lo);i.length>1&&(r[i[0].trim()]=i[1].trim())}}),r}function ji(t){let r="";if(De(t))r=t;else if(he(t))for(let e=0;e<t.length;e++){const i=ji(t[e]);i&&(r+=i+" ")}else if(Pe(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const dh=t=>t==null?"":he(t)||Pe(t)&&(t.toString===ar||!fe(t.toString))?JSON.stringify(t,rr,2):String(t),rr=(t,r)=>r&&r.__v_isRef?rr(t,r.value):St(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[i,n])=>(e[`${i} =>`]=n,e),{})}:sr(r)?{[`Set(${r.size})`]:[...r.values()]}:Pe(r)&&!he(r)&&!lr(r)?String(r):r,xe={},Et=[],We=()=>{},Mo=()=>!1,No=/^on[^a-z]/,ri=t=>No.test(t),Vi=t=>t.startsWith("onUpdate:"),Oe=Object.assign,Gi=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},zo=Object.prototype.hasOwnProperty,me=(t,r)=>zo.call(t,r),he=Array.isArray,St=t=>si(t)==="[object Map]",sr=t=>si(t)==="[object Set]",fe=t=>typeof t=="function",De=t=>typeof t=="string",qi=t=>typeof t=="symbol",Pe=t=>t!==null&&typeof t=="object",or=t=>Pe(t)&&fe(t.then)&&fe(t.catch),ar=Object.prototype.toString,si=t=>ar.call(t),ko=t=>si(t).slice(8,-1),lr=t=>si(t)==="[object Object]",Zi=t=>De(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,oi=Ui(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ai=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},Io=/-(\w)/g,Ge=ai(t=>t.replace(Io,(r,e)=>e?e.toUpperCase():"")),Uo=/\B([A-Z])/g,Pt=ai(t=>t.replace(Uo,"-$1").toLowerCase()),li=ai(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ki=ai(t=>t?`on${li(t)}`:""),Wt=(t,r)=>!Object.is(t,r),Xi=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},ui=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},Wo=t=>{const r=parseFloat(t);return isNaN(r)?t:r};let ur;const jo=()=>ur||(ur=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ct;const ci=[];class Vo{constructor(r=!1){this.active=!0,this.effects=[],this.cleanups=[],!r&&ct&&(this.parent=ct,this.index=(ct.scopes||(ct.scopes=[])).push(this)-1)}run(r){if(this.active)try{return this.on(),r()}finally{this.off()}}on(){this.active&&(ci.push(this),ct=this)}off(){this.active&&(ci.pop(),ct=ci[ci.length-1])}stop(r){if(this.active){if(this.effects.forEach(e=>e.stop()),this.cleanups.forEach(e=>e()),this.scopes&&this.scopes.forEach(e=>e.stop(!0)),this.parent&&!r){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function Go(t,r){r=r||ct,r&&r.active&&r.effects.push(t)}const Yi=t=>{const r=new Set(t);return r.w=0,r.n=0,r},cr=t=>(t.w&et)>0,hr=t=>(t.n&et)>0,qo=({deps:t})=>{if(t.length)for(let r=0;r<t.length;r++)t[r].w|=et},Zo=t=>{const{deps:r}=t;if(r.length){let e=0;for(let i=0;i<r.length;i++){const n=r[i];cr(n)&&!hr(n)?n.delete(t):r[e++]=n,n.w&=~et,n.n&=~et}r.length=e}},Ji=new WeakMap;let jt=0,et=1;const Qi=30,Vt=[];let ht;const ft=Symbol(""),$i=Symbol("");class en{constructor(r,e=null,i){this.fn=r,this.scheduler=e,this.active=!0,this.deps=[],Go(this,i)}run(){if(!this.active)return this.fn();if(!Vt.includes(this))try{return Vt.push(ht=this),Ko(),et=1<<++jt,jt<=Qi?qo(this):fr(this),this.fn()}finally{jt<=Qi&&Zo(this),et=1<<--jt,dt(),Vt.pop();const r=Vt.length;ht=r>0?Vt[r-1]:void 0}}stop(){this.active&&(fr(this),this.onStop&&this.onStop(),this.active=!1)}}function fr(t){const{deps:r}=t;if(r.length){for(let e=0;e<r.length;e++)r[e].delete(t);r.length=0}}let _t=!0;const tn=[];function Ct(){tn.push(_t),_t=!1}function Ko(){tn.push(_t),_t=!0}function dt(){const t=tn.pop();_t=t===void 0?!0:t}function Me(t,r,e){if(!dr())return;let i=Ji.get(t);i||Ji.set(t,i=new Map);let n=i.get(e);n||i.set(e,n=Yi()),pr(n)}function dr(){return _t&&ht!==void 0}function pr(t,r){let e=!1;jt<=Qi?hr(t)||(t.n|=et,e=!cr(t)):e=!t.has(ht),e&&(t.add(ht),ht.deps.push(t))}function Je(t,r,e,i,n,s){const u=Ji.get(t);if(!u)return;let l=[];if(r==="clear")l=[...u.values()];else if(e==="length"&&he(t))u.forEach((o,a)=>{(a==="length"||a>=i)&&l.push(o)});else switch(e!==void 0&&l.push(u.get(e)),r){case"add":he(t)?Zi(e)&&l.push(u.get("length")):(l.push(u.get(ft)),St(t)&&l.push(u.get($i)));break;case"delete":he(t)||(l.push(u.get(ft)),St(t)&&l.push(u.get($i)));break;case"set":St(t)&&l.push(u.get(ft));break}if(l.length===1)l[0]&&nn(l[0]);else{const o=[];for(const a of l)a&&o.push(...a);nn(Yi(o))}}function nn(t,r){for(const e of he(t)?t:[...t])(e!==ht||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Xo=Ui("__proto__,__v_isRef,__isVue"),gr=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(qi)),Yo=rn(),Jo=rn(!1,!0),Qo=rn(!0),mr=$o();function $o(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const i=we(this);for(let s=0,u=this.length;s<u;s++)Me(i,"get",s+"");const n=i[r](...e);return n===-1||n===!1?i[r](...e.map(we)):n}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){Ct();const i=we(this)[r].apply(this,e);return dt(),i}}),t}function rn(t=!1,r=!1){return function(i,n,s){if(n==="__v_isReactive")return!t;if(n==="__v_isReadonly")return t;if(n==="__v_raw"&&s===(t?r?ga:_r:r?Pr:Sr).get(i))return i;const u=he(i);if(!t&&u&&me(mr,n))return Reflect.get(mr,n,s);const l=Reflect.get(i,n,s);return(qi(n)?gr.has(n):Xo(n))||(t||Me(i,"get",n),r)?l:He(l)?!u||!Zi(n)?l.value:l:Pe(l)?t?Cr(l):Gt(l):l}}const ea=vr(),ta=vr(!0);function vr(t=!1){return function(e,i,n,s){let u=e[i];if(!t&&!ln(n)&&(n=we(n),u=we(u),!he(e)&&He(u)&&!He(n)))return u.value=n,!0;const l=he(e)&&Zi(i)?Number(i)<e.length:me(e,i),o=Reflect.set(e,i,n,s);return e===we(s)&&(l?Wt(n,u)&&Je(e,"set",i,n):Je(e,"add",i,n)),o}}function ia(t,r){const e=me(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&e&&Je(t,"delete",r,void 0),i}function na(t,r){const e=Reflect.has(t,r);return(!qi(r)||!gr.has(r))&&Me(t,"has",r),e}function ra(t){return Me(t,"iterate",he(t)?"length":ft),Reflect.ownKeys(t)}const yr={get:Yo,set:ea,deleteProperty:ia,has:na,ownKeys:ra},sa={get:Qo,set(t,r){return!0},deleteProperty(t,r){return!0}},oa=Oe({},yr,{get:Jo,set:ta}),sn=t=>t,hi=t=>Reflect.getPrototypeOf(t);function fi(t,r,e=!1,i=!1){t=t.__v_raw;const n=we(t),s=we(r);r!==s&&!e&&Me(n,"get",r),!e&&Me(n,"get",s);const{has:u}=hi(n),l=i?sn:e?un:qt;if(u.call(n,r))return l(t.get(r));if(u.call(n,s))return l(t.get(s));t!==n&&t.get(r)}function di(t,r=!1){const e=this.__v_raw,i=we(e),n=we(t);return t!==n&&!r&&Me(i,"has",t),!r&&Me(i,"has",n),t===n?e.has(t):e.has(t)||e.has(n)}function pi(t,r=!1){return t=t.__v_raw,!r&&Me(we(t),"iterate",ft),Reflect.get(t,"size",t)}function wr(t){t=we(t);const r=we(this);return hi(r).has.call(r,t)||(r.add(t),Je(r,"add",t,t)),this}function Tr(t,r){r=we(r);const e=we(this),{has:i,get:n}=hi(e);let s=i.call(e,t);s||(t=we(t),s=i.call(e,t));const u=n.call(e,t);return e.set(t,r),s?Wt(r,u)&&Je(e,"set",t,r):Je(e,"add",t,r),this}function xr(t){const r=we(this),{has:e,get:i}=hi(r);let n=e.call(r,t);n||(t=we(t),n=e.call(r,t)),i&&i.call(r,t);const s=r.delete(t);return n&&Je(r,"delete",t,void 0),s}function Er(){const t=we(this),r=t.size!==0,e=t.clear();return r&&Je(t,"clear",void 0,void 0),e}function gi(t,r){return function(i,n){const s=this,u=s.__v_raw,l=we(u),o=r?sn:t?un:qt;return!t&&Me(l,"iterate",ft),u.forEach((a,h)=>i.call(n,o(a),o(h),s))}}function mi(t,r,e){return function(...i){const n=this.__v_raw,s=we(n),u=St(s),l=t==="entries"||t===Symbol.iterator&&u,o=t==="keys"&&u,a=n[t](...i),h=e?sn:r?un:qt;return!r&&Me(s,"iterate",o?$i:ft),{next(){const{value:p,done:d}=a.next();return d?{value:p,done:d}:{value:l?[h(p[0]),h(p[1])]:h(p),done:d}},[Symbol.iterator](){return this}}}}function tt(t){return function(...r){return t==="delete"?!1:this}}function aa(){const t={get(s){return fi(this,s)},get size(){return pi(this)},has:di,add:wr,set:Tr,delete:xr,clear:Er,forEach:gi(!1,!1)},r={get(s){return fi(this,s,!1,!0)},get size(){return pi(this)},has:di,add:wr,set:Tr,delete:xr,clear:Er,forEach:gi(!1,!0)},e={get(s){return fi(this,s,!0)},get size(){return pi(this,!0)},has(s){return di.call(this,s,!0)},add:tt("add"),set:tt("set"),delete:tt("delete"),clear:tt("clear"),forEach:gi(!0,!1)},i={get(s){return fi(this,s,!0,!0)},get size(){return pi(this,!0)},has(s){return di.call(this,s,!0)},add:tt("add"),set:tt("set"),delete:tt("delete"),clear:tt("clear"),forEach:gi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=mi(s,!1,!1),e[s]=mi(s,!0,!1),r[s]=mi(s,!1,!0),i[s]=mi(s,!0,!0)}),[t,e,r,i]}const[la,ua,ca,ha]=aa();function on(t,r){const e=r?t?ha:ca:t?ua:la;return(i,n,s)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(me(e,n)&&n in i?e:i,n,s)}const fa={get:on(!1,!1)},da={get:on(!1,!0)},pa={get:on(!0,!1)},Sr=new WeakMap,Pr=new WeakMap,_r=new WeakMap,ga=new WeakMap;function ma(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function va(t){return t.__v_skip||!Object.isExtensible(t)?0:ma(ko(t))}function Gt(t){return t&&t.__v_isReadonly?t:an(t,!1,yr,fa,Sr)}function ya(t){return an(t,!1,oa,da,Pr)}function Cr(t){return an(t,!0,sa,pa,_r)}function an(t,r,e,i,n){if(!Pe(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const s=n.get(t);if(s)return s;const u=va(t);if(u===0)return t;const l=new Proxy(t,u===2?i:e);return n.set(t,l),l}function bt(t){return ln(t)?bt(t.__v_raw):!!(t&&t.__v_isReactive)}function ln(t){return!!(t&&t.__v_isReadonly)}function br(t){return bt(t)||ln(t)}function we(t){const r=t&&t.__v_raw;return r?we(r):t}function Rr(t){return ui(t,"__v_skip",!0),t}const qt=t=>Pe(t)?Gt(t):t,un=t=>Pe(t)?Cr(t):t;function Or(t){dr()&&(t=we(t),t.dep||(t.dep=Yi()),pr(t.dep))}function Dr(t,r){t=we(t),t.dep&&nn(t.dep)}function He(t){return Boolean(t&&t.__v_isRef===!0)}function wa(t){return Hr(t,!1)}function Ta(t){return Hr(t,!0)}function Hr(t,r){return He(t)?t:new xa(t,r)}class xa{constructor(r,e){this._shallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:we(r),this._value=e?r:qt(r)}get value(){return Or(this),this._value}set value(r){r=this._shallow?r:we(r),Wt(r,this._rawValue)&&(this._rawValue=r,this._value=this._shallow?r:qt(r),Dr(this))}}function Zt(t){return He(t)?t.value:t}const Ea={get:(t,r,e)=>Zt(Reflect.get(t,r,e)),set:(t,r,e,i)=>{const n=t[r];return He(n)&&!He(e)?(n.value=e,!0):Reflect.set(t,r,e,i)}};function Br(t){return bt(t)?t:new Proxy(t,Ea)}class Sa{constructor(r,e,i){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new en(r,()=>{this._dirty||(this._dirty=!0,Dr(this))}),this.__v_isReadonly=i}get value(){const r=we(this);return Or(r),r._dirty&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}function qe(t,r){let e,i;const n=fe(t);return n?(e=t,i=We):(e=t.get,i=t.set),new Sa(e,i,n||!i)}Promise.resolve();function Pa(t,r,...e){const i=t.vnode.props||xe;let n=e;const s=r.startsWith("update:"),u=s&&r.slice(7);if(u&&u in i){const h=`${u==="modelValue"?"model":u}Modifiers`,{number:p,trim:d}=i[h]||xe;d?n=e.map(T=>T.trim()):p&&(n=e.map(Wo))}let l,o=i[l=Ki(r)]||i[l=Ki(Ge(r))];!o&&s&&(o=i[l=Ki(Pt(r))]),o&&Ue(o,t,6,n);const a=i[l+"Once"];if(a){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Ue(a,t,6,n)}}function Ar(t,r,e=!1){const i=r.emitsCache,n=i.get(t);if(n!==void 0)return n;const s=t.emits;let u={},l=!1;if(!fe(t)){const o=a=>{const h=Ar(a,r,!0);h&&(l=!0,Oe(u,h))};!e&&r.mixins.length&&r.mixins.forEach(o),t.extends&&o(t.extends),t.mixins&&t.mixins.forEach(o)}return!s&&!l?(i.set(t,null),null):(he(s)?s.forEach(o=>u[o]=null):Oe(u,s),i.set(t,u),u)}function cn(t,r){return!t||!ri(r)?!1:(r=r.slice(2).replace(/Once$/,""),me(t,r[0].toLowerCase()+r.slice(1))||me(t,Pt(r))||me(t,r))}let je=null,Lr=null;function vi(t){const r=je;return je=t,Lr=t&&t.type.__scopeId||null,r}function _a(t,r=je,e){if(!r||t._n)return t;const i=(...n)=>{i._d&&as(-1);const s=vi(r),u=t(...n);return vi(s),i._d&&as(1),u};return i._n=!0,i._c=!0,i._d=!0,i}function hn(t){const{type:r,vnode:e,proxy:i,withProxy:n,props:s,propsOptions:[u],slots:l,attrs:o,emit:a,render:h,renderCache:p,data:d,setupState:T,ctx:E,inheritAttrs:C}=t;let _,R;const f=vi(t);try{if(e.shapeFlag&4){const D=n||i;_=Ke(h.call(D,D,p,s,T,d,E)),R=o}else{const D=r;_=Ke(D.length>1?D(s,{attrs:o,slots:l,emit:a}):D(s,null)),R=r.props?o:Ca(o)}}catch(D){Kt.length=0,bi(D,t,1),_=Ie(nt)}let x=_;if(R&&C!==!1){const D=Object.keys(R),{shapeFlag:H}=x;D.length&&H&(1|6)&&(u&&D.some(Vi)&&(R=ba(R,u)),x=Rt(x,R))}return e.dirs&&(x.dirs=x.dirs?x.dirs.concat(e.dirs):e.dirs),e.transition&&(x.transition=e.transition),_=x,vi(f),_}const Ca=t=>{let r;for(const e in t)(e==="class"||e==="style"||ri(e))&&((r||(r={}))[e]=t[e]);return r},ba=(t,r)=>{const e={};for(const i in t)(!Vi(i)||!(i.slice(9)in r))&&(e[i]=t[i]);return e};function Ra(t,r,e){const{props:i,children:n,component:s}=t,{props:u,children:l,patchFlag:o}=r,a=s.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&o>=0){if(o&1024)return!0;if(o&16)return i?Fr(i,u,a):!!u;if(o&8){const h=r.dynamicProps;for(let p=0;p<h.length;p++){const d=h[p];if(u[d]!==i[d]&&!cn(a,d))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===u?!1:i?u?Fr(i,u,a):!0:!!u;return!1}function Fr(t,r,e){const i=Object.keys(r);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(r[s]!==t[s]&&!cn(e,s))return!0}return!1}function Oa({vnode:t,parent:r},e){for(;r&&r.subTree===t;)(t=r.vnode).el=e,r=r.parent}const Da=t=>t.__isSuspense;function Ha(t,r){r&&r.pendingBranch?he(t)?r.effects.push(...t):r.effects.push(t):Ol(t)}function yi(t,r){if(_e){let e=_e.provides;const i=_e.parent&&_e.parent.provides;i===e&&(e=_e.provides=Object.create(i)),e[t]=r}}function it(t,r,e=!1){const i=_e||je;if(i){const n=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(n&&t in n)return n[t];if(arguments.length>1)return e&&fe(r)?r.call(i.proxy):r}}function Ba(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ur(()=>{t.isMounted=!0}),Wr(()=>{t.isUnmounting=!0}),t}const ke=[Function,Array],Aa={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ke,onEnter:ke,onAfterEnter:ke,onEnterCancelled:ke,onBeforeLeave:ke,onLeave:ke,onAfterLeave:ke,onLeaveCancelled:ke,onBeforeAppear:ke,onAppear:ke,onAfterAppear:ke,onAppearCancelled:ke},setup(t,{slots:r}){const e=yl(),i=Ba();let n;return()=>{const s=r.default&&zr(r.default(),!0);if(!s||!s.length)return;const u=we(t),{mode:l}=u,o=s[0];if(i.isLeaving)return dn(o);const a=Nr(o);if(!a)return dn(o);const h=fn(a,u,i,e);pn(a,h);const p=e.subTree,d=p&&Nr(p);let T=!1;const{getTransitionKey:E}=a.type;if(E){const C=E();n===void 0?n=C:C!==n&&(n=C,T=!0)}if(d&&d.type!==nt&&(!yt(a,d)||T)){const C=fn(d,u,i,e);if(pn(d,C),l==="out-in")return i.isLeaving=!0,C.afterLeave=()=>{i.isLeaving=!1,e.update()},dn(o);l==="in-out"&&a.type!==nt&&(C.delayLeave=(_,R,f)=>{const x=Mr(i,d);x[String(d.key)]=d,_._leaveCb=()=>{R(),_._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=f})}return o}}},La=Aa;function Mr(t,r){const{leavingVNodes:e}=t;let i=e.get(r.type);return i||(i=Object.create(null),e.set(r.type,i)),i}function fn(t,r,e,i){const{appear:n,mode:s,persisted:u=!1,onBeforeEnter:l,onEnter:o,onAfterEnter:a,onEnterCancelled:h,onBeforeLeave:p,onLeave:d,onAfterLeave:T,onLeaveCancelled:E,onBeforeAppear:C,onAppear:_,onAfterAppear:R,onAppearCancelled:f}=r,x=String(t.key),D=Mr(e,t),H=(L,W)=>{L&&Ue(L,i,9,W)},A={mode:s,persisted:u,beforeEnter(L){let W=l;if(!e.isMounted)if(n)W=C||l;else return;L._leaveCb&&L._leaveCb(!0);const j=D[x];j&&yt(t,j)&&j.el._leaveCb&&j.el._leaveCb(),H(W,[L])},enter(L){let W=o,j=a,J=h;if(!e.isMounted)if(n)W=_||o,j=R||a,J=f||h;else return;let ee=!1;const K=L._enterCb=ae=>{ee||(ee=!0,ae?H(J,[L]):H(j,[L]),A.delayedLeave&&A.delayedLeave(),L._enterCb=void 0)};W?(W(L,K),W.length<=1&&K()):K()},leave(L,W){const j=String(t.key);if(L._enterCb&&L._enterCb(!0),e.isUnmounting)return W();H(p,[L]);let J=!1;const ee=L._leaveCb=K=>{J||(J=!0,W(),K?H(E,[L]):H(T,[L]),L._leaveCb=void 0,D[j]===t&&delete D[j])};D[j]=t,d?(d(L,ee),d.length<=1&&ee()):ee()},clone(L){return fn(L,r,e,i)}};return A}function dn(t){if(wi(t))return t=Rt(t),t.children=null,t}function Nr(t){return wi(t)?t.children?t.children[0]:void 0:t}function pn(t,r){t.shapeFlag&6&&t.component?pn(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function zr(t,r=!1){let e=[],i=0;for(let n=0;n<t.length;n++){const s=t[n];s.type===Ze?(s.patchFlag&128&&i++,e=e.concat(zr(s.children,r))):(r||s.type!==nt)&&e.push(s)}if(i>1)for(let n=0;n<e.length;n++)e[n].patchFlag=-2;return e}function kr(t){return fe(t)?{setup:t,name:t.name}:t}const gn=t=>!!t.type.__asyncLoader,wi=t=>t.type.__isKeepAlive;function Fa(t,r){Ir(t,"a",r)}function Ma(t,r){Ir(t,"da",r)}function Ir(t,r,e=_e){const i=t.__wdc||(t.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(Ti(r,i,e),e){let n=e.parent;for(;n&&n.parent;)wi(n.parent.vnode)&&Na(i,r,e,n),n=n.parent}}function Na(t,r,e,i){const n=Ti(r,t,i,!0);jr(()=>{Gi(i[r],n)},e)}function Ti(t,r,e=_e,i=!1){if(e){const n=e[t]||(e[t]=[]),s=r.__weh||(r.__weh=(...u)=>{if(e.isUnmounted)return;Ct(),Ot(e);const l=Ue(r,e,t,u);return wt(),dt(),l});return i?n.unshift(s):n.push(s),s}}const Qe=t=>(r,e=_e)=>(!Ci||t==="sp")&&Ti(t,r,e),za=Qe("bm"),Ur=Qe("m"),ka=Qe("bu"),Ia=Qe("u"),Wr=Qe("bum"),jr=Qe("um"),Ua=Qe("sp"),Wa=Qe("rtg"),ja=Qe("rtc");function Va(t,r=_e){Ti("ec",t,r)}let mn=!0;function Ga(t){const r=qr(t),e=t.proxy,i=t.ctx;mn=!1,r.beforeCreate&&Vr(r.beforeCreate,t,"bc");const{data:n,computed:s,methods:u,watch:l,provide:o,inject:a,created:h,beforeMount:p,mounted:d,beforeUpdate:T,updated:E,activated:C,deactivated:_,beforeDestroy:R,beforeUnmount:f,destroyed:x,unmounted:D,render:H,renderTracked:A,renderTriggered:L,errorCaptured:W,serverPrefetch:j,expose:J,inheritAttrs:ee,components:K,directives:ae,filters:oe}=r;if(a&&qa(a,i,null,t.appContext.config.unwrapInjectedRef),u)for(const ne in u){const te=u[ne];fe(te)&&(i[ne]=te.bind(e))}if(n){const ne=n.call(e,e);Pe(ne)&&(t.data=Gt(ne))}if(mn=!0,s)for(const ne in s){const te=s[ne],pe=fe(te)?te.bind(e,e):fe(te.get)?te.get.bind(e,e):We,X=!fe(te)&&fe(te.set)?te.set.bind(e):We,Ee=qe({get:pe,set:X});Object.defineProperty(i,ne,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:Ae=>Ee.value=Ae})}if(l)for(const ne in l)Gr(l[ne],i,e,ne);if(o){const ne=fe(o)?o.call(e):o;Reflect.ownKeys(ne).forEach(te=>{yi(te,ne[te])})}h&&Vr(h,t,"c");function se(ne,te){he(te)?te.forEach(pe=>ne(pe.bind(e))):te&&ne(te.bind(e))}if(se(za,p),se(Ur,d),se(ka,T),se(Ia,E),se(Fa,C),se(Ma,_),se(Va,W),se(ja,A),se(Wa,L),se(Wr,f),se(jr,D),se(Ua,j),he(J))if(J.length){const ne=t.exposed||(t.exposed={});J.forEach(te=>{Object.defineProperty(ne,te,{get:()=>e[te],set:pe=>e[te]=pe})})}else t.exposed||(t.exposed={});H&&t.render===We&&(t.render=H),ee!=null&&(t.inheritAttrs=ee),K&&(t.components=K),ae&&(t.directives=ae)}function qa(t,r,e=We,i=!1){he(t)&&(t=vn(t));for(const n in t){const s=t[n];let u;Pe(s)?"default"in s?u=it(s.from||n,s.default,!0):u=it(s.from||n):u=it(s),He(u)&&i?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>u.value,set:l=>u.value=l}):r[n]=u}}function Vr(t,r,e){Ue(he(t)?t.map(i=>i.bind(r.proxy)):t.bind(r.proxy),r,e)}function Gr(t,r,e,i){const n=i.includes(".")?Ps(e,i):()=>e[i];if(De(t)){const s=r[t];fe(s)&&Oi(n,s)}else if(fe(t))Oi(n,t.bind(e));else if(Pe(t))if(he(t))t.forEach(s=>Gr(s,r,e,i));else{const s=fe(t.handler)?t.handler.bind(e):r[t.handler];fe(s)&&Oi(n,s,t)}}function qr(t){const r=t.type,{mixins:e,extends:i}=r,{mixins:n,optionsCache:s,config:{optionMergeStrategies:u}}=t.appContext,l=s.get(r);let o;return l?o=l:!n.length&&!e&&!i?o=r:(o={},n.length&&n.forEach(a=>xi(o,a,u,!0)),xi(o,r,u)),s.set(r,o),o}function xi(t,r,e,i=!1){const{mixins:n,extends:s}=r;s&&xi(t,s,e,!0),n&&n.forEach(u=>xi(t,u,e,!0));for(const u in r)if(!(i&&u==="expose")){const l=Za[u]||e&&e[u];t[u]=l?l(t[u],r[u]):r[u]}return t}const Za={data:Zr,props:pt,emits:pt,methods:pt,computed:pt,beforeCreate:Be,created:Be,beforeMount:Be,mounted:Be,beforeUpdate:Be,updated:Be,beforeDestroy:Be,beforeUnmount:Be,destroyed:Be,unmounted:Be,activated:Be,deactivated:Be,errorCaptured:Be,serverPrefetch:Be,components:pt,directives:pt,watch:Xa,provide:Zr,inject:Ka};function Zr(t,r){return r?t?function(){return Oe(fe(t)?t.call(this,this):t,fe(r)?r.call(this,this):r)}:r:t}function Ka(t,r){return pt(vn(t),vn(r))}function vn(t){if(he(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function Be(t,r){return t?[...new Set([].concat(t,r))]:r}function pt(t,r){return t?Oe(Oe(Object.create(null),t),r):r}function Xa(t,r){if(!t)return r;if(!r)return t;const e=Oe(Object.create(null),t);for(const i in r)e[i]=Be(t[i],r[i]);return e}function Ya(t,r,e,i=!1){const n={},s={};ui(s,Si,1),t.propsDefaults=Object.create(null),Kr(t,r,n,s);for(const u in t.propsOptions[0])u in n||(n[u]=void 0);e?t.props=i?n:ya(n):t.type.props?t.props=n:t.props=s,t.attrs=s}function Ja(t,r,e,i){const{props:n,attrs:s,vnode:{patchFlag:u}}=t,l=we(n),[o]=t.propsOptions;let a=!1;if((i||u>0)&&!(u&16)){if(u&8){const h=t.vnode.dynamicProps;for(let p=0;p<h.length;p++){let d=h[p];const T=r[d];if(o)if(me(s,d))T!==s[d]&&(s[d]=T,a=!0);else{const E=Ge(d);n[E]=yn(o,l,E,T,t,!1)}else T!==s[d]&&(s[d]=T,a=!0)}}}else{Kr(t,r,n,s)&&(a=!0);let h;for(const p in l)(!r||!me(r,p)&&((h=Pt(p))===p||!me(r,h)))&&(o?e&&(e[p]!==void 0||e[h]!==void 0)&&(n[p]=yn(o,l,p,void 0,t,!0)):delete n[p]);if(s!==l)for(const p in s)(!r||!me(r,p))&&(delete s[p],a=!0)}a&&Je(t,"set","$attrs")}function Kr(t,r,e,i){const[n,s]=t.propsOptions;let u=!1,l;if(r)for(let o in r){if(oi(o))continue;const a=r[o];let h;n&&me(n,h=Ge(o))?!s||!s.includes(h)?e[h]=a:(l||(l={}))[h]=a:cn(t.emitsOptions,o)||(!(o in i)||a!==i[o])&&(i[o]=a,u=!0)}if(s){const o=we(e),a=l||xe;for(let h=0;h<s.length;h++){const p=s[h];e[p]=yn(n,o,p,a[p],t,!me(a,p))}}return u}function yn(t,r,e,i,n,s){const u=t[e];if(u!=null){const l=me(u,"default");if(l&&i===void 0){const o=u.default;if(u.type!==Function&&fe(o)){const{propsDefaults:a}=n;e in a?i=a[e]:(Ot(n),i=a[e]=o.call(null,r),wt())}else i=o}u[0]&&(s&&!l?i=!1:u[1]&&(i===""||i===Pt(e))&&(i=!0))}return i}function Xr(t,r,e=!1){const i=r.propsCache,n=i.get(t);if(n)return n;const s=t.props,u={},l=[];let o=!1;if(!fe(t)){const h=p=>{o=!0;const[d,T]=Xr(p,r,!0);Oe(u,d),T&&l.push(...T)};!e&&r.mixins.length&&r.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!s&&!o)return i.set(t,Et),Et;if(he(s))for(let h=0;h<s.length;h++){const p=Ge(s[h]);Yr(p)&&(u[p]=xe)}else if(s)for(const h in s){const p=Ge(h);if(Yr(p)){const d=s[h],T=u[p]=he(d)||fe(d)?{type:d}:d;if(T){const E=$r(Boolean,T.type),C=$r(String,T.type);T[0]=E>-1,T[1]=C<0||E<C,(E>-1||me(T,"default"))&&l.push(p)}}}const a=[u,l];return i.set(t,a),a}function Yr(t){return t[0]!=="$"}function Jr(t){const r=t&&t.toString().match(/^\s*function (\w+)/);return r?r[1]:t===null?"null":""}function Qr(t,r){return Jr(t)===Jr(r)}function $r(t,r){return he(r)?r.findIndex(e=>Qr(e,t)):fe(r)&&Qr(r,t)?0:-1}const es=t=>t[0]==="_"||t==="$stable",wn=t=>he(t)?t.map(Ke):[Ke(t)],Qa=(t,r,e)=>{const i=_a((...n)=>wn(r(...n)),e);return i._c=!1,i},ts=(t,r,e)=>{const i=t._ctx;for(const n in t){if(es(n))continue;const s=t[n];if(fe(s))r[n]=Qa(n,s,i);else if(s!=null){const u=wn(s);r[n]=()=>u}}},is=(t,r)=>{const e=wn(r);t.slots.default=()=>e},$a=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=we(r),ui(r,"_",e)):ts(r,t.slots={})}else t.slots={},r&&is(t,r);ui(t.slots,Si,1)},el=(t,r,e)=>{const{vnode:i,slots:n}=t;let s=!0,u=xe;if(i.shapeFlag&32){const l=r._;l?e&&l===1?s=!1:(Oe(n,r),!e&&l===1&&delete n._):(s=!r.$stable,ts(r,n)),u=r}else r&&(is(t,r),u={default:1});if(s)for(const l in n)!es(l)&&!(l in u)&&delete n[l]};function gt(t,r,e,i){const n=t.dirs,s=r&&r.dirs;for(let u=0;u<n.length;u++){const l=n[u];s&&(l.oldValue=s[u].value);let o=l.dir[i];o&&(Ct(),Ue(o,e,8,[t.el,l,t,r]),dt())}}function ns(){return{app:null,config:{isNativeTag:Mo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tl=0;function il(t,r){return function(i,n=null){n!=null&&!Pe(n)&&(n=null);const s=ns(),u=new Set;let l=!1;const o=s.app={_uid:tl++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:Hl,get config(){return s.config},set config(a){},use(a,...h){return u.has(a)||(a&&fe(a.install)?(u.add(a),a.install(o,...h)):fe(a)&&(u.add(a),a(o,...h))),o},mixin(a){return s.mixins.includes(a)||s.mixins.push(a),o},component(a,h){return h?(s.components[a]=h,o):s.components[a]},directive(a,h){return h?(s.directives[a]=h,o):s.directives[a]},mount(a,h,p){if(!l){const d=Ie(i,n);return d.appContext=s,h&&r?r(d,a):t(d,a,p),l=!0,o._container=a,a.__vue_app__=o,Cn(d.component)||d.component.proxy}},unmount(){l&&(t(null,o._container),delete o._container.__vue_app__)},provide(a,h){return s.provides[a]=h,o}};return o}}function Tn(t,r,e,i,n=!1){if(he(t)){t.forEach((d,T)=>Tn(d,r&&(he(r)?r[T]:r),e,i,n));return}if(gn(i)&&!n)return;const s=i.shapeFlag&4?Cn(i.component)||i.component.proxy:i.el,u=n?null:s,{i:l,r:o}=t,a=r&&r.r,h=l.refs===xe?l.refs={}:l.refs,p=l.setupState;if(a!=null&&a!==o&&(De(a)?(h[a]=null,me(p,a)&&(p[a]=null)):He(a)&&(a.value=null)),fe(o))st(o,l,12,[u,h]);else{const d=De(o),T=He(o);if(d||T){const E=()=>{if(t.f){const C=d?h[o]:o.value;n?he(C)&&Gi(C,s):he(C)?C.includes(s)||C.push(s):d?h[o]=[s]:(o.value=[s],t.k&&(h[t.k]=o.value))}else d?(h[o]=u,me(p,o)&&(p[o]=u)):He(o)&&(o.value=u,t.k&&(h[t.k]=u))};u?(E.id=-1,Le(E,e)):E()}}}const Le=Ha;function nl(t){return rl(t)}function rl(t,r){const e=jo();e.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:u,createText:l,createComment:o,setText:a,setElementText:h,parentNode:p,nextSibling:d,setScopeId:T=We,cloneNode:E,insertStaticContent:C}=t,_=(S,c,v,P=null,b=null,O=null,M=!1,B=null,z=!!c.dynamicChildren)=>{if(S===c)return;S&&!yt(S,c)&&(P=$(S),Ce(S,b,O,!0),S=null),c.patchFlag===-2&&(z=!1,c.dynamicChildren=null);const{type:N,ref:V,shapeFlag:I}=c;switch(N){case xn:R(S,c,v,P);break;case nt:f(S,c,v,P);break;case En:S==null&&x(c,v,P,M);break;case Ze:ae(S,c,v,P,b,O,M,B,z);break;default:I&1?A(S,c,v,P,b,O,M,B,z):I&6?oe(S,c,v,P,b,O,M,B,z):(I&64||I&128)&&N.process(S,c,v,P,b,O,M,B,z,ye)}V!=null&&b&&Tn(V,S&&S.ref,O,c||S,!c)},R=(S,c,v,P)=>{if(S==null)i(c.el=l(c.children),v,P);else{const b=c.el=S.el;c.children!==S.children&&a(b,c.children)}},f=(S,c,v,P)=>{S==null?i(c.el=o(c.children||""),v,P):c.el=S.el},x=(S,c,v,P)=>{[S.el,S.anchor]=C(S.children,c,v,P)},D=({el:S,anchor:c},v,P)=>{let b;for(;S&&S!==c;)b=d(S),i(S,v,P),S=b;i(c,v,P)},H=({el:S,anchor:c})=>{let v;for(;S&&S!==c;)v=d(S),n(S),S=v;n(c)},A=(S,c,v,P,b,O,M,B,z)=>{M=M||c.type==="svg",S==null?L(c,v,P,b,O,M,B,z):J(S,c,b,O,M,B,z)},L=(S,c,v,P,b,O,M,B)=>{let z,N;const{type:V,props:I,shapeFlag:Z,transition:q,patchFlag:re,dirs:ge}=S;if(S.el&&E!==void 0&&re===-1)z=S.el=E(S.el);else{if(z=S.el=u(S.type,O,I&&I.is,I),Z&8?h(z,S.children):Z&16&&j(S.children,z,null,P,b,O&&V!=="foreignObject",M,B),ge&&gt(S,null,P,"created"),I){for(const g in I)g!=="value"&&!oi(g)&&s(z,g,null,I[g],O,S.children,P,b,G);"value"in I&&s(z,"value",null,I.value),(N=I.onVnodeBeforeMount)&&Xe(N,P,S)}W(z,S,S.scopeId,M,P)}ge&&gt(S,null,P,"beforeMount");const m=(!b||b&&!b.pendingBranch)&&q&&!q.persisted;m&&q.beforeEnter(z),i(z,c,v),((N=I&&I.onVnodeMounted)||m||ge)&&Le(()=>{N&&Xe(N,P,S),m&&q.enter(z),ge&&gt(S,null,P,"mounted")},b)},W=(S,c,v,P,b)=>{if(v&&T(S,v),P)for(let O=0;O<P.length;O++)T(S,P[O]);if(b){let O=b.subTree;if(c===O){const M=b.vnode;W(S,M,M.scopeId,M.slotScopeIds,b.parent)}}},j=(S,c,v,P,b,O,M,B,z=0)=>{for(let N=z;N<S.length;N++){const V=S[N]=B?rt(S[N]):Ke(S[N]);_(null,V,c,v,P,b,O,M,B)}},J=(S,c,v,P,b,O,M)=>{const B=c.el=S.el;let{patchFlag:z,dynamicChildren:N,dirs:V}=c;z|=S.patchFlag&16;const I=S.props||xe,Z=c.props||xe;let q;v&&mt(v,!1),(q=Z.onVnodeBeforeUpdate)&&Xe(q,v,c,S),V&&gt(c,S,v,"beforeUpdate"),v&&mt(v,!0);const re=b&&c.type!=="foreignObject";if(N?ee(S.dynamicChildren,N,B,v,P,re,O):M||pe(S,c,B,null,v,P,re,O,!1),z>0){if(z&16)K(B,c,I,Z,v,P,b);else if(z&2&&I.class!==Z.class&&s(B,"class",null,Z.class,b),z&4&&s(B,"style",I.style,Z.style,b),z&8){const ge=c.dynamicProps;for(let m=0;m<ge.length;m++){const g=ge[m],y=I[g],w=Z[g];(w!==y||g==="value")&&s(B,g,y,w,b,S.children,v,P,G)}}z&1&&S.children!==c.children&&h(B,c.children)}else!M&&N==null&&K(B,c,I,Z,v,P,b);((q=Z.onVnodeUpdated)||V)&&Le(()=>{q&&Xe(q,v,c,S),V&&gt(c,S,v,"updated")},P)},ee=(S,c,v,P,b,O,M)=>{for(let B=0;B<c.length;B++){const z=S[B],N=c[B],V=z.el&&(z.type===Ze||!yt(z,N)||z.shapeFlag&(6|64))?p(z.el):v;_(z,N,V,null,P,b,O,M,!0)}},K=(S,c,v,P,b,O,M)=>{if(v!==P){for(const B in P){if(oi(B))continue;const z=P[B],N=v[B];z!==N&&B!=="value"&&s(S,B,N,z,M,c.children,b,O,G)}if(v!==xe)for(const B in v)!oi(B)&&!(B in P)&&s(S,B,v[B],null,M,c.children,b,O,G);"value"in P&&s(S,"value",v.value,P.value)}},ae=(S,c,v,P,b,O,M,B,z)=>{const N=c.el=S?S.el:l(""),V=c.anchor=S?S.anchor:l("");let{patchFlag:I,dynamicChildren:Z,slotScopeIds:q}=c;q&&(B=B?B.concat(q):q),S==null?(i(N,v,P),i(V,v,P),j(c.children,v,V,b,O,M,B,z)):I>0&&I&64&&Z&&S.dynamicChildren?(ee(S.dynamicChildren,Z,v,b,O,M,B),(c.key!=null||b&&c===b.subTree)&&rs(S,c,!0)):pe(S,c,v,V,b,O,M,B,z)},oe=(S,c,v,P,b,O,M,B,z)=>{c.slotScopeIds=B,S==null?c.shapeFlag&512?b.ctx.activate(c,v,P,M,z):de(c,v,P,b,O,M,z):se(S,c,z)},de=(S,c,v,P,b,O,M)=>{const B=S.component=vl(S,P,b);if(wi(S)&&(B.ctx.renderer=ye),wl(B),B.asyncDep){if(b&&b.registerDep(B,ne),!S.el){const z=B.subTree=Ie(nt);f(null,z,c,v)}return}ne(B,S,c,v,b,O,M)},se=(S,c,v)=>{const P=c.component=S.component;if(Ra(S,c,v))if(P.asyncDep&&!P.asyncResolved){te(P,c,v);return}else P.next=c,bl(P.update),P.update();else c.component=S.component,c.el=S.el,P.vnode=c},ne=(S,c,v,P,b,O,M)=>{const B=()=>{if(S.isMounted){let{next:V,bu:I,u:Z,parent:q,vnode:re}=S,ge=V,m;mt(S,!1),V?(V.el=re.el,te(S,V,M)):V=re,I&&Xi(I),(m=V.props&&V.props.onVnodeBeforeUpdate)&&Xe(m,q,V,re),mt(S,!0);const g=hn(S),y=S.subTree;S.subTree=g,_(y,g,p(y.el),$(y),S,b,O),V.el=g.el,ge===null&&Oa(S,g.el),Z&&Le(Z,b),(m=V.props&&V.props.onVnodeUpdated)&&Le(()=>Xe(m,q,V,re),b)}else{let V;const{el:I,props:Z}=c,{bm:q,m:re,parent:ge}=S,m=gn(c);if(mt(S,!1),q&&Xi(q),!m&&(V=Z&&Z.onVnodeBeforeMount)&&Xe(V,ge,c),mt(S,!0),I&&le){const g=()=>{S.subTree=hn(S),le(I,S.subTree,S,b,null)};m?c.type.__asyncLoader().then(()=>!S.isUnmounted&&g()):g()}else{const g=S.subTree=hn(S);_(null,g,v,P,S,b,O),c.el=g.el}if(re&&Le(re,b),!m&&(V=Z&&Z.onVnodeMounted)){const g=c;Le(()=>Xe(V,ge,g),b)}c.shapeFlag&256&&S.a&&Le(S.a,b),S.isMounted=!0,c=v=P=null}},z=S.effect=new en(B,()=>vs(S.update),S.scope),N=S.update=z.run.bind(z);N.id=S.uid,mt(S,!0),N()},te=(S,c,v)=>{c.component=S;const P=S.vnode.props;S.vnode=c,S.next=null,Ja(S,c.props,P,v),el(S,c.children,v),Ct(),Dn(void 0,S.update),dt()},pe=(S,c,v,P,b,O,M,B,z=!1)=>{const N=S&&S.children,V=S?S.shapeFlag:0,I=c.children,{patchFlag:Z,shapeFlag:q}=c;if(Z>0){if(Z&128){Ee(N,I,v,P,b,O,M,B,z);return}else if(Z&256){X(N,I,v,P,b,O,M,B,z);return}}q&8?(V&16&&G(N,b,O),I!==N&&h(v,I)):V&16?q&16?Ee(N,I,v,P,b,O,M,B,z):G(N,b,O,!0):(V&8&&h(v,""),q&16&&j(I,v,P,b,O,M,B,z))},X=(S,c,v,P,b,O,M,B,z)=>{S=S||Et,c=c||Et;const N=S.length,V=c.length,I=Math.min(N,V);let Z;for(Z=0;Z<I;Z++){const q=c[Z]=z?rt(c[Z]):Ke(c[Z]);_(S[Z],q,v,null,b,O,M,B,z)}N>V?G(S,b,O,!0,!1,I):j(c,v,P,b,O,M,B,z,I)},Ee=(S,c,v,P,b,O,M,B,z)=>{let N=0;const V=c.length;let I=S.length-1,Z=V-1;for(;N<=I&&N<=Z;){const q=S[N],re=c[N]=z?rt(c[N]):Ke(c[N]);if(yt(q,re))_(q,re,v,null,b,O,M,B,z);else break;N++}for(;N<=I&&N<=Z;){const q=S[I],re=c[Z]=z?rt(c[Z]):Ke(c[Z]);if(yt(q,re))_(q,re,v,null,b,O,M,B,z);else break;I--,Z--}if(N>I){if(N<=Z){const q=Z+1,re=q<V?c[q].el:P;for(;N<=Z;)_(null,c[N]=z?rt(c[N]):Ke(c[N]),v,re,b,O,M,B,z),N++}}else if(N>Z)for(;N<=I;)Ce(S[N],b,O,!0),N++;else{const q=N,re=N,ge=new Map;for(N=re;N<=Z;N++){const ue=c[N]=z?rt(c[N]):Ke(c[N]);ue.key!=null&&ge.set(ue.key,N)}let m,g=0;const y=Z-re+1;let w=!1,F=0;const U=new Array(y);for(N=0;N<y;N++)U[N]=0;for(N=q;N<=I;N++){const ue=S[N];if(g>=y){Ce(ue,b,O,!0);continue}let Q;if(ue.key!=null)Q=ge.get(ue.key);else for(m=re;m<=Z;m++)if(U[m-re]===0&&yt(ue,c[m])){Q=m;break}Q===void 0?Ce(ue,b,O,!0):(U[Q-re]=N+1,Q>=F?F=Q:w=!0,_(ue,c[Q],v,null,b,O,M,B,z),g++)}const ie=w?sl(U):Et;for(m=ie.length-1,N=y-1;N>=0;N--){const ue=re+N,Q=c[ue],Re=ue+1<V?c[ue+1].el:P;U[N]===0?_(null,Q,v,Re,b,O,M,B,z):w&&(m<0||N!==ie[m]?Ae(Q,v,Re,2):m--)}}},Ae=(S,c,v,P,b=null)=>{const{el:O,type:M,transition:B,children:z,shapeFlag:N}=S;if(N&6){Ae(S.component.subTree,c,v,P);return}if(N&128){S.suspense.move(c,v,P);return}if(N&64){M.move(S,c,v,ye);return}if(M===Ze){i(O,c,v);for(let I=0;I<z.length;I++)Ae(z[I],c,v,P);i(S.anchor,c,v);return}if(M===En){D(S,c,v);return}if(P!==2&&N&1&&B)if(P===0)B.beforeEnter(O),i(O,c,v),Le(()=>B.enter(O),b);else{const{leave:I,delayLeave:Z,afterLeave:q}=B,re=()=>i(O,c,v),ge=()=>{I(O,()=>{re(),q&&q()})};Z?Z(O,re,ge):ge()}else i(O,c,v)},Ce=(S,c,v,P=!1,b=!1)=>{const{type:O,props:M,ref:B,children:z,dynamicChildren:N,shapeFlag:V,patchFlag:I,dirs:Z}=S;if(B!=null&&Tn(B,null,v,S,!0),V&256){c.ctx.deactivate(S);return}const q=V&1&&Z,re=!gn(S);let ge;if(re&&(ge=M&&M.onVnodeBeforeUnmount)&&Xe(ge,c,S),V&6)Y(S.component,v,P);else{if(V&128){S.suspense.unmount(v,P);return}q&&gt(S,null,c,"beforeUnmount"),V&64?S.type.remove(S,c,v,b,ye,P):N&&(O!==Ze||I>0&&I&64)?G(N,c,v,!1,!0):(O===Ze&&I&(128|256)||!b&&V&16)&&G(z,c,v),P&&Ve(S)}(re&&(ge=M&&M.onVnodeUnmounted)||q)&&Le(()=>{ge&&Xe(ge,c,S),q&&gt(S,null,c,"unmounted")},v)},Ve=S=>{const{type:c,el:v,anchor:P,transition:b}=S;if(c===Ze){k(v,P);return}if(c===En){H(S);return}const O=()=>{n(v),b&&!b.persisted&&b.afterLeave&&b.afterLeave()};if(S.shapeFlag&1&&b&&!b.persisted){const{leave:M,delayLeave:B}=b,z=()=>M(v,O);B?B(S.el,O,z):z()}else O()},k=(S,c)=>{let v;for(;S!==c;)v=d(S),n(S),S=v;n(c)},Y=(S,c,v)=>{const{bum:P,scope:b,update:O,subTree:M,um:B}=S;P&&Xi(P),b.stop(),O&&(O.active=!1,Ce(M,S,c,v)),B&&Le(B,c),Le(()=>{S.isUnmounted=!0},c),c&&c.pendingBranch&&!c.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===c.pendingId&&(c.deps--,c.deps===0&&c.resolve())},G=(S,c,v,P=!1,b=!1,O=0)=>{for(let M=O;M<S.length;M++)Ce(S[M],c,v,P,b)},$=S=>S.shapeFlag&6?$(S.component.subTree):S.shapeFlag&128?S.suspense.next():d(S.anchor||S.el),ve=(S,c,v)=>{S==null?c._vnode&&Ce(c._vnode,null,null,!0):_(c._vnode||null,S,c,null,null,null,v),Ts(),c._vnode=S},ye={p:_,um:Ce,m:Ae,r:Ve,mt:de,mc:j,pc:pe,pbc:ee,n:$,o:t};let ce,le;return r&&([ce,le]=r(ye)),{render:ve,hydrate:ce,createApp:il(ve,ce)}}function mt({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function rs(t,r,e=!1){const i=t.children,n=r.children;if(he(i)&&he(n))for(let s=0;s<i.length;s++){const u=i[s];let l=n[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[s]=rt(n[s]),l.el=u.el),e||rs(u,l))}}function sl(t){const r=t.slice(),e=[0];let i,n,s,u,l;const o=t.length;for(i=0;i<o;i++){const a=t[i];if(a!==0){if(n=e[e.length-1],t[n]<a){r[i]=n,e.push(i);continue}for(s=0,u=e.length-1;s<u;)l=s+u>>1,t[e[l]]<a?s=l+1:u=l;a<t[e[s]]&&(s>0&&(r[i]=e[s-1]),e[s]=i)}}for(s=e.length,u=e[s-1];s-- >0;)e[s]=u,u=r[u];return e}const ol=t=>t.__isTeleport,ss="components";function ph(t,r){return ll(ss,t,!0,r)||t}const al=Symbol();function ll(t,r,e=!0,i=!1){const n=je||_e;if(n){const s=n.type;if(t===ss){const l=Sl(s);if(l&&(l===r||l===Ge(r)||l===li(Ge(r))))return s}const u=os(n[t]||s[t],r)||os(n.appContext[t],r);return!u&&i?s:u}}function os(t,r){return t&&(t[r]||t[Ge(r)]||t[li(Ge(r))])}const Ze=Symbol(void 0),xn=Symbol(void 0),nt=Symbol(void 0),En=Symbol(void 0),Kt=[];let vt=null;function gh(t=!1){Kt.push(vt=t?null:[])}function ul(){Kt.pop(),vt=Kt[Kt.length-1]||null}let Ei=1;function as(t){Ei+=t}function ls(t){return t.dynamicChildren=Ei>0?vt||Et:null,ul(),Ei>0&&vt&&vt.push(t),t}function mh(t,r,e,i,n,s){return ls(cs(t,r,e,i,n,s,!0))}function vh(t,r,e,i,n){return ls(Ie(t,r,e,i,n,!0))}function Sn(t){return t?t.__v_isVNode===!0:!1}function yt(t,r){return t.type===r.type&&t.key===r.key}const Si="__vInternal",us=({key:t})=>t!=null?t:null,Pi=({ref:t,ref_key:r,ref_for:e})=>t!=null?De(t)||He(t)||fe(t)?{i:je,r:t,k:r,f:!!e}:t:null;function cs(t,r=null,e=null,i=0,n=null,s=t===Ze?0:1,u=!1,l=!1){const o={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&us(r),ref:r&&Pi(r),scopeId:Lr,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null};return l?(Pn(o,e),s&128&&t.normalize(o)):e&&(o.shapeFlag|=De(e)?8:16),Ei>0&&!u&&vt&&(o.patchFlag>0||s&6)&&o.patchFlag!==32&&vt.push(o),o}const Ie=cl;function cl(t,r=null,e=null,i=0,n=null,s=!1){if((!t||t===al)&&(t=nt),Sn(t)){const l=Rt(t,r,!0);return e&&Pn(l,e),l}if(Pl(t)&&(t=t.__vccOpts),r){r=hl(r);let{class:l,style:o}=r;l&&!De(l)&&(r.class=ji(l)),Pe(o)&&(br(o)&&!he(o)&&(o=Oe({},o)),r.style=Wi(o))}const u=De(t)?1:Da(t)?128:ol(t)?64:Pe(t)?4:fe(t)?2:0;return cs(t,r,e,i,n,u,s,!0)}function hl(t){return t?br(t)||Si in t?Oe({},t):t:null}function Rt(t,r,e=!1){const{props:i,ref:n,patchFlag:s,children:u}=t,l=r?dl(i||{},r):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&us(l),ref:r&&r.ref?e&&n?he(n)?n.concat(Pi(r)):[n,Pi(r)]:Pi(r):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Ze?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Rt(t.ssContent),ssFallback:t.ssFallback&&Rt(t.ssFallback),el:t.el,anchor:t.anchor}}function fl(t=" ",r=0){return Ie(xn,null,t,r)}function Ke(t){return t==null||typeof t=="boolean"?Ie(nt):he(t)?Ie(Ze,null,t.slice()):typeof t=="object"?rt(t):Ie(xn,null,String(t))}function rt(t){return t.el===null||t.memo?t:Rt(t)}function Pn(t,r){let e=0;const{shapeFlag:i}=t;if(r==null)r=null;else if(he(r))e=16;else if(typeof r=="object")if(i&(1|64)){const n=r.default;n&&(n._c&&(n._d=!1),Pn(t,n()),n._c&&(n._d=!0));return}else{e=32;const n=r._;!n&&!(Si in r)?r._ctx=je:n===3&&je&&(je.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else fe(r)?(r={default:r,_ctx:je},e=32):(r=String(r),i&64?(e=16,r=[fl(r)]):e=8);t.children=r,t.shapeFlag|=e}function dl(...t){const r={};for(let e=0;e<t.length;e++){const i=t[e];for(const n in i)if(n==="class")r.class!==i.class&&(r.class=ji([r.class,i.class]));else if(n==="style")r.style=Wi([r.style,i.style]);else if(ri(n)){const s=r[n],u=i[n];s!==u&&!(he(s)&&s.includes(u))&&(r[n]=s?[].concat(s,u):u)}else n!==""&&(r[n]=i[n])}return r}function Xe(t,r,e,i=null){Ue(t,r,7,[e,i])}const _n=t=>t?hs(t)?Cn(t)||t.proxy:_n(t.parent):null,_i=Oe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_n(t.parent),$root:t=>_n(t.root),$emit:t=>t.emit,$options:t=>qr(t),$forceUpdate:t=>()=>vs(t.update),$nextTick:t=>ms.bind(t.proxy),$watch:t=>Dl.bind(t)}),pl={get({_:t},r){const{ctx:e,setupState:i,data:n,props:s,accessCache:u,type:l,appContext:o}=t;let a;if(r[0]!=="$"){const T=u[r];if(T!==void 0)switch(T){case 1:return i[r];case 2:return n[r];case 4:return e[r];case 3:return s[r]}else{if(i!==xe&&me(i,r))return u[r]=1,i[r];if(n!==xe&&me(n,r))return u[r]=2,n[r];if((a=t.propsOptions[0])&&me(a,r))return u[r]=3,s[r];if(e!==xe&&me(e,r))return u[r]=4,e[r];mn&&(u[r]=0)}}const h=_i[r];let p,d;if(h)return r==="$attrs"&&Me(t,"get",r),h(t);if((p=l.__cssModules)&&(p=p[r]))return p;if(e!==xe&&me(e,r))return u[r]=4,e[r];if(d=o.config.globalProperties,me(d,r))return d[r]},set({_:t},r,e){const{data:i,setupState:n,ctx:s}=t;if(n!==xe&&me(n,r))n[r]=e;else if(i!==xe&&me(i,r))i[r]=e;else if(me(t.props,r))return!1;return r[0]==="$"&&r.slice(1)in t?!1:(s[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:i,appContext:n,propsOptions:s}},u){let l;return!!e[u]||t!==xe&&me(t,u)||r!==xe&&me(r,u)||(l=s[0])&&me(l,u)||me(i,u)||me(_i,u)||me(n.config.globalProperties,u)}},gl=ns();let ml=0;function vl(t,r,e){const i=t.type,n=(r?r.appContext:t.appContext)||gl,s={uid:ml++,vnode:t,type:i,parent:r,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Vo(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xr(i,n),emitsOptions:Ar(i,n),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:i.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=r?r.root:s,s.emit=Pa.bind(null,s),t.ce&&t.ce(s),s}let _e=null;const yl=()=>_e||je,Ot=t=>{_e=t,t.scope.on()},wt=()=>{_e&&_e.scope.off(),_e=null};function hs(t){return t.vnode.shapeFlag&4}let Ci=!1;function wl(t,r=!1){Ci=r;const{props:e,children:i}=t.vnode,n=hs(t);Ya(t,e,n,r),$a(t,i);const s=n?Tl(t,r):void 0;return Ci=!1,s}function Tl(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=Rr(new Proxy(t.ctx,pl));const{setup:i}=e;if(i){const n=t.setupContext=i.length>1?El(t):null;Ot(t),Ct();const s=st(i,t,0,[t.props,n]);if(dt(),wt(),or(s)){if(s.then(wt,wt),r)return s.then(u=>{fs(t,u,r)}).catch(u=>{bi(u,t,0)});t.asyncDep=s}else fs(t,s,r)}else ps(t,r)}function fs(t,r,e){fe(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:Pe(r)&&(t.setupState=Br(r)),ps(t,e)}let ds;function ps(t,r,e){const i=t.type;if(!t.render){if(!r&&ds&&!i.render){const n=i.template;if(n){const{isCustomElement:s,compilerOptions:u}=t.appContext.config,{delimiters:l,compilerOptions:o}=i,a=Oe(Oe({isCustomElement:s,delimiters:l},u),o);i.render=ds(n,a)}}t.render=i.render||We}Ot(t),Ct(),Ga(t),dt(),wt()}function xl(t){return new Proxy(t.attrs,{get(r,e){return Me(t,"get","$attrs"),r[e]}})}function El(t){const r=i=>{t.exposed=i||{}};let e;return{get attrs(){return e||(e=xl(t))},slots:t.slots,emit:t.emit,expose:r}}function Cn(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Br(Rr(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in _i)return _i[e](t)}}))}function Sl(t){return fe(t)&&t.displayName||t.name}function Pl(t){return fe(t)&&"__vccOpts"in t}function st(t,r,e,i){let n;try{n=i?t(...i):t()}catch(s){bi(s,r,e)}return n}function Ue(t,r,e,i){if(fe(t)){const s=st(t,r,e,i);return s&&or(s)&&s.catch(u=>{bi(u,r,e)}),s}const n=[];for(let s=0;s<t.length;s++)n.push(Ue(t[s],r,e,i));return n}function bi(t,r,e,i=!0){const n=r?r.vnode:null;if(r){let s=r.parent;const u=r.proxy,l=e;for(;s;){const a=s.ec;if(a){for(let h=0;h<a.length;h++)if(a[h](t,u,l)===!1)return}s=s.parent}const o=r.appContext.config.errorHandler;if(o){st(o,null,10,[t,u,l]);return}}_l(t,e,n,i)}function _l(t,r,e,i=!0){console.error(t)}let Ri=!1,bn=!1;const Ne=[];let $e=0;const Xt=[];let Yt=null,Dt=0;const Jt=[];let ot=null,Ht=0;const gs=Promise.resolve();let Rn=null,On=null;function ms(t){const r=Rn||gs;return t?r.then(this?t.bind(this):t):r}function Cl(t){let r=$e+1,e=Ne.length;for(;r<e;){const i=r+e>>>1;Qt(Ne[i])<t?r=i+1:e=i}return r}function vs(t){(!Ne.length||!Ne.includes(t,Ri&&t.allowRecurse?$e+1:$e))&&t!==On&&(t.id==null?Ne.push(t):Ne.splice(Cl(t.id),0,t),ys())}function ys(){!Ri&&!bn&&(bn=!0,Rn=gs.then(xs))}function bl(t){const r=Ne.indexOf(t);r>$e&&Ne.splice(r,1)}function ws(t,r,e,i){he(t)?e.push(...t):(!r||!r.includes(t,t.allowRecurse?i+1:i))&&e.push(t),ys()}function Rl(t){ws(t,Yt,Xt,Dt)}function Ol(t){ws(t,ot,Jt,Ht)}function Dn(t,r=null){if(Xt.length){for(On=r,Yt=[...new Set(Xt)],Xt.length=0,Dt=0;Dt<Yt.length;Dt++)Yt[Dt]();Yt=null,Dt=0,On=null,Dn(t,r)}}function Ts(t){if(Jt.length){const r=[...new Set(Jt)];if(Jt.length=0,ot){ot.push(...r);return}for(ot=r,ot.sort((e,i)=>Qt(e)-Qt(i)),Ht=0;Ht<ot.length;Ht++)ot[Ht]();ot=null,Ht=0}}const Qt=t=>t.id==null?1/0:t.id;function xs(t){bn=!1,Ri=!0,Dn(t),Ne.sort((e,i)=>Qt(e)-Qt(i));const r=We;try{for($e=0;$e<Ne.length;$e++){const e=Ne[$e];e&&e.active!==!1&&st(e,null,14)}}finally{$e=0,Ne.length=0,Ts(),Ri=!1,Rn=null,(Ne.length||Xt.length||Jt.length)&&xs(t)}}const Es={};function Oi(t,r,e){return Ss(t,r,e)}function Ss(t,r,{immediate:e,deep:i,flush:n,onTrack:s,onTrigger:u}=xe){const l=_e;let o,a=!1,h=!1;if(He(t)?(o=()=>t.value,a=!!t._shallow):bt(t)?(o=()=>t,i=!0):he(t)?(h=!0,a=t.some(bt),o=()=>t.map(R=>{if(He(R))return R.value;if(bt(R))return Bt(R);if(fe(R))return st(R,l,2)})):fe(t)?r?o=()=>st(t,l,2):o=()=>{if(!(l&&l.isUnmounted))return p&&p(),Ue(t,l,3,[d])}:o=We,r&&i){const R=o;o=()=>Bt(R())}let p,d=R=>{p=_.onStop=()=>{st(R,l,4)}};if(Ci)return d=We,r?e&&Ue(r,l,3,[o(),h?[]:void 0,d]):o(),We;let T=h?[]:Es;const E=()=>{if(!!_.active)if(r){const R=_.run();(i||a||(h?R.some((f,x)=>Wt(f,T[x])):Wt(R,T)))&&(p&&p(),Ue(r,l,3,[R,T===Es?void 0:T,d]),T=R)}else _.run()};E.allowRecurse=!!r;let C;n==="sync"?C=E:n==="post"?C=()=>Le(E,l&&l.suspense):C=()=>{!l||l.isMounted?Rl(E):E()};const _=new en(o,C);return r?e?E():T=_.run():n==="post"?Le(_.run.bind(_),l&&l.suspense):_.run(),()=>{_.stop(),l&&l.scope&&Gi(l.scope.effects,_)}}function Dl(t,r,e){const i=this.proxy,n=De(t)?t.includes(".")?Ps(i,t):()=>i[t]:t.bind(i,i);let s;fe(r)?s=r:(s=r.handler,e=r);const u=_e;Ot(this);const l=Ss(n,s.bind(i),e);return u?Ot(u):wt(),l}function Ps(t,r){const e=r.split(".");return()=>{let i=t;for(let n=0;n<e.length&&i;n++)i=i[e[n]];return i}}function Bt(t,r){if(!Pe(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),He(t))Bt(t.value,r);else if(he(t))for(let e=0;e<t.length;e++)Bt(t[e],r);else if(sr(t)||St(t))t.forEach(e=>{Bt(e,r)});else if(lr(t))for(const e in t)Bt(t[e],r);return t}function _s(t,r,e){const i=arguments.length;return i===2?Pe(r)&&!he(r)?Sn(r)?Ie(t,null,[r]):Ie(t,r):Ie(t,null,r):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&Sn(e)&&(e=[e]),Ie(t,r,e))}const Hl="3.2.26",Bl="http://www.w3.org/2000/svg",At=typeof document!="undefined"?document:null,Cs=new Map,Al={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,i)=>{const n=r?At.createElementNS(Bl,t):At.createElement(t,e?{is:e}:void 0);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>At.createTextNode(t),createComment:t=>At.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>At.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},cloneNode(t){const r=t.cloneNode(!0);return"_value"in t&&(r._value=t._value),r},insertStaticContent(t,r,e,i){const n=e?e.previousSibling:r.lastChild;let s=Cs.get(t);if(!s){const u=At.createElement("template");if(u.innerHTML=i?`<svg>${t}</svg>`:t,s=u.content,i){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}Cs.set(t,s)}return r.insertBefore(s.cloneNode(!0),e),[n?n.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}};function Ll(t,r,e){const i=t._vtc;i&&(r=(r?[r,...i]:[...i]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}function Fl(t,r,e){const i=t.style,n=De(e);if(e&&!n){for(const s in e)Hn(i,s,e[s]);if(r&&!De(r))for(const s in r)e[s]==null&&Hn(i,s,"")}else{const s=i.display;n?r!==e&&(i.cssText=e):r&&t.removeAttribute("style"),"_vod"in t&&(i.display=s)}}const bs=/\s*!important$/;function Hn(t,r,e){if(he(e))e.forEach(i=>Hn(t,r,i));else if(r.startsWith("--"))t.setProperty(r,e);else{const i=Ml(t,r);bs.test(e)?t.setProperty(Pt(i),e.replace(bs,""),"important"):t[i]=e}}const Rs=["Webkit","Moz","ms"],Bn={};function Ml(t,r){const e=Bn[r];if(e)return e;let i=Ge(r);if(i!=="filter"&&i in t)return Bn[r]=i;i=li(i);for(let n=0;n<Rs.length;n++){const s=Rs[n]+i;if(s in t)return Bn[r]=s}return r}const Os="http://www.w3.org/1999/xlink";function Nl(t,r,e,i,n){if(i&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(Os,r.slice(6,r.length)):t.setAttributeNS(Os,r,e);else{const s=Bo(r);e==null||s&&!nr(e)?t.removeAttribute(r):t.setAttribute(r,s?"":e)}}function zl(t,r,e,i,n,s,u){if(r==="innerHTML"||r==="textContent"){i&&u(i,n,s),t[r]=e==null?"":e;return}if(r==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=e;const l=e==null?"":e;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),e==null&&t.removeAttribute(r);return}if(e===""||e==null){const l=typeof t[r];if(l==="boolean"){t[r]=nr(e);return}else if(e==null&&l==="string"){t[r]="",t.removeAttribute(r);return}else if(l==="number"){try{t[r]=0}catch{}t.removeAttribute(r);return}}try{t[r]=e}catch{}}let Di=Date.now,Ds=!1;if(typeof window!="undefined"){Di()>document.createEvent("Event").timeStamp&&(Di=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Ds=!!(t&&Number(t[1])<=53)}let An=0;const kl=Promise.resolve(),Il=()=>{An=0},Ul=()=>An||(kl.then(Il),An=Di());function Wl(t,r,e,i){t.addEventListener(r,e,i)}function jl(t,r,e,i){t.removeEventListener(r,e,i)}function Vl(t,r,e,i,n=null){const s=t._vei||(t._vei={}),u=s[r];if(i&&u)u.value=i;else{const[l,o]=Gl(r);if(i){const a=s[r]=ql(i,n);Wl(t,l,a,o)}else u&&(jl(t,l,u,o),s[r]=void 0)}}const Hs=/(?:Once|Passive|Capture)$/;function Gl(t){let r;if(Hs.test(t)){r={};let e;for(;e=t.match(Hs);)t=t.slice(0,t.length-e[0].length),r[e[0].toLowerCase()]=!0}return[Pt(t.slice(2)),r]}function ql(t,r){const e=i=>{const n=i.timeStamp||Di();(Ds||n>=e.attached-1)&&Ue(Zl(i,e.value),r,5,[i])};return e.value=t,e.attached=Ul(),e}function Zl(t,r){if(he(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(i=>n=>!n._stopped&&i(n))}else return r}const Bs=/^on[a-z]/,Kl=(t,r,e,i,n=!1,s,u,l,o)=>{r==="class"?Ll(t,i,n):r==="style"?Fl(t,e,i):ri(r)?Vi(r)||Vl(t,r,e,i,u):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):Xl(t,r,i,n))?zl(t,r,i,s,u,l,o):(r==="true-value"?t._trueValue=i:r==="false-value"&&(t._falseValue=i),Nl(t,r,i,n))};function Xl(t,r,e,i){return i?!!(r==="innerHTML"||r==="textContent"||r in t&&Bs.test(r)&&fe(e)):r==="spellcheck"||r==="draggable"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA"||Bs.test(r)&&De(e)?!1:r in t}const Yl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};La.props;const Jl=Oe({patchProp:Kl},Al);let As;function Ql(){return As||(As=nl(Jl))}const yh=(...t)=>{const r=Ql().createApp(...t),{mount:e}=r;return r.mount=i=>{const n=$l(i);if(!n)return;const s=r._component;!fe(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const u=e(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),u},r};function $l(t){return De(t)?document.querySelector(t):t}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Ls=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Lt=t=>Ls?Symbol(t):"_vr_"+t,eu=Lt("rvlm"),Fs=Lt("rvd"),Ln=Lt("r"),Ms=Lt("rl"),Fn=Lt("rvl"),Ft=typeof window!="undefined";function tu(t){return t.__esModule||Ls&&t[Symbol.toStringTag]==="Module"}const Te=Object.assign;function Mn(t,r){const e={};for(const i in r){const n=r[i];e[i]=Array.isArray(n)?n.map(t):t(n)}return e}const $t=()=>{},iu=/\/$/,nu=t=>t.replace(iu,"");function Nn(t,r,e="/"){let i,n={},s="",u="";const l=r.indexOf("?"),o=r.indexOf("#",l>-1?l:0);return l>-1&&(i=r.slice(0,l),s=r.slice(l+1,o>-1?o:r.length),n=t(s)),o>-1&&(i=i||r.slice(0,o),u=r.slice(o,r.length)),i=au(i!=null?i:r,e),{fullPath:i+(s&&"?")+s+u,path:i,query:n,hash:u}}function ru(t,r){const e=r.query?t(r.query):"";return r.path+(e&&"?")+e+(r.hash||"")}function Ns(t,r){return!r||!t.toLowerCase().startsWith(r.toLowerCase())?t:t.slice(r.length)||"/"}function su(t,r,e){const i=r.matched.length-1,n=e.matched.length-1;return i>-1&&i===n&&Mt(r.matched[i],e.matched[n])&&zs(r.params,e.params)&&t(r.query)===t(e.query)&&r.hash===e.hash}function Mt(t,r){return(t.aliasOf||t)===(r.aliasOf||r)}function zs(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const e in t)if(!ou(t[e],r[e]))return!1;return!0}function ou(t,r){return Array.isArray(t)?ks(t,r):Array.isArray(r)?ks(r,t):t===r}function ks(t,r){return Array.isArray(r)?t.length===r.length&&t.every((e,i)=>e===r[i]):t.length===1&&t[0]===r}function au(t,r){if(t.startsWith("/"))return t;if(!t)return r;const e=r.split("/"),i=t.split("/");let n=e.length-1,s,u;for(s=0;s<i.length;s++)if(u=i[s],!(n===1||u==="."))if(u==="..")n--;else break;return e.slice(0,n).join("/")+"/"+i.slice(s-(s===i.length?1:0)).join("/")}var ei;(function(t){t.pop="pop",t.push="push"})(ei||(ei={}));var ti;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ti||(ti={}));function lu(t){if(!t)if(Ft){const r=document.querySelector("base");t=r&&r.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),nu(t)}const uu=/^[^#]+#/;function cu(t,r){return t.replace(uu,"#")+r}function hu(t,r){const e=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:r.behavior,left:i.left-e.left-(r.left||0),top:i.top-e.top-(r.top||0)}}const Hi=()=>({left:window.pageXOffset,top:window.pageYOffset});function fu(t){let r;if("el"in t){const e=t.el,i=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;r=hu(n,t)}else r=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.pageXOffset,r.top!=null?r.top:window.pageYOffset)}function Is(t,r){return(history.state?history.state.position-r:-1)+t}const zn=new Map;function du(t,r){zn.set(t,r)}function pu(t){const r=zn.get(t);return zn.delete(t),r}let gu=()=>location.protocol+"//"+location.host;function Us(t,r){const{pathname:e,search:i,hash:n}=r,s=t.indexOf("#");if(s>-1){let l=n.includes(t.slice(s))?t.slice(s).length:1,o=n.slice(l);return o[0]!=="/"&&(o="/"+o),Ns(o,"")}return Ns(e,t)+i+n}function mu(t,r,e,i){let n=[],s=[],u=null;const l=({state:d})=>{const T=Us(t,location),E=e.value,C=r.value;let _=0;if(d){if(e.value=T,r.value=d,u&&u===E){u=null;return}_=C?d.position-C.position:0}else i(T);n.forEach(R=>{R(e.value,E,{delta:_,type:ei.pop,direction:_?_>0?ti.forward:ti.back:ti.unknown})})};function o(){u=e.value}function a(d){n.push(d);const T=()=>{const E=n.indexOf(d);E>-1&&n.splice(E,1)};return s.push(T),T}function h(){const{history:d}=window;!d.state||d.replaceState(Te({},d.state,{scroll:Hi()}),"")}function p(){for(const d of s)d();s=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h),{pauseListeners:o,listen:a,destroy:p}}function Ws(t,r,e,i=!1,n=!1){return{back:t,current:r,forward:e,replaced:i,position:window.history.length,scroll:n?Hi():null}}function vu(t){const{history:r,location:e}=window,i={value:Us(t,e)},n={value:r.state};n.value||s(i.value,{back:null,current:i.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function s(o,a,h){const p=t.indexOf("#"),d=p>-1?(e.host&&document.querySelector("base")?t:t.slice(p))+o:gu()+t+o;try{r[h?"replaceState":"pushState"](a,"",d),n.value=a}catch(T){console.error(T),e[h?"replace":"assign"](d)}}function u(o,a){const h=Te({},r.state,Ws(n.value.back,o,n.value.forward,!0),a,{position:n.value.position});s(o,h,!0),i.value=o}function l(o,a){const h=Te({},n.value,r.state,{forward:o,scroll:Hi()});s(h.current,h,!0);const p=Te({},Ws(i.value,o,null),{position:h.position+1},a);s(o,p,!1),i.value=o}return{location:i,state:n,push:l,replace:u}}function wh(t){t=lu(t);const r=vu(t),e=mu(t,r.state,r.location,r.replace);function i(s,u=!0){u||e.pauseListeners(),history.go(s)}const n=Te({location:"",base:t,go:i,createHref:cu.bind(null,t)},r,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>r.state.value}),n}function yu(t){return typeof t=="string"||t&&typeof t=="object"}function js(t){return typeof t=="string"||typeof t=="symbol"}const at={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Vs=Lt("nf");var Gs;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Gs||(Gs={}));function Nt(t,r){return Te(new Error,{type:t,[Vs]:!0},r)}function Tt(t,r){return t instanceof Error&&Vs in t&&(r==null||!!(t.type&r))}const qs="[^/]+?",wu={sensitive:!1,strict:!1,start:!0,end:!0},Tu=/[.+*?^${}()[\]/\\]/g;function xu(t,r){const e=Te({},wu,r),i=[];let n=e.start?"^":"";const s=[];for(const a of t){const h=a.length?[]:[90];e.strict&&!a.length&&(n+="/");for(let p=0;p<a.length;p++){const d=a[p];let T=40+(e.sensitive?.25:0);if(d.type===0)p||(n+="/"),n+=d.value.replace(Tu,"\\$&"),T+=40;else if(d.type===1){const{value:E,repeatable:C,optional:_,regexp:R}=d;s.push({name:E,repeatable:C,optional:_});const f=R||qs;if(f!==qs){T+=10;try{new RegExp(`(${f})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${E}" (${f}): `+D.message)}}let x=C?`((?:${f})(?:/(?:${f}))*)`:`(${f})`;p||(x=_&&a.length<2?`(?:/${x})`:"/"+x),_&&(x+="?"),n+=x,T+=20,_&&(T+=-8),C&&(T+=-20),f===".*"&&(T+=-50)}h.push(T)}i.push(h)}if(e.strict&&e.end){const a=i.length-1;i[a][i[a].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&(n+="(?:/|$)");const u=new RegExp(n,e.sensitive?"":"i");function l(a){const h=a.match(u),p={};if(!h)return null;for(let d=1;d<h.length;d++){const T=h[d]||"",E=s[d-1];p[E.name]=T&&E.repeatable?T.split("/"):T}return p}function o(a){let h="",p=!1;for(const d of t){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const T of d)if(T.type===0)h+=T.value;else if(T.type===1){const{value:E,repeatable:C,optional:_}=T,R=E in a?a[E]:"";if(Array.isArray(R)&&!C)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const f=Array.isArray(R)?R.join("/"):R;if(!f)if(_)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${E}"`);h+=f}}return h}return{re:u,score:i,keys:s,parse:l,stringify:o}}function Eu(t,r){let e=0;for(;e<t.length&&e<r.length;){const i=r[e]-t[e];if(i)return i;e++}return t.length<r.length?t.length===1&&t[0]===40+40?-1:1:t.length>r.length?r.length===1&&r[0]===40+40?1:-1:0}function Su(t,r){let e=0;const i=t.score,n=r.score;for(;e<i.length&&e<n.length;){const s=Eu(i[e],n[e]);if(s)return s;e++}return n.length-i.length}const Pu={type:0,value:""},_u=/[a-zA-Z0-9_]/;function Cu(t){if(!t)return[[]];if(t==="/")return[[Pu]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function r(T){throw new Error(`ERR (${e})/"${a}": ${T}`)}let e=0,i=e;const n=[];let s;function u(){s&&n.push(s),s=[]}let l=0,o,a="",h="";function p(){!a||(e===0?s.push({type:0,value:a}):e===1||e===2||e===3?(s.length>1&&(o==="*"||o==="+")&&r(`A repeatable param (${a}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:a,regexp:h,repeatable:o==="*"||o==="+",optional:o==="*"||o==="?"})):r("Invalid state to consume buffer"),a="")}function d(){a+=o}for(;l<t.length;){if(o=t[l++],o==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:o==="/"?(a&&p(),u()):o===":"?(p(),e=1):d();break;case 4:d(),e=i;break;case 1:o==="("?e=2:_u.test(o)?d():(p(),e=0,o!=="*"&&o!=="?"&&o!=="+"&&l--);break;case 2:o===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+o:e=3:h+=o;break;case 3:p(),e=0,o!=="*"&&o!=="?"&&o!=="+"&&l--,h="";break;default:r("Unknown state");break}}return e===2&&r(`Unfinished custom RegExp for param "${a}"`),p(),u(),n}function bu(t,r,e){const i=xu(Cu(t.path),e),n=Te(i,{record:t,parent:r,children:[],alias:[]});return r&&!n.record.aliasOf==!r.record.aliasOf&&r.children.push(n),n}function Ru(t,r){const e=[],i=new Map;r=Ks({strict:!1,end:!0,sensitive:!1},r);function n(h){return i.get(h)}function s(h,p,d){const T=!d,E=Du(h);E.aliasOf=d&&d.record;const C=Ks(r,h),_=[E];if("alias"in h){const x=typeof h.alias=="string"?[h.alias]:h.alias;for(const D of x)_.push(Te({},E,{components:d?d.record.components:E.components,path:D,aliasOf:d?d.record:E}))}let R,f;for(const x of _){const{path:D}=x;if(p&&D[0]!=="/"){const H=p.record.path,A=H[H.length-1]==="/"?"":"/";x.path=p.record.path+(D&&A+D)}if(R=bu(x,p,C),d?d.alias.push(R):(f=f||R,f!==R&&f.alias.push(R),T&&h.name&&!Zs(R)&&u(h.name)),"children"in E){const H=E.children;for(let A=0;A<H.length;A++)s(H[A],R,d&&d.children[A])}d=d||R,o(R)}return f?()=>{u(f)}:$t}function u(h){if(js(h)){const p=i.get(h);p&&(i.delete(h),e.splice(e.indexOf(p),1),p.children.forEach(u),p.alias.forEach(u))}else{const p=e.indexOf(h);p>-1&&(e.splice(p,1),h.record.name&&i.delete(h.record.name),h.children.forEach(u),h.alias.forEach(u))}}function l(){return e}function o(h){let p=0;for(;p<e.length&&Su(h,e[p])>=0;)p++;e.splice(p,0,h),h.record.name&&!Zs(h)&&i.set(h.record.name,h)}function a(h,p){let d,T={},E,C;if("name"in h&&h.name){if(d=i.get(h.name),!d)throw Nt(1,{location:h});C=d.record.name,T=Te(Ou(p.params,d.keys.filter(f=>!f.optional).map(f=>f.name)),h.params),E=d.stringify(T)}else if("path"in h)E=h.path,d=e.find(f=>f.re.test(E)),d&&(T=d.parse(E),C=d.record.name);else{if(d=p.name?i.get(p.name):e.find(f=>f.re.test(p.path)),!d)throw Nt(1,{location:h,currentLocation:p});C=d.record.name,T=Te({},p.params,h.params),E=d.stringify(T)}const _=[];let R=d;for(;R;)_.unshift(R.record),R=R.parent;return{name:C,path:E,params:T,matched:_,meta:Bu(_)}}return t.forEach(h=>s(h)),{addRoute:s,resolve:a,removeRoute:u,getRoutes:l,getRecordMatcher:n}}function Ou(t,r){const e={};for(const i of r)i in t&&(e[i]=t[i]);return e}function Du(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Hu(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function Hu(t){const r={},e=t.props||!1;if("component"in t)r.default=e;else for(const i in t.components)r[i]=typeof e=="boolean"?e:e[i];return r}function Zs(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Bu(t){return t.reduce((r,e)=>Te(r,e.meta),{})}function Ks(t,r){const e={};for(const i in t)e[i]=i in r?r[i]:t[i];return e}const Xs=/#/g,Au=/&/g,Lu=/\//g,Fu=/=/g,Mu=/\?/g,Ys=/\+/g,Nu=/%5B/g,zu=/%5D/g,Js=/%5E/g,ku=/%60/g,Qs=/%7B/g,Iu=/%7C/g,$s=/%7D/g,Uu=/%20/g;function kn(t){return encodeURI(""+t).replace(Iu,"|").replace(Nu,"[").replace(zu,"]")}function Wu(t){return kn(t).replace(Qs,"{").replace($s,"}").replace(Js,"^")}function In(t){return kn(t).replace(Ys,"%2B").replace(Uu,"+").replace(Xs,"%23").replace(Au,"%26").replace(ku,"`").replace(Qs,"{").replace($s,"}").replace(Js,"^")}function ju(t){return In(t).replace(Fu,"%3D")}function Vu(t){return kn(t).replace(Xs,"%23").replace(Mu,"%3F")}function Gu(t){return t==null?"":Vu(t).replace(Lu,"%2F")}function Bi(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function qu(t){const r={};if(t===""||t==="?")return r;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<i.length;++n){const s=i[n].replace(Ys," "),u=s.indexOf("="),l=Bi(u<0?s:s.slice(0,u)),o=u<0?null:Bi(s.slice(u+1));if(l in r){let a=r[l];Array.isArray(a)||(a=r[l]=[a]),a.push(o)}else r[l]=o}return r}function eo(t){let r="";for(let e in t){const i=t[e];if(e=ju(e),i==null){i!==void 0&&(r+=(r.length?"&":"")+e);continue}(Array.isArray(i)?i.map(s=>s&&In(s)):[i&&In(i)]).forEach(s=>{s!==void 0&&(r+=(r.length?"&":"")+e,s!=null&&(r+="="+s))})}return r}function Zu(t){const r={};for(const e in t){const i=t[e];i!==void 0&&(r[e]=Array.isArray(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return r}function ii(){let t=[];function r(i){return t.push(i),()=>{const n=t.indexOf(i);n>-1&&t.splice(n,1)}}function e(){t=[]}return{add:r,list:()=>t,reset:e}}function lt(t,r,e,i,n){const s=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((u,l)=>{const o=p=>{p===!1?l(Nt(4,{from:e,to:r})):p instanceof Error?l(p):yu(p)?l(Nt(2,{from:r,to:p})):(s&&i.enterCallbacks[n]===s&&typeof p=="function"&&s.push(p),u())},a=t.call(i&&i.instances[n],r,e,o);let h=Promise.resolve(a);t.length<3&&(h=h.then(o)),h.catch(p=>l(p))})}function Un(t,r,e,i){const n=[];for(const s of t)for(const u in s.components){let l=s.components[u];if(!(r!=="beforeRouteEnter"&&!s.instances[u]))if(Ku(l)){const a=(l.__vccOpts||l)[r];a&&n.push(lt(a,e,i,s,u))}else{let o=l();n.push(()=>o.then(a=>{if(!a)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${s.path}"`));const h=tu(a)?a.default:a;s.components[u]=h;const d=(h.__vccOpts||h)[r];return d&&lt(d,e,i,s,u)()}))}}return n}function Ku(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function to(t){const r=it(Ln),e=it(Ms),i=qe(()=>r.resolve(Zt(t.to))),n=qe(()=>{const{matched:o}=i.value,{length:a}=o,h=o[a-1],p=e.matched;if(!h||!p.length)return-1;const d=p.findIndex(Mt.bind(null,h));if(d>-1)return d;const T=io(o[a-2]);return a>1&&io(h)===T&&p[p.length-1].path!==T?p.findIndex(Mt.bind(null,o[a-2])):d}),s=qe(()=>n.value>-1&&Qu(e.params,i.value.params)),u=qe(()=>n.value>-1&&n.value===e.matched.length-1&&zs(e.params,i.value.params));function l(o={}){return Ju(o)?r[Zt(t.replace)?"replace":"push"](Zt(t.to)).catch($t):Promise.resolve()}return{route:i,href:qe(()=>i.value.href),isActive:s,isExactActive:u,navigate:l}}const Xu=kr({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:to,setup(t,{slots:r}){const e=Gt(to(t)),{options:i}=it(Ln),n=qe(()=>({[no(t.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[no(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const s=r.default&&r.default(e);return t.custom?s:_s("a",{"aria-current":e.isExactActive?t.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},s)}}}),Yu=Xu;function Ju(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const r=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return t.preventDefault&&t.preventDefault(),!0}}function Qu(t,r){for(const e in r){const i=r[e],n=t[e];if(typeof i=="string"){if(i!==n)return!1}else if(!Array.isArray(n)||n.length!==i.length||i.some((s,u)=>s!==n[u]))return!1}return!0}function io(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const no=(t,r,e)=>t!=null?t:r!=null?r:e,$u=kr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:r,slots:e}){const i=it(Fn),n=qe(()=>t.route||i.value),s=it(Fs,0),u=qe(()=>n.value.matched[s]);yi(Fs,s+1),yi(eu,u),yi(Fn,n);const l=wa();return Oi(()=>[l.value,u.value,t.name],([o,a,h],[p,d,T])=>{a&&(a.instances[h]=o,d&&d!==a&&o&&o===p&&(a.leaveGuards.size||(a.leaveGuards=d.leaveGuards),a.updateGuards.size||(a.updateGuards=d.updateGuards))),o&&a&&(!d||!Mt(a,d)||!p)&&(a.enterCallbacks[h]||[]).forEach(E=>E(o))},{flush:"post"}),()=>{const o=n.value,a=u.value,h=a&&a.components[t.name],p=t.name;if(!h)return ro(e.default,{Component:h,route:o});const d=a.props[t.name],T=d?d===!0?o.params:typeof d=="function"?d(o):d:null,C=_s(h,Te({},T,r,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(a.instances[p]=null)},ref:l}));return ro(e.default,{Component:C,route:o})||C}}});function ro(t,r){if(!t)return null;const e=t(r);return e.length===1?e[0]:e}const ec=$u;function Th(t){const r=Ru(t.routes,t),e=t.parseQuery||qu,i=t.stringifyQuery||eo,n=t.history,s=ii(),u=ii(),l=ii(),o=Ta(at);let a=at;Ft&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Mn.bind(null,k=>""+k),p=Mn.bind(null,Gu),d=Mn.bind(null,Bi);function T(k,Y){let G,$;return js(k)?(G=r.getRecordMatcher(k),$=Y):$=k,r.addRoute($,G)}function E(k){const Y=r.getRecordMatcher(k);Y&&r.removeRoute(Y)}function C(){return r.getRoutes().map(k=>k.record)}function _(k){return!!r.getRecordMatcher(k)}function R(k,Y){if(Y=Te({},Y||o.value),typeof k=="string"){const le=Nn(e,k,Y.path),S=r.resolve({path:le.path},Y),c=n.createHref(le.fullPath);return Te(le,S,{params:d(S.params),hash:Bi(le.hash),redirectedFrom:void 0,href:c})}let G;if("path"in k)G=Te({},k,{path:Nn(e,k.path,Y.path).path});else{const le=Te({},k.params);for(const S in le)le[S]==null&&delete le[S];G=Te({},k,{params:p(k.params)}),Y.params=p(Y.params)}const $=r.resolve(G,Y),ve=k.hash||"";$.params=h(d($.params));const ye=ru(i,Te({},k,{hash:Wu(ve),path:$.path})),ce=n.createHref(ye);return Te({fullPath:ye,hash:ve,query:i===eo?Zu(k.query):k.query||{}},$,{redirectedFrom:void 0,href:ce})}function f(k){return typeof k=="string"?Nn(e,k,o.value.path):Te({},k)}function x(k,Y){if(a!==k)return Nt(8,{from:Y,to:k})}function D(k){return L(k)}function H(k){return D(Te(f(k),{replace:!0}))}function A(k){const Y=k.matched[k.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let $=typeof G=="function"?G(k):G;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=f($):{path:$},$.params={}),Te({query:k.query,hash:k.hash,params:k.params},$)}}function L(k,Y){const G=a=R(k),$=o.value,ve=k.state,ye=k.force,ce=k.replace===!0,le=A(G);if(le)return L(Te(f(le),{state:ve,force:ye,replace:ce}),Y||G);const S=G;S.redirectedFrom=Y;let c;return!ye&&su(i,$,G)&&(c=Nt(16,{to:S,from:$}),X($,$,!0,!1)),(c?Promise.resolve(c):j(S,$)).catch(v=>Tt(v)?v:ne(v,S,$)).then(v=>{if(v){if(Tt(v,2))return L(Te(f(v.to),{state:ve,force:ye,replace:ce}),Y||S)}else v=ee(S,$,!0,ce,ve);return J(S,$,v),v})}function W(k,Y){const G=x(k,Y);return G?Promise.reject(G):Promise.resolve()}function j(k,Y){let G;const[$,ve,ye]=tc(k,Y);G=Un($.reverse(),"beforeRouteLeave",k,Y);for(const le of $)le.leaveGuards.forEach(S=>{G.push(lt(S,k,Y))});const ce=W.bind(null,k,Y);return G.push(ce),zt(G).then(()=>{G=[];for(const le of s.list())G.push(lt(le,k,Y));return G.push(ce),zt(G)}).then(()=>{G=Un(ve,"beforeRouteUpdate",k,Y);for(const le of ve)le.updateGuards.forEach(S=>{G.push(lt(S,k,Y))});return G.push(ce),zt(G)}).then(()=>{G=[];for(const le of k.matched)if(le.beforeEnter&&!Y.matched.includes(le))if(Array.isArray(le.beforeEnter))for(const S of le.beforeEnter)G.push(lt(S,k,Y));else G.push(lt(le.beforeEnter,k,Y));return G.push(ce),zt(G)}).then(()=>(k.matched.forEach(le=>le.enterCallbacks={}),G=Un(ye,"beforeRouteEnter",k,Y),G.push(ce),zt(G))).then(()=>{G=[];for(const le of u.list())G.push(lt(le,k,Y));return G.push(ce),zt(G)}).catch(le=>Tt(le,8)?le:Promise.reject(le))}function J(k,Y,G){for(const $ of l.list())$(k,Y,G)}function ee(k,Y,G,$,ve){const ye=x(k,Y);if(ye)return ye;const ce=Y===at,le=Ft?history.state:{};G&&($||ce?n.replace(k.fullPath,Te({scroll:ce&&le&&le.scroll},ve)):n.push(k.fullPath,ve)),o.value=k,X(k,Y,G,ce),pe()}let K;function ae(){K=n.listen((k,Y,G)=>{const $=R(k),ve=A($);if(ve){L(Te(ve,{replace:!0}),$).catch($t);return}a=$;const ye=o.value;Ft&&du(Is(ye.fullPath,G.delta),Hi()),j($,ye).catch(ce=>Tt(ce,4|8)?ce:Tt(ce,2)?(L(ce.to,$).then(le=>{Tt(le,4|16)&&!G.delta&&G.type===ei.pop&&n.go(-1,!1)}).catch($t),Promise.reject()):(G.delta&&n.go(-G.delta,!1),ne(ce,$,ye))).then(ce=>{ce=ce||ee($,ye,!1),ce&&(G.delta?n.go(-G.delta,!1):G.type===ei.pop&&Tt(ce,4|16)&&n.go(-1,!1)),J($,ye,ce)}).catch($t)})}let oe=ii(),de=ii(),se;function ne(k,Y,G){pe(k);const $=de.list();return $.length?$.forEach(ve=>ve(k,Y,G)):console.error(k),Promise.reject(k)}function te(){return se&&o.value!==at?Promise.resolve():new Promise((k,Y)=>{oe.add([k,Y])})}function pe(k){se||(se=!0,ae(),oe.list().forEach(([Y,G])=>k?G(k):Y()),oe.reset())}function X(k,Y,G,$){const{scrollBehavior:ve}=t;if(!Ft||!ve)return Promise.resolve();const ye=!G&&pu(Is(k.fullPath,0))||($||!G)&&history.state&&history.state.scroll||null;return ms().then(()=>ve(k,Y,ye)).then(ce=>ce&&fu(ce)).catch(ce=>ne(ce,k,Y))}const Ee=k=>n.go(k);let Ae;const Ce=new Set;return{currentRoute:o,addRoute:T,removeRoute:E,hasRoute:_,getRoutes:C,resolve:R,options:t,push:D,replace:H,go:Ee,back:()=>Ee(-1),forward:()=>Ee(1),beforeEach:s.add,beforeResolve:u.add,afterEach:l.add,onError:de.add,isReady:te,install(k){const Y=this;k.component("RouterLink",Yu),k.component("RouterView",ec),k.config.globalProperties.$router=Y,Object.defineProperty(k.config.globalProperties,"$route",{enumerable:!0,get:()=>Zt(o)}),Ft&&!Ae&&o.value===at&&(Ae=!0,D(n.location).catch(ve=>{}));const G={};for(const ve in at)G[ve]=qe(()=>o.value[ve]);k.provide(Ln,Y),k.provide(Ms,Gt(G)),k.provide(Fn,o);const $=k.unmount;Ce.add(k),k.unmount=function(){Ce.delete(k),Ce.size<1&&(a=at,K&&K(),o.value=at,Ae=!1,se=!1),$()}}}}function zt(t){return t.reduce((r,e)=>r.then(()=>e()),Promise.resolve())}function tc(t,r){const e=[],i=[],n=[],s=Math.max(r.matched.length,t.matched.length);for(let u=0;u<s;u++){const l=r.matched[u];l&&(t.matched.find(a=>Mt(a,l))?i.push(l):e.push(l));const o=t.matched[u];o&&(r.matched.find(a=>Mt(a,o))||n.push(o))}return[e,i,n]}var ic=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},so={exports:{}};(function(t){//! openseadragon 3.0.0
//! Built on 2021-12-15
//! Git commit: v3.0.0-0-3eded36
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function r(e){return new r.Viewer(e)}(function(e){e.version={versionStr:"3.0.0",major:parseInt("3",10),minor:parseInt("0",10),revision:parseInt("0",10)};var i={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,s=Object.prototype.hasOwnProperty;e.isFunction=function(u){return e.type(u)==="function"},e.isArray=Array.isArray||function(u){return e.type(u)==="array"},e.isWindow=function(u){return u&&typeof u=="object"&&"setInterval"in u},e.type=function(u){return u==null?String(u):i[n.call(u)]||"object"},e.isPlainObject=function(u){if(!u||r.type(u)!=="object"||u.nodeType||e.isWindow(u)||u.constructor&&!s.call(u,"constructor")&&!s.call(u.constructor.prototype,"isPrototypeOf"))return!1;var l;for(var o in u)l=o;return l===void 0||s.call(u,l)},e.isEmptyObject=function(u){for(var l in u)return!1;return!0},e.freezeObject=function(u){return Object.freeze?e.freezeObject=Object.freeze:e.freezeObject=function(l){return l},e.freezeObject(u)},e.supportsCanvas=function(){var u=document.createElement("canvas");return!!(e.isFunction(u.getContext)&&u.getContext("2d"))}(),e.isCanvasTainted=function(u){var l=!1;try{u.getContext("2d").getImageData(0,0,1,1)}catch{l=!0}return l},e.supportsAddEventListener=function(){return!!(document.documentElement.addEventListener&&document.addEventListener)}(),e.supportsRemoveEventListener=function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)}(),e.supportsEventListenerOptions=function(){var u=0;if(e.supportsAddEventListener)try{var l={get capture(){return u++,!1},get once(){return u++,!1},get passive(){return u++,!1}};window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{u=0}return u>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var u=document.createElement("canvas").getContext("2d"),l=window.devicePixelRatio||1,o=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return Math.max(l,1)/o}else return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()})(r),function(e){e.extend=function(){var o,a,h,p,d,T,E=arguments[0]||{},C=arguments.length,_=!1,R=1;for(typeof E=="boolean"&&(_=E,E=arguments[1]||{},R=2),typeof E!="object"&&!r.isFunction(E)&&(E={}),C===R&&(E=this,--R);R<C;R++)if(o=arguments[R],o!==null||o!==void 0)for(a in o)h=E[a],p=o[a],E!==p&&(_&&p&&(r.isPlainObject(p)||(d=r.isArray(p)))?(d?(d=!1,T=h&&r.isArray(h)?h:[]):T=h&&r.isPlainObject(h)?h:{},E[a]=r.extend(_,T,p)):p!==void 0&&(E[a]=p));return E};var i=function(){if(typeof navigator!="object")return!1;var o=navigator.userAgent;return typeof o!="string"?!1:o.indexOf("iPhone")!==-1||o.indexOf("iPad")!==-1||o.indexOf("iPod")!==-1};e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:i(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(o,a){return function(){var h=arguments;return h===void 0&&(h=[]),a.apply(o,h)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},_viewers:new Map,getViewer:function(o){return e._viewers.get(this.getElement(o))},getElement:function(o){return typeof o=="string"&&(o=document.getElementById(o)),o},getElementPosition:function(o){var a=new e.Point,h,p;for(o=e.getElement(o),h=e.getElementStyle(o).position==="fixed",p=l(o,h);p;)a.x+=o.offsetLeft,a.y+=o.offsetTop,h&&(a=a.plus(e.getPageScroll())),o=p,h=e.getElementStyle(o).position==="fixed",p=l(o,h);return a},getElementOffset:function(o){o=e.getElement(o);var a=o&&o.ownerDocument,h,p,d={top:0,left:0};return a?(h=a.documentElement,typeof o.getBoundingClientRect!="undefined"&&(d=o.getBoundingClientRect()),p=a===a.window?a:a.nodeType===9?a.defaultView||a.parentWindow:!1,new e.Point(d.left+(p.pageXOffset||h.scrollLeft)-(h.clientLeft||0),d.top+(p.pageYOffset||h.scrollTop)-(h.clientTop||0))):new e.Point},getElementSize:function(o){return o=e.getElement(o),new e.Point(o.clientWidth,o.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(o){return o=e.getElement(o),o.currentStyle}:function(o){return o=e.getElement(o),window.getComputedStyle(o,"")},getCssPropertyWithVendorPrefix:function(o){var a={};return e.getCssPropertyWithVendorPrefix=function(h){if(a[h]!==void 0)return a[h];var p=document.createElement("div").style,d=null;if(p[h]!==void 0)d=h;else for(var T=["Webkit","Moz","MS","O","webkit","moz","ms","o"],E=e.capitalizeFirstLetter(h),C=0;C<T.length;C++){var _=T[C]+E;if(p[_]!==void 0){d=_;break}}return a[h]=d,d},e.getCssPropertyWithVendorPrefix(o)},capitalizeFirstLetter:function(o){return o.charAt(0).toUpperCase()+o.slice(1)},positiveModulo:function(o,a){var h=o%a;return h<0&&(h+=a),h},pointInElement:function(o,a){o=e.getElement(o);var h=e.getElementOffset(o),p=e.getElementSize(o);return a.x>=h.x&&a.x<h.x+p.x&&a.y<h.y+p.y&&a.y>=h.y},getMousePosition:function(o){if(typeof o.pageX=="number")e.getMousePosition=function(a){var h=new e.Point;return h.x=a.pageX,h.y=a.pageY,h};else if(typeof o.clientX=="number")e.getMousePosition=function(a){var h=new e.Point;return h.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,h.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop,h};else throw new Error("Unknown event mouse position, no known technique.");return e.getMousePosition(o)},getPageScroll:function(){var o=document.documentElement||{},a=document.body||{};if(typeof window.pageXOffset=="number")e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(a.scrollLeft||a.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else if(o.scrollLeft||o.scrollTop)e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new e.Point(0,0);return e.getPageScroll()},setPageScroll:function(o){if(typeof window.scrollTo!="undefined")e.setPageScroll=function(p){window.scrollTo(p.x,p.y)};else{var a=e.getPageScroll();if(a.x===o.x&&a.y===o.y)return;document.body.scrollLeft=o.x,document.body.scrollTop=o.y;var h=e.getPageScroll();if(h.x!==a.x&&h.y!==a.y){e.setPageScroll=function(p){document.body.scrollLeft=p.x,document.body.scrollTop=p.y};return}if(document.documentElement.scrollLeft=o.x,document.documentElement.scrollTop=o.y,h=e.getPageScroll(),h.x!==a.x&&h.y!==a.y){e.setPageScroll=function(p){document.documentElement.scrollLeft=p.x,document.documentElement.scrollTop=p.y};return}e.setPageScroll=function(p){}}e.setPageScroll(o)},getWindowSize:function(){var o=document.documentElement||{},a=document.body||{};if(typeof window.innerWidth=="number")e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(o.clientWidth||o.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(a.clientWidth||a.clientHeight)e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return e.getWindowSize()},makeCenteredNode:function(o){o=e.getElement(o);var a=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(a[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(a[1].style,{display:"table-row"}),e.extend(a[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),a[0].appendChild(a[1]),a[1].appendChild(a[2]),a[2].appendChild(o),a[0]},makeNeutralElement:function(o){var a=document.createElement(o),h=a.style;return h.background="transparent none",h.border="none",h.margin="0px",h.padding="0px",h.position="static",a},now:function(){return Date.now?e.now=Date.now:e.now=function(){return new Date().getTime()},e.now()},makeTransparentImage:function(o){var a=e.makeNeutralElement("img");return a.src=o,a},setElementOpacity:function(o,a,h){var p,d;o=e.getElement(o),h&&!e.Browser.alpha&&(a=Math.round(a)),e.Browser.opacity?o.style.opacity=a<1?a:"":a<1?(p=Math.round(100*a),d="alpha(opacity="+p+")",o.style.filter=d):o.style.filter=""},setElementTouchActionNone:function(o){o=e.getElement(o),typeof o.style.touchAction!="undefined"?o.style.touchAction="none":typeof o.style.msTouchAction!="undefined"&&(o.style.msTouchAction="none")},setElementPointerEvents:function(o,a){o=e.getElement(o),typeof o.style.pointerEvents!="undefined"&&(o.style.pointerEvents=a)},setElementPointerEventsNone:function(o){e.setElementPointerEvents(o,"none")},addClass:function(o,a){o=e.getElement(o),o.className?(" "+o.className+" ").indexOf(" "+a+" ")===-1&&(o.className+=" "+a):o.className=a},indexOf:function(o,a,h){return Array.prototype.indexOf?this.indexOf=function(p,d,T){return p.indexOf(d,T)}:this.indexOf=function(p,d,T){var E,C=T||0,_;if(!p)throw new TypeError;if(_=p.length,_===0||C>=_)return-1;for(C<0&&(C=_-Math.abs(C)),E=C;E<_;E++)if(p[E]===d)return E;return-1},this.indexOf(o,a,h)},removeClass:function(o,a){var h,p=[],d;for(o=e.getElement(o),h=o.className.split(/\s+/),d=0;d<h.length;d++)h[d]&&h[d]!==a&&p.push(h[d]);o.className=p.join(" ")},normalizeEventListenerOptions:function(o){var a;return typeof o!="undefined"?typeof o=="boolean"?a=e.supportsEventListenerOptions?{capture:o}:o:a=e.supportsEventListenerOptions?o:typeof o.capture!="undefined"?o.capture:!1:a=e.supportsEventListenerOptions?{capture:!1}:!1,a},addEvent:function(){if(e.supportsAddEventListener)return function(o,a,h,p){p=e.normalizeEventListenerOptions(p),o=e.getElement(o),o.addEventListener(a,h,p)};if(document.documentElement.attachEvent&&document.attachEvent)return function(o,a,h){o=e.getElement(o),o.attachEvent("on"+a,h)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(o,a,h,p){p=e.normalizeEventListenerOptions(p),o=e.getElement(o),o.removeEventListener(a,h,p)};if(document.documentElement.detachEvent&&document.detachEvent)return function(o,a,h){o=e.getElement(o),o.detachEvent("on"+a,h)};throw new Error("No known event model.")}(),cancelEvent:function(o){o.preventDefault()},eventIsCanceled:function(o){return o.defaultPrevented},stopEvent:function(o){o.stopPropagation()},createCallback:function(o,a){var h=[],p;for(p=2;p<arguments.length;p++)h.push(arguments[p]);return function(){var d=h.concat([]),T;for(T=0;T<arguments.length;T++)d.push(arguments[T]);return a.apply(o,d)}},getUrlParameter:function(o){var a=u[o];return a||null},getUrlProtocol:function(o){var a=o.match(/^([a-z]+:)\/\//i);return a===null?window.location.protocol:a[1].toLowerCase()},createAjaxRequest:function(o){var a;try{a=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{a=!1}if(a)window.XMLHttpRequest?e.createAjaxRequest=function(h){return h?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:e.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)e.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return e.createAjaxRequest(o)},makeAjaxRequest:function(o,a,h){var p,d,T;e.isPlainObject(o)&&(a=o.success,h=o.error,p=o.withCredentials,d=o.headers,T=o.responseType||null,o=o.url);var E=e.getUrlProtocol(o),C=e.createAjaxRequest(E==="file:");if(!e.isFunction(a))throw new Error("makeAjaxRequest requires a success callback");C.onreadystatechange=function(){C.readyState===4&&(C.onreadystatechange=function(){},C.status>=200&&C.status<300||C.status===0&&E!=="http:"&&E!=="https:"?a(C):(e.console.log("AJAX request returned %d: %s",C.status,o),e.isFunction(h)&&h(C)))};try{if(C.open("GET",o,!0),T&&(C.responseType=T),d)for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&d[_]&&C.setRequestHeader(_,d[_]);p&&(C.withCredentials=!0),C.send(null)}catch(R){e.console.log("%s while making AJAX request: %s",R.name,R.message),C.onreadystatechange=function(){},e.isFunction(h)&&h(C,R)}return C},jsonp:function(o){var a,h=o.url,p=document.head||document.getElementsByTagName("head")[0]||document.documentElement,d=o.callbackName||"openseadragon"+e.now(),T=window[d],E="$1"+d+"$2",C=o.param||"callback",_=o.callback;h=h.replace(/(=)\?(&|$)|\?\?/i,E),h+=(/\?/.test(h)?"&":"?")+C+"="+d,window[d]=function(R){if(T)window[d]=T;else try{delete window[d]}catch{}_&&e.isFunction(_)&&_(R)},a=document.createElement("script"),(o.async!==void 0||o.async!==!1)&&(a.async="async"),o.scriptCharset&&(a.charset=o.scriptCharset),a.src=h,a.onload=a.onreadystatechange=function(R,f){(f||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,p&&a.parentNode&&p.removeChild(a),a=void 0)},p.insertBefore(a,p.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(o){if(window.DOMParser)e.parseXml=function(a){var h=null,p;return p=new DOMParser,h=p.parseFromString(a,"text/xml"),h};else if(window.ActiveXObject)e.parseXml=function(a){var h=null;return h=new ActiveXObject("Microsoft.XMLDOM"),h.async=!1,h.loadXML(a),h};else throw new Error("Browser doesn't support XML DOM.");return e.parseXml(o)},parseJSON:function(o){return e.parseJSON=window.JSON.parse,e.parseJSON(o)},imageFormatSupported:function(o){return o=o||"",!!s[o.toLowerCase()]},setImageFormatsSupported:function(o){e.extend(s,o)}});var n=function(o){};e.console=window.console||{log:n,debug:n,info:n,warn:n,error:n,assert:n},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var s={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},u={};(function(){var o=navigator.appVersion,a=navigator.userAgent,h;switch(navigator.appName){case"Microsoft Internet Explorer":!!window.attachEvent&&!!window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(a.substring(a.indexOf("MSIE")+5,a.indexOf(";",a.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(a.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(a.substring(a.indexOf("Edge")+5))):a.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(a.substring(a.indexOf("Edg")+4))):a.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(a.substring(a.indexOf("Firefox")+8))):a.indexOf("Safari")>=0?(e.Browser.vendor=a.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(a.substring(a.substring(0,a.indexOf("Safari")).lastIndexOf("/")+1,a.indexOf("Safari")))):(h=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),h.exec(a)!==null&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(o);break}var p=window.location.search.substring(1),d=p.split("&"),T,E,C;for(C=0;C<d.length;C++)if(T=d[C],E=T.indexOf("="),E>0){var _=T.substring(0,E),R=T.substring(E+1);try{u[_]=decodeURIComponent(R)}catch{e.console.error("Ignoring malformed URL parameter: %s=%s",_,R)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<11&&e.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),function(o){var a=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,h=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.msCancelAnimationFrame;if(a&&h)e.requestAnimationFrame=function(){return a.apply(o,arguments)},e.cancelAnimationFrame=function(){return h.apply(o,arguments)};else{var p=[],d=[],T=0,E;e.requestAnimationFrame=function(C){return p.push([++T,C]),E||(E=setInterval(function(){if(p.length){var _=e.now(),R=d;for(d=p,p=R;d.length;)d.shift()[1](_)}else clearInterval(E),E=void 0},1e3/50)),T},e.cancelAnimationFrame=function(C){var _,R;for(_=0,R=p.length;_<R;_+=1)if(p[_][0]===C){p.splice(_,1);return}for(_=0,R=d.length;_<R;_+=1)if(d[_][0]===C){d.splice(_,1);return}}}}(window);function l(o,a){return a&&o!==document.body?document.body:o.offsetParent}}(r),function(e,i){t.exports?t.exports=i():e.OpenSeadragon=i()}(ic,function(){return r}),function(e){var i={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.fullscreenElement},i.requestFullScreen=function(n){return n.requestFullscreen()},i.exitFullScreen=function(){document.exitFullscreen()},i.fullScreenEventName="fullscreenchange",i.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.msFullscreenElement},i.requestFullScreen=function(n){return n.msRequestFullscreen()},i.exitFullScreen=function(){document.msExitFullscreen()},i.fullScreenEventName="MSFullscreenChange",i.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitFullscreenElement},i.requestFullScreen=function(n){return n.webkitRequestFullscreen()},i.exitFullScreen=function(){document.webkitExitFullscreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},i.requestFullScreen=function(n){return n.webkitRequestFullScreen()},i.exitFullScreen=function(){document.webkitCancelFullScreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.mozFullScreenElement},i.requestFullScreen=function(n){return n.mozRequestFullScreen()},i.exitFullScreen=function(){document.mozCancelFullScreen()},i.fullScreenEventName="mozfullscreenchange",i.fullScreenErrorEventName="mozfullscreenerror"),i.isFullScreen=function(){return i.getFullScreenElement()!==null},i.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),i.exitFullScreen()},e.extend(e,i)}(r),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(i,n,s,u){var l=this;u=u||1;var o=0,a=function(h){o++,o===u&&l.removeHandler(i,a),n(h)};this.addHandler(i,a,s)},addHandler:function(i,n,s){var u=this.events[i];u||(this.events[i]=u=[]),n&&e.isFunction(n)&&(u[u.length]={handler:n,userData:s||null})},removeHandler:function(i,n){var s=this.events[i],u=[],l;if(!!s&&e.isArray(s)){for(l=0;l<s.length;l++)s[l].handler!==n&&u.push(s[l]);this.events[i]=u}},removeAllHandlers:function(i){if(i)this.events[i]=[];else for(var n in this.events)this.events[n]=[]},getHandler:function(i){var n=this.events[i];return!n||!n.length?null:(n=n.length===1?[n[0]]:Array.apply(null,n),function(s,u){var l,o=n.length;for(l=0;l<o;l++)n[l]&&(u.eventSource=s,u.userData=n[l].userData,n[l].handler(u))})},raiseEvent:function(i,n){var s=this.getHandler(i);s&&(n||(n={}),s(this,n))}}}(r),function(e){var i={};e.MouseTracker=function(m){var g=arguments;e.isPlainObject(m)||(m={element:g[0],clickTimeThreshold:g[1],clickDistThreshold:g[2]}),this.hash=Math.random(),this.element=e.getElement(m.element),this.clickTimeThreshold=m.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=m.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=m.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=m.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=m.userData||null,this.stopDelay=m.stopDelay||50,this.preProcessEventHandler=m.preProcessEventHandler||null,this.contextMenuHandler=m.contextMenuHandler||null,this.enterHandler=m.enterHandler||null,this.leaveHandler=m.leaveHandler||null,this.exitHandler=m.exitHandler||null,this.overHandler=m.overHandler||null,this.outHandler=m.outHandler||null,this.pressHandler=m.pressHandler||null,this.nonPrimaryPressHandler=m.nonPrimaryPressHandler||null,this.releaseHandler=m.releaseHandler||null,this.nonPrimaryReleaseHandler=m.nonPrimaryReleaseHandler||null,this.moveHandler=m.moveHandler||null,this.scrollHandler=m.scrollHandler||null,this.clickHandler=m.clickHandler||null,this.dblClickHandler=m.dblClickHandler||null,this.dragHandler=m.dragHandler||null,this.dragEndHandler=m.dragEndHandler||null,this.pinchHandler=m.pinchHandler||null,this.stopHandler=m.stopHandler||null,this.keyDownHandler=m.keyDownHandler||null,this.keyUpHandler=m.keyUpHandler||null,this.keyHandler=m.keyHandler||null,this.focusHandler=m.focusHandler||null,this.blurHandler=m.blurHandler||null;var y=this;i[this.hash]={click:function(w){x(y,w)},dblclick:function(w){D(y,w)},keydown:function(w){H(y,w)},keyup:function(w){A(y,w)},keypress:function(w){L(y,w)},focus:function(w){W(y,w)},blur:function(w){j(y,w)},contextmenu:function(w){J(y,w)},wheel:function(w){ee(y,w)},mousewheel:function(w){K(y,w)},DOMMouseScroll:function(w){K(y,w)},MozMousePixelScroll:function(w){K(y,w)},losecapture:function(w){oe(y,w)},mouseenter:function(w){Ce(y,w)},mouseleave:function(w){Ve(y,w)},mouseover:function(w){k(y,w)},mouseout:function(w){Y(y,w)},mousedown:function(w){G(y,w)},mouseup:function(w){$(y,w)},mousemove:function(w){ce(y,w)},touchstart:function(w){de(y,w)},touchend:function(w){se(y,w)},touchmove:function(w){ne(y,w)},touchcancel:function(w){te(y,w)},gesturestart:function(w){pe(y,w)},gesturechange:function(w){X(y,w)},gotpointercapture:function(w){Ee(y,w)},lostpointercapture:function(w){Ae(y,w)},pointerenter:function(w){Ce(y,w)},pointerleave:function(w){Ve(y,w)},pointerover:function(w){k(y,w)},pointerout:function(w){Y(y,w)},pointerdown:function(w){G(y,w)},pointerup:function(w){$(y,w)},pointermove:function(w){ce(y,w)},pointercancel:function(w){c(y,w)},pointerupcaptured:function(w){ve(y,w)},pointermovecaptured:function(w){le(y,w)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),m.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){o(this),this.element=null,i[this.hash]=null,delete i[this.hash]},isTracking:function(){return i[this.hash].tracking},setTracking:function(m){return m?l(this):o(this),this},getActivePointersListByType:function(m){var g=i[this.hash],y,w=g.activePointersLists.length,F;for(y=0;y<w;y++)if(g.activePointersLists[y].type===m)return g.activePointersLists[y];return F=new e.MouseTracker.GesturePointList(m),g.activePointersLists.push(F),F},getActivePointerCount:function(){var m=i[this.hash],g,y=m.activePointersLists.length,w=0;for(g=0;g<y;g++)w+=m.activePointersLists[g].getLength();return w},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var n=function(){try{return window.self!==window.top}catch{return!0}}();function s(m){try{return m.addEventListener&&m.removeEventListener}catch{return!1}}e.MouseTracker.gesturePointVelocityTracker=function(){var m=[],g=0,y=0,w=function(ue,Q){return ue.hash.toString()+Q.type+Q.id.toString()},F=function(){var ue,Q=m.length,Re,Se,xt=e.now(),er,tr,ir;for(er=xt-y,y=xt,ue=0;ue<Q;ue++)Re=m[ue],Se=Re.gPoint,Se.direction=Math.atan2(Se.currentPos.y-Re.lastPos.y,Se.currentPos.x-Re.lastPos.x),tr=Re.lastPos.distanceTo(Se.currentPos),Re.lastPos=Se.currentPos,ir=1e3*tr/(er+1),Se.speed=.75*ir+.25*Se.speed},U=function(ue,Q){var Re=w(ue,Q);m.push({guid:Re,gPoint:Q,lastPos:Q.currentPos}),m.length===1&&(y=e.now(),g=window.setInterval(F,50))},ie=function(ue,Q){var Re=w(ue,Q),Se,xt=m.length;for(Se=0;Se<xt;Se++)if(m[Se].guid===Re){m.splice(Se,1),xt--,xt===0&&window.clearInterval(g);break}};return{addPoint:U,removePoint:ie}}(),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],e.MouseTracker.wheelEventName==="DOMMouseScroll"&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=function(){var m=document.createElement("div");return e.isFunction(m.setPointerCapture)&&e.isFunction(m.releasePointerCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=function(){var m=document.createElement("div");return e.isFunction(m.setCapture)&&e.isFunction(m.releaseCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(m){this._gPoints=[],this.type=m,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(m){return this._gPoints.push(m)},removeById:function(m){var g,y=this._gPoints.length;for(g=0;g<y;g++)if(this._gPoints[g].id===m){this._gPoints.splice(g,1);break}return this._gPoints.length},getByIndex:function(m){return m<this._gPoints.length?this._gPoints[m]:null},getById:function(m){var g,y=this._gPoints.length;for(g=0;g<y;g++)if(this._gPoints[g].id===m)return this._gPoints[g];return null},getPrimary:function(m){var g,y=this._gPoints.length;for(g=0;g<y;g++)if(this._gPoints[g].isPrimary)return this._gPoints[g];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(e.console.warn("GesturePointList.removeContact() Implausible contacts value"),this.contacts=0)}};function u(m){var g=i[m.hash],y,w,F,U,ie,ue=g.activePointersLists.length;for(y=0;y<ue;y++)if(F=g.activePointersLists[y],F.getLength()>0){for(ie=[],U=F.asArray(),w=0;w<U.length;w++)ie.push(U[w]);for(w=0;w<ie.length;w++)P(m,F,ie[w])}for(y=0;y<ue;y++)g.activePointersLists.pop();g.sentDragEvent=!1}function l(m){var g=i[m.hash],y,w;if(!g.tracking){for(w=0;w<e.MouseTracker.subscribeEvents.length;w++)y=e.MouseTracker.subscribeEvents[w],e.addEvent(m.element,y,g[y],y===e.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1);u(m),g.tracking=!0}}function o(m){var g=i[m.hash],y,w;if(g.tracking){for(w=0;w<e.MouseTracker.subscribeEvents.length;w++)y=e.MouseTracker.subscribeEvents[w],e.removeEvent(m.element,y,g[y],!1);u(m),g.tracking=!1}}function a(m,g){var y=i[m.hash];if(g==="pointerevent")return{upName:"pointerup",upHandler:y.pointerupcaptured,moveName:"pointermove",moveHandler:y.pointermovecaptured};if(g==="mouse")return{upName:"pointerup",upHandler:y.pointerupcaptured,moveName:"pointermove",moveHandler:y.pointermovecaptured};if(g==="touch")return{upName:"touchend",upHandler:y.touchendcaptured,moveName:"touchmove",moveHandler:y.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function h(m,g){var y;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{m.element.setPointerCapture(g.id)}catch{e.console.warn("setPointerCapture() called on invalid pointer ID");return}else m.element.setCapture(!0);else y=a(m,e.MouseTracker.havePointerEvents?"pointerevent":g.type),n&&s(window.top)&&e.addEvent(window.top,y.upName,y.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,y.upName,y.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,y.moveName,y.moveHandler,!0);M(m,g,!0)}function p(m,g){var y,w,F;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(w=m.getActivePointersListByType(g.type),F=w.getById(g.id),!F||!F.captured)return;try{m.element.releasePointerCapture(g.id)}catch{}}else m.element.releaseCapture();else y=a(m,e.MouseTracker.havePointerEvents?"pointerevent":g.type),n&&s(window.top)&&e.removeEvent(window.top,y.upName,y.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,y.moveName,y.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,y.upName,y.upHandler,!0);M(m,g,!1)}function d(m){return e.MouseTracker.havePointerEvents?m.pointerId:e.MouseTracker.mousePointerId}function T(m){return e.MouseTracker.havePointerEvents?m.pointerType||(e.Browser.vendor===e.BROWSERS.IE?"mouse":""):"mouse"}function E(m){return e.MouseTracker.havePointerEvents?m.isPrimary:!0}function C(m){return e.getMousePosition(m)}function _(m,g){return R(C(m),g)}function R(m,g){var y=e.getElementOffset(g);return m.minus(y)}function f(m,g){return new e.Point((m.x+g.x)/2,(m.y+g.y)/2)}function x(m,g){var y={originalEvent:g,eventType:"click",pointerType:"mouse",isEmulated:!1};O(m,y),y.preventDefault&&!y.defaultPrevented&&e.cancelEvent(g),y.stopPropagation&&e.stopEvent(g)}function D(m,g){var y={originalEvent:g,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};O(m,y),y.preventDefault&&!y.defaultPrevented&&e.cancelEvent(g),y.stopPropagation&&e.stopEvent(g)}function H(m,g){var y=null,w={originalEvent:g,eventType:"keydown",pointerType:"",isEmulated:!1};O(m,w),m.keyDownHandler&&!w.preventGesture&&!w.defaultPrevented&&(y={eventSource:m,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:w.preventDefault||w.defaultPrevented,userData:m.userData},m.keyDownHandler(y)),(y&&y.preventDefault||w.preventDefault&&!w.defaultPrevented)&&e.cancelEvent(g),w.stopPropagation&&e.stopEvent(g)}function A(m,g){var y=null,w={originalEvent:g,eventType:"keyup",pointerType:"",isEmulated:!1};O(m,w),m.keyUpHandler&&!w.preventGesture&&!w.defaultPrevented&&(y={eventSource:m,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:w.preventDefault||w.defaultPrevented,userData:m.userData},m.keyUpHandler(y)),(y&&y.preventDefault||w.preventDefault&&!w.defaultPrevented)&&e.cancelEvent(g),w.stopPropagation&&e.stopEvent(g)}function L(m,g){var y=null,w={originalEvent:g,eventType:"keypress",pointerType:"",isEmulated:!1};O(m,w),m.keyHandler&&!w.preventGesture&&!w.defaultPrevented&&(y={eventSource:m,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:w.preventDefault||w.defaultPrevented,userData:m.userData},m.keyHandler(y)),(y&&y.preventDefault||w.preventDefault&&!w.defaultPrevented)&&e.cancelEvent(g),w.stopPropagation&&e.stopEvent(g)}function W(m,g){var y={originalEvent:g,eventType:"focus",pointerType:"",isEmulated:!1};O(m,y),m.focusHandler&&!y.preventGesture&&m.focusHandler({eventSource:m,originalEvent:g,userData:m.userData})}function j(m,g){var y={originalEvent:g,eventType:"blur",pointerType:"",isEmulated:!1};O(m,y),m.blurHandler&&!y.preventGesture&&m.blurHandler({eventSource:m,originalEvent:g,userData:m.userData})}function J(m,g){var y=null,w={originalEvent:g,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};O(m,w),m.contextMenuHandler&&!w.preventGesture&&!w.defaultPrevented&&(y={eventSource:m,position:R(C(g),m.element),originalEvent:w.originalEvent,preventDefault:w.preventDefault||w.defaultPrevented,userData:m.userData},m.contextMenuHandler(y)),(y&&y.preventDefault||w.preventDefault&&!w.defaultPrevented)&&e.cancelEvent(g),w.stopPropagation&&e.stopEvent(g)}function ee(m,g){ae(m,g,g)}function K(m,g){var y={target:g.target||g.srcElement,type:"wheel",shiftKey:g.shiftKey||!1,clientX:g.clientX,clientY:g.clientY,pageX:g.pageX?g.pageX:g.clientX,pageY:g.pageY?g.pageY:g.clientY,deltaMode:g.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};e.MouseTracker.wheelEventName==="mousewheel"?y.deltaY=-g.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:y.deltaY=g.detail,ae(m,y,g)}function ae(m,g,y){var w=0,F,U=null;w=g.deltaY<0?1:-1,F={originalEvent:g,eventType:"wheel",pointerType:"mouse",isEmulated:g!==y},O(m,F),m.scrollHandler&&!F.preventGesture&&!F.defaultPrevented&&(U={eventSource:m,pointerType:"mouse",position:_(g,m.element),scroll:w,shift:g.shiftKey,isTouchEvent:!1,originalEvent:y,preventDefault:F.preventDefault||F.defaultPrevented,userData:m.userData},m.scrollHandler(U)),F.stopPropagation&&e.stopEvent(y),(U&&U.preventDefault||F.preventDefault&&!F.defaultPrevented)&&e.cancelEvent(y)}function oe(m,g){var y={id:e.MouseTracker.mousePointerId,type:"mouse"},w={originalEvent:g,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};O(m,w),g.target===m.element&&M(m,y,!1),w.stopPropagation&&e.stopEvent(g)}function de(m,g){var y,w,F=g.changedTouches.length,U,ie=m.getActivePointersListByType("touch");y=e.now(),ie.getLength()>g.touches.length-F&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var ue={originalEvent:g,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(O(m,ue),w=0;w<F;w++)U={id:g.changedTouches[w].identifier,type:"touch",isPrimary:ie.getLength()===0,currentPos:C(g.changedTouches[w]),currentTime:y},B(m,ue,U),I(m,ue,U,0),M(m,U,!0);ue.preventDefault&&!ue.defaultPrevented&&e.cancelEvent(g),ue.stopPropagation&&e.stopEvent(g)}function se(m,g){var y,w,F=g.changedTouches.length,U;y=e.now();var ie={originalEvent:g,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(O(m,ie),w=0;w<F;w++)U={id:g.changedTouches[w].identifier,type:"touch",currentPos:C(g.changedTouches[w]),currentTime:y},Z(m,ie,U,0),M(m,U,!1),z(m,ie,U);ie.preventDefault&&!ie.defaultPrevented&&e.cancelEvent(g),ie.stopPropagation&&e.stopEvent(g)}function ne(m,g){var y,w,F=g.changedTouches.length,U;y=e.now();var ie={originalEvent:g,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(O(m,ie),w=0;w<F;w++)U={id:g.changedTouches[w].identifier,type:"touch",currentPos:C(g.changedTouches[w]),currentTime:y},q(m,ie,U);ie.preventDefault&&!ie.defaultPrevented&&e.cancelEvent(g),ie.stopPropagation&&e.stopEvent(g)}function te(m,g){var y=g.changedTouches.length,w,F,U={originalEvent:g,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(O(m,U),w=0;w<y;w++)F={id:g.changedTouches[w].identifier,type:"touch"},re(m,U,F);U.stopPropagation&&e.stopEvent(g)}function pe(m,g){return e.eventIsCanceled(g)||g.preventDefault(),!1}function X(m,g){return e.eventIsCanceled(g)||g.preventDefault(),!1}function Ee(m,g){var y={originalEvent:g,eventType:"gotpointercapture",pointerType:T(g),isEmulated:!1};O(m,y),g.target===m.element&&M(m,{id:g.pointerId,type:T(g)},!0),y.stopPropagation&&e.stopEvent(g)}function Ae(m,g){var y={originalEvent:g,eventType:"lostpointercapture",pointerType:T(g),isEmulated:!1};O(m,y),g.target===m.element&&M(m,{id:g.pointerId,type:T(g)},!1),y.stopPropagation&&e.stopEvent(g)}function Ce(m,g){var y={id:d(g),type:T(g),isPrimary:E(g),currentPos:C(g),currentTime:e.now()},w={originalEvent:g,eventType:"pointerenter",pointerType:y.type,isEmulated:!1};O(m,w),B(m,w,y)}function Ve(m,g){var y={id:d(g),type:T(g),isPrimary:E(g),currentPos:C(g),currentTime:e.now()},w={originalEvent:g,eventType:"pointerleave",pointerType:y.type,isEmulated:!1};O(m,w),z(m,w,y)}function k(m,g){var y={id:d(g),type:T(g),isPrimary:E(g),currentPos:C(g),currentTime:e.now()},w={originalEvent:g,eventType:"pointerover",pointerType:y.type,isEmulated:!1};O(m,w),N(m,w,y),w.preventDefault&&!w.defaultPrevented&&e.cancelEvent(g),w.stopPropagation&&e.stopEvent(g)}function Y(m,g){var y={id:d(g),type:T(g),isPrimary:E(g),currentPos:C(g),currentTime:e.now()},w={originalEvent:g,eventType:"pointerout",pointerType:y.type,isEmulated:!1};O(m,w),V(m,w,y),w.preventDefault&&!w.defaultPrevented&&e.cancelEvent(g),w.stopPropagation&&e.stopEvent(g)}function G(m,g){var y={id:d(g),type:T(g),isPrimary:E(g),currentPos:C(g),currentTime:e.now()},w=e.MouseTracker.havePointerEvents&&y.type==="touch"&&e.Browser.vendor!==e.BROWSERS.IE,F={originalEvent:g,eventType:"pointerdown",pointerType:y.type,isEmulated:!1};O(m,F),I(m,F,y,g.button),F.preventDefault&&!F.defaultPrevented&&e.cancelEvent(g),F.stopPropagation&&e.stopEvent(g),F.shouldCapture&&(w?M(m,y,!0):h(m,y))}function $(m,g){ye(m,g)}function ve(m,g){var y=m.getActivePointersListByType(T(g));y.getById(g.pointerId)&&ye(m,g),e.stopEvent(g)}function ye(m,g){var y;y={id:d(g),type:T(g),isPrimary:E(g),currentPos:C(g),currentTime:e.now()};var w={originalEvent:g,eventType:"pointerup",pointerType:y.type,isEmulated:!1};O(m,w),Z(m,w,y,g.button),w.preventDefault&&!w.defaultPrevented&&e.cancelEvent(g),w.stopPropagation&&e.stopEvent(g),w.shouldReleaseCapture&&(g.target===m.element?p(m,y):M(m,y,!1))}function ce(m,g){S(m,g)}function le(m,g){var y=m.getActivePointersListByType(T(g));y.getById(g.pointerId)&&S(m,g),e.stopEvent(g)}function S(m,g){var y={id:d(g),type:T(g),isPrimary:E(g),currentPos:C(g),currentTime:e.now()},w={originalEvent:g,eventType:"pointermove",pointerType:y.type,isEmulated:!1};O(m,w),q(m,w,y),w.preventDefault&&!w.defaultPrevented&&e.cancelEvent(g),w.stopPropagation&&e.stopEvent(g)}function c(m,g){var y={id:g.pointerId,type:T(g)},w={originalEvent:g,eventType:"pointercancel",pointerType:y.type,isEmulated:!1};O(m,w),re(m,w,y),w.stopPropagation&&e.stopEvent(g)}function v(m,g){return g.speed=0,g.direction=0,g.contactPos=g.currentPos,g.contactTime=g.currentTime,g.lastPos=g.currentPos,g.lastTime=g.currentTime,m.add(g)}function P(m,g,y){var w,F=g.getById(y.id);return F?(F.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),p(m,F)),(g.type==="mouse"||g.type==="pen")&&g.contacts>0&&g.removeContact(),w=g.removeById(y.id)):w=g.getLength(),w}function b(m,g){switch(g.eventType){case"pointermove":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!m.hasGestureHandlers,g.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1;break;case"pointerdown":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!m.hasGestureHandlers,g.stopPropagation=!1;break;case"pointerup":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!m.hasGestureHandlers,g.stopPropagation=!1;break;case"wheel":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!m.hasScrollHandler,g.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":g.isStoppable=!0,g.isCancelable=!1,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1;break;case"click":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!!m.clickHandler,g.preventGesture=!1,g.stopPropagation=!1;break;case"dblclick":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!!m.dblClickHandler,g.preventGesture=!1,g.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:g.isStoppable=!1,g.isCancelable=!1,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1;break}}function O(m,g){g.eventSource=m,g.eventPhase=g.originalEvent&&typeof g.originalEvent.eventPhase!="undefined"?g.originalEvent.eventPhase:0,g.defaultPrevented=e.eventIsCanceled(g.originalEvent),g.shouldCapture=!1,g.shouldReleaseCapture=!1,g.userData=m.userData,b(m,g),m.preProcessEventHandler&&m.preProcessEventHandler(g)}function M(m,g,y){var w=m.getActivePointersListByType(g.type),F=w.getById(g.id);F?y&&!F.captured?(F.captured=!0,w.captureCount++):!y&&F.captured&&(F.captured=!1,w.captureCount--,w.captureCount<0&&(w.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function B(m,g,y){var w=m.getActivePointersListByType(y.type),F;F=w.getById(y.id),F?(F.insideElement=!0,F.lastPos=F.currentPos,F.lastTime=F.currentTime,F.currentPos=y.currentPos,F.currentTime=y.currentTime,y=F):(y.captured=!1,y.insideElementPressed=!1,y.insideElement=!0,v(w,y)),m.enterHandler&&m.enterHandler({eventSource:m,pointerType:y.type,position:R(y.currentPos,m.element),buttons:w.buttons,pointers:m.getActivePointerCount(),insideElementPressed:y.insideElementPressed,buttonDownAny:w.buttons!==0,isTouchEvent:y.type==="touch",originalEvent:g.originalEvent,userData:m.userData})}function z(m,g,y){var w=m.getActivePointersListByType(y.type),F,U;F=w.getById(y.id),F?(F.captured?(F.insideElement=!1,F.lastPos=F.currentPos,F.lastTime=F.currentTime,F.currentPos=y.currentPos,F.currentTime=y.currentTime):P(m,w,F),y=F):(y.captured=!1,y.insideElementPressed=!1),(m.leaveHandler||m.exitHandler)&&(U={eventSource:m,pointerType:y.type,position:y.currentPos&&R(y.currentPos,m.element),buttons:w.buttons,pointers:m.getActivePointerCount(),insideElementPressed:y.insideElementPressed,buttonDownAny:w.buttons!==0,isTouchEvent:y.type==="touch",originalEvent:g.originalEvent,userData:m.userData},m.leaveHandler&&m.leaveHandler(U),m.exitHandler&&m.exitHandler(U))}function N(m,g,y){var w,F;w=m.getActivePointersListByType(y.type),F=w.getById(y.id),F?y=F:(y.captured=!1,y.insideElementPressed=!1),m.overHandler&&m.overHandler({eventSource:m,pointerType:y.type,position:R(y.currentPos,m.element),buttons:w.buttons,pointers:m.getActivePointerCount(),insideElementPressed:y.insideElementPressed,buttonDownAny:w.buttons!==0,isTouchEvent:y.type==="touch",originalEvent:g.originalEvent,userData:m.userData})}function V(m,g,y){var w,F;w=m.getActivePointersListByType(y.type),F=w.getById(y.id),F?y=F:(y.captured=!1,y.insideElementPressed=!1),m.outHandler&&m.outHandler({eventSource:m,pointerType:y.type,position:y.currentPos&&R(y.currentPos,m.element),buttons:w.buttons,pointers:m.getActivePointerCount(),insideElementPressed:y.insideElementPressed,buttonDownAny:w.buttons!==0,isTouchEvent:y.type==="touch",originalEvent:g.originalEvent,userData:m.userData})}function I(m,g,y,w){var F=i[m.hash],U=m.getActivePointersListByType(y.type),ie;if(typeof g.originalEvent.buttons!="undefined"?U.buttons=g.originalEvent.buttons:w===0?U.buttons|=1:w===1?U.buttons|=4:w===2?U.buttons|=2:w===3?U.buttons|=8:w===4?U.buttons|=16:w===5&&(U.buttons|=32),w!==0){g.shouldCapture=!1,g.shouldReleaseCapture=!1,m.nonPrimaryPressHandler&&!g.preventGesture&&!g.defaultPrevented&&(g.preventDefault=!0,m.nonPrimaryPressHandler({eventSource:m,pointerType:y.type,position:R(y.currentPos,m.element),button:w,buttons:U.buttons,isTouchEvent:y.type==="touch",originalEvent:g.originalEvent,userData:m.userData}));return}if(ie=U.getById(y.id),ie)ie.insideElementPressed=!0,ie.insideElement=!0,ie.originalTarget=g.originalEvent.target,ie.contactPos=y.currentPos,ie.contactTime=y.currentTime,ie.lastPos=ie.currentPos,ie.lastTime=ie.currentTime,ie.currentPos=y.currentPos,ie.currentTime=y.currentTime,y=ie;else{e.console.warn("pointerdown event on untracked pointer"),y.captured=!1,y.insideElementPressed=!0,y.insideElement=!0,y.originalTarget=g.originalEvent.target,v(U,y);return}U.addContact(),!g.preventGesture&&!g.defaultPrevented?(g.shouldCapture=!0,g.shouldReleaseCapture=!1,g.preventDefault=!0,(m.dragHandler||m.dragEndHandler||m.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(m,y),U.contacts===1?m.pressHandler&&!g.preventGesture&&m.pressHandler({eventSource:m,pointerType:y.type,position:R(y.contactPos,m.element),buttons:U.buttons,isTouchEvent:y.type==="touch",originalEvent:g.originalEvent,userData:m.userData}):U.contacts===2&&m.pinchHandler&&y.type==="touch"&&(F.pinchGPoints=U.asArray(),F.lastPinchDist=F.currentPinchDist=F.pinchGPoints[0].currentPos.distanceTo(F.pinchGPoints[1].currentPos),F.lastPinchCenter=F.currentPinchCenter=f(F.pinchGPoints[0].currentPos,F.pinchGPoints[1].currentPos))):(g.shouldCapture=!1,g.shouldReleaseCapture=!1)}function Z(m,g,y,w){var F=i[m.hash],U=m.getActivePointersListByType(y.type),ie,ue,Q,Re=!1,Se;if(typeof g.originalEvent.buttons!="undefined"?U.buttons=g.originalEvent.buttons:w===0?U.buttons^=~1:w===1?U.buttons^=~4:w===2?U.buttons^=~2:w===3?U.buttons^=~8:w===4?U.buttons^=~16:w===5&&(U.buttons^=~32),g.shouldCapture=!1,w!==0){g.shouldReleaseCapture=!1,m.nonPrimaryReleaseHandler&&!g.preventGesture&&!g.defaultPrevented&&(g.preventDefault=!0,m.nonPrimaryReleaseHandler({eventSource:m,pointerType:y.type,position:R(y.currentPos,m.element),button:w,buttons:U.buttons,isTouchEvent:y.type==="touch",originalEvent:g.originalEvent,userData:m.userData}));return}Q=U.getById(y.id),Q?(U.removeContact(),Q.captured&&(Re=!0),Q.lastPos=Q.currentPos,Q.lastTime=Q.currentTime,Q.currentPos=y.currentPos,Q.currentTime=y.currentTime,Q.insideElement||P(m,U,Q),ie=Q.currentPos,ue=Q.currentTime):(e.console.warn("updatePointerUp(): pointerup on untracked gPoint"),y.captured=!1,y.insideElementPressed=!1,y.insideElement=!0,v(U,y),Q=y),!g.preventGesture&&!g.defaultPrevented&&(Re?(g.shouldReleaseCapture=!0,g.preventDefault=!0,(m.dragHandler||m.dragEndHandler||m.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(m,Q),U.contacts===0?(m.releaseHandler&&m.releaseHandler({eventSource:m,pointerType:Q.type,position:R(ie,m.element),buttons:U.buttons,insideElementPressed:Q.insideElementPressed,insideElementReleased:Q.insideElement,isTouchEvent:Q.type==="touch",originalEvent:g.originalEvent,userData:m.userData}),m.dragEndHandler&&F.sentDragEvent&&m.dragEndHandler({eventSource:m,pointerType:Q.type,position:R(Q.currentPos,m.element),speed:Q.speed,direction:Q.direction,shift:g.originalEvent.shiftKey,isTouchEvent:Q.type==="touch",originalEvent:g.originalEvent,userData:m.userData}),F.sentDragEvent=!1,(m.clickHandler||m.dblClickHandler)&&Q.insideElement&&(Se=ue-Q.contactTime<=m.clickTimeThreshold&&Q.contactPos.distanceTo(ie)<=m.clickDistThreshold,m.clickHandler&&m.clickHandler({eventSource:m,pointerType:Q.type,position:R(Q.currentPos,m.element),quick:Se,shift:g.originalEvent.shiftKey,isTouchEvent:Q.type==="touch",originalEvent:g.originalEvent,originalTarget:Q.originalTarget,userData:m.userData}),m.dblClickHandler&&Se&&(U.clicks++,U.clicks===1?(F.lastClickPos=ie,F.dblClickTimeOut=setTimeout(function(){U.clicks=0},m.dblClickTimeThreshold)):U.clicks===2&&(clearTimeout(F.dblClickTimeOut),U.clicks=0,F.lastClickPos.distanceTo(ie)<=m.dblClickDistThreshold&&m.dblClickHandler({eventSource:m,pointerType:Q.type,position:R(Q.currentPos,m.element),shift:g.originalEvent.shiftKey,isTouchEvent:Q.type==="touch",originalEvent:g.originalEvent,userData:m.userData}),F.lastClickPos=null)))):U.contacts===2&&m.pinchHandler&&Q.type==="touch"&&(F.pinchGPoints=U.asArray(),F.lastPinchDist=F.currentPinchDist=F.pinchGPoints[0].currentPos.distanceTo(F.pinchGPoints[1].currentPos),F.lastPinchCenter=F.currentPinchCenter=f(F.pinchGPoints[0].currentPos,F.pinchGPoints[1].currentPos))):(g.shouldReleaseCapture=!1,m.releaseHandler&&(m.releaseHandler({eventSource:m,pointerType:Q.type,position:R(ie,m.element),buttons:U.buttons,insideElementPressed:Q.insideElementPressed,insideElementReleased:Q.insideElement,isTouchEvent:Q.type==="touch",originalEvent:g.originalEvent,userData:m.userData}),g.preventDefault=!0)))}function q(m,g,y){var w=i[m.hash],F=m.getActivePointersListByType(y.type),U,ie,ue;if(typeof g.originalEvent.buttons!="undefined"&&(F.buttons=g.originalEvent.buttons),U=F.getById(y.id),U)U.lastPos=U.currentPos,U.lastTime=U.currentTime,U.currentPos=y.currentPos,U.currentTime=y.currentTime;else return;g.shouldCapture=!1,g.shouldReleaseCapture=!1,m.stopHandler&&y.type==="mouse"&&(clearTimeout(m.stopTimeOut),m.stopTimeOut=setTimeout(function(){ge(m,g.originalEvent,y.type)},m.stopDelay)),F.contacts===0?m.moveHandler&&m.moveHandler({eventSource:m,pointerType:y.type,position:R(y.currentPos,m.element),buttons:F.buttons,isTouchEvent:y.type==="touch",originalEvent:g.originalEvent,userData:m.userData}):F.contacts===1?(m.moveHandler&&(U=F.asArray()[0],m.moveHandler({eventSource:m,pointerType:U.type,position:R(U.currentPos,m.element),buttons:F.buttons,isTouchEvent:U.type==="touch",originalEvent:g.originalEvent,userData:m.userData})),m.dragHandler&&!g.preventGesture&&!g.defaultPrevented&&(U=F.asArray()[0],ue=U.currentPos.minus(U.lastPos),m.dragHandler({eventSource:m,pointerType:U.type,position:R(U.currentPos,m.element),buttons:F.buttons,delta:ue,speed:U.speed,direction:U.direction,shift:g.originalEvent.shiftKey,isTouchEvent:U.type==="touch",originalEvent:g.originalEvent,userData:m.userData}),g.preventDefault=!0,w.sentDragEvent=!0)):F.contacts===2&&(m.moveHandler&&(ie=F.asArray(),m.moveHandler({eventSource:m,pointerType:ie[0].type,position:R(f(ie[0].currentPos,ie[1].currentPos),m.element),buttons:F.buttons,isTouchEvent:ie[0].type==="touch",originalEvent:g.originalEvent,userData:m.userData})),m.pinchHandler&&y.type==="touch"&&!g.preventGesture&&!g.defaultPrevented&&(ue=w.pinchGPoints[0].currentPos.distanceTo(w.pinchGPoints[1].currentPos),ue!==w.currentPinchDist&&(w.lastPinchDist=w.currentPinchDist,w.currentPinchDist=ue,w.lastPinchCenter=w.currentPinchCenter,w.currentPinchCenter=f(w.pinchGPoints[0].currentPos,w.pinchGPoints[1].currentPos),m.pinchHandler({eventSource:m,pointerType:"touch",gesturePoints:w.pinchGPoints,lastCenter:R(w.lastPinchCenter,m.element),center:R(w.currentPinchCenter,m.element),lastDistance:w.lastPinchDist,distance:w.currentPinchDist,shift:g.originalEvent.shiftKey,originalEvent:g.originalEvent,userData:m.userData}),g.preventDefault=!0)))}function re(m,g,y){var w=m.getActivePointersListByType(y.type),F;F=w.getById(y.id),F&&P(m,w,F)}function ge(m,g,y){m.stopHandler&&m.stopHandler({eventSource:m,pointerType:y,position:_(g,m.element),buttons:m.getActivePointersListByType(y).buttons,isTouchEvent:y==="touch",originalEvent:g,userData:m.userData})}}(r),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(i,n,s){var u=i.parentNode;typeof n=="number"&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=typeof n.attachToViewer=="undefined"?!0:n.attachToViewer,this.autoFade=typeof n.autoFade=="undefined"?!0:n.autoFade,this.element=i,this.anchor=n.anchor,this.container=s,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof n.top=="number"?n.top+"px":n.top,this.wrapper.style.left=typeof n.left=="number"?n.left+"px":n.left,this.wrapper.style.height=typeof n.height=="number"?n.height+"px":n.height,this.wrapper.style.width=typeof n.width=="number"?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):u.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(i){this.wrapper.style.display=i?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(i){this.element[e.SIGNAL]&&e.Browser.vendor===e.BROWSERS.IE?e.setElementOpacity(this.element,i,!0):e.setElementOpacity(this.wrapper,i,!0)}}}(r),function(e){e.ControlDock=function(n){var s=["topleft","topright","bottomright","bottomleft"],u,l;for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(Math.random()*1e6),container:e.makeNeutralElement("div"),controls:[]},n),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),l=0;l<s.length;l++)u=s[l],this.controls[u]=e.makeNeutralElement("div"),this.controls[u].style.position="absolute",u.match("left")&&(this.controls[u].style.left="0px"),u.match("right")&&(this.controls[u].style.right="0px"),u.match("top")&&(this.controls[u].style.top="0px"),u.match("bottom")&&(this.controls[u].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,s){n=e.getElement(n);var u=null;if(!(i(this,n)>=0)){switch(s.anchor){case e.ControlAnchor.TOP_RIGHT:u=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:u=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:u=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:u=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.ABSOLUTE:u=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case e.ControlAnchor.NONE:u=this.container,n.style.margin="0px",n.style.padding="0px";break}this.controls.push(new e.Control(n,s,u)),n.style.display="inline-block"}},removeControl:function(n){n=e.getElement(n);var s=i(this,n);return s>=0&&(this.controls[s].destroy(),this.controls.splice(s,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var n;for(n=this.controls.length-1;n>=0;n--)if(this.controls[n].isVisible())return!0;return!1},setControlsEnabled:function(n){var s;for(s=this.controls.length-1;s>=0;s--)this.controls[s].setVisible(n);return this}};function i(n,s){var u=n.controls,l;for(l=u.length-1;l>=0;l--)if(u[l].element===s)return l;return-1}}(r),function(e){e.Placement=e.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(r),function(e){var i={},n=1;e.Viewer=function(c){var v=arguments,P=this,b;if(e.isPlainObject(c)||(c={id:v[0],xmlPath:v.length>1?v[1]:void 0,prefixUrl:v.length>2?v[2]:void 0,controls:v.length>3?v[3]:void 0,overlays:v.length>4?v[4]:void 0}),c.config&&(e.extend(!0,c,c.config),delete c.config),e.extend(!0,this,{id:c.id,hash:c.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,c),typeof this.hash=="undefined")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof i[this.hash]!="undefined"&&e.console.warn("Hash "+this.hash+" has already been used."),i[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function(O){var M=e.getString("Errors.OpenFailed",O.eventSource,O.message);P._showMessage(M)}),e.ControlDock.call(this,c),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(O){O.width="100%",O.height="100%",O.overflow="hidden",O.position="absolute",O.top="0px",O.left="0px"}(this.canvas.style),e.setElementTouchActionNone(this.canvas),c.tabIndex!==""&&(this.canvas.tabIndex=c.tabIndex===void 0?0:c.tabIndex),this.container.className="openseadragon-container",function(O){O.width="100%",O.height="100%",O.position="relative",O.overflow="hidden",O.left="0px",O.top="0px",O.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,_),keyDownHandler:e.delegate(this,R),keyHandler:e.delegate(this,f),clickHandler:e.delegate(this,x),dblClickHandler:e.delegate(this,D),dragHandler:e.delegate(this,H),dragEndHandler:e.delegate(this,A),enterHandler:e.delegate(this,L),leaveHandler:e.delegate(this,W),pressHandler:e.delegate(this,j),releaseHandler:e.delegate(this,J),nonPrimaryPressHandler:e.delegate(this,ee),nonPrimaryReleaseHandler:e.delegate(this,K),scrollHandler:e.delegate(this,oe),pinchHandler:e.delegate(this,ae)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,de),leaveHandler:e.delegate(this,se)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),i[this.hash].prevContainerSize=s(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function(O){P.source=P.world.getItemAt(0).source,i[P.hash].forceRedraw=!0,P._updateRequestId||(P._updateRequestId=a(P,ne))}),this.world.addHandler("remove-item",function(O){P.world.getItemCount()?P.source=P.world.getItemAt(0).source:P.source=null,i[P.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(O){P.viewport&&P.viewport._setContentBounds(P.world.getHomeBounds(),P.world.getContentFactor())}),this.world.addHandler("item-index-change",function(O){P.source=P.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:i[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:c.timeout}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(b=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(b,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(b=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(b,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),b=0;b<this.customControls.length;b++)this.addControl(this.customControls[b].id,{anchor:this.customControls[b].anchor});e.requestAnimationFrame(function(){p(P)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(c){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(c)},openTileSource:function(c){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(c)},open:function(c,v){var P=this;if(this.close(),!c)return this;if(this.sequenceMode&&e.isArray(c))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof v!="undefined"&&!isNaN(v)&&(this.initialPage=v),this.tileSources=c,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(c)||(c=[c]),!c.length)return this;this._opening=!0;for(var b=c.length,O=0,M=0,B,z=function(){if(O+M===b)if(O){(P._firstOpen||!P.preserveViewport)&&(P.viewport.goHome(!0),P.viewport.update()),P._firstOpen=!1;var I=c[0];if(I.tileSource&&(I=I.tileSource),P.overlays&&!P.preserveOverlays)for(var Z=0;Z<P.overlays.length;Z++)P.currentOverlays[Z]=l(P,P.overlays[Z]);P._drawOverlays(),P._opening=!1,P.raiseEvent("open",{source:I})}else P._opening=!1,P.raiseEvent("open-failed",B)},N=function(I){(!e.isPlainObject(I)||!I.tileSource)&&(I={tileSource:I}),I.index!==void 0&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete I.index),I.collectionImmediately===void 0&&(I.collectionImmediately=!0);var Z=I.success;I.success=function(re){if(O++,I.tileSource.overlays)for(var ge=0;ge<I.tileSource.overlays.length;ge++)P.addOverlay(I.tileSource.overlays[ge]);Z&&Z(re),z()};var q=I.error;I.error=function(re){M++,B||(B=re),q&&q(re),z()},P.addTiledImage(I)},V=0;V<c.length;V++)N(c[V]);return this},close:function(){return i[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),i[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(!!i[this.hash]){if(this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),i[this.navigator.hash]=null,delete i[this.navigator.hash],this.navigator=null),this.removeAllHandlers(),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),i[this.hash]=null,delete i[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(c){return this.innerTracker.setTracking(c),this.outerTracker.setTracking(c),this.raiseEvent("mouse-enabled",{enabled:c}),this},areControlsEnabled:function(){var c=this.controls.length,v;for(v=0;v<this.controls.length;v++)c=c&&this.controls[v].isVisible();return c},setControlsEnabled:function(c){return c?T(this):p(this),this.raiseEvent("controls-enabled",{enabled:c}),this},setDebugMode:function(c){for(var v=0;v<this.world.getItemCount();v++)this.world.getItemAt(v).debugMode=c;this.debugMode=c,this.forceRedraw()},isFullPage:function(){return i[this.hash].fullPage},setFullPage:function(c){var v=document.body,P=v.style,b=document.documentElement.style,O=this,M,B;if(c===this.isFullPage())return this;var z={fullPage:c,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",z),z.preventDefaultAction)return this;if(c){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=P.margin,this.docMargin=b.margin,P.margin="0",b.margin="0",this.bodyPadding=P.padding,this.docPadding=b.padding,P.padding="0",b.padding="0",this.bodyWidth=P.width,this.docWidth=b.width,P.width="100%",b.width="100%",this.bodyHeight=P.height,this.docHeight=b.height,P.height="100%",b.height="100%",this.bodyDisplay=P.display,P.display="block",this.previousBody=[],i[this.hash].prevElementParent=this.element.parentNode,i[this.hash].prevNextSibling=this.element.nextSibling,i[this.hash].prevElementWidth=this.element.style.width,i[this.hash].prevElementHeight=this.element.style.height,M=v.childNodes.length,B=0;B<M;B++)this.previousBody.push(v.childNodes[0]),v.removeChild(v.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,v.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),v.appendChild(this.element),this.element.style.height=e.getWindowSize().y+"px",this.element.style.width=e.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),i[this.hash].fullPage=!0,e.delegate(this,de)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,P.margin=this.bodyMargin,b.margin=this.docMargin,P.padding=this.bodyPadding,b.padding=this.docPadding,P.width=this.bodyWidth,b.width=this.docWidth,P.height=this.bodyHeight,b.height=this.docHeight,P.display=this.bodyDisplay,v.removeChild(this.element),M=this.previousBody.length,B=0;B<M;B++)v.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),i[this.hash].prevElementParent.insertBefore(this.element,i[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(v.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=i[this.hash].prevElementWidth,this.element.style.height=i[this.hash].prevElementHeight;var N=0,V=function(){e.setPageScroll(O.pageScroll);var I=e.getPageScroll();N++,N<10&&(I.x!==O.pageScroll.x||I.y!==O.pageScroll.y)&&e.requestAnimationFrame(V)};e.requestAnimationFrame(V),i[this.hash].fullPage=!1,e.delegate(this,se)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:c}),this},setFullScreen:function(c){var v=this;if(!e.supportsFullScreen)return this.setFullPage(c);if(e.isFullScreen()===c)return this;var P={fullScreen:c,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",P),P.preventDefaultAction)return this;if(c){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var b=function(){var O=e.isFullScreen();O||(e.removeEvent(document,e.fullScreenEventName,b),e.removeEvent(document,e.fullScreenErrorEventName,b),v.setFullPage(!1),v.isFullPage()&&(v.element.style.width=v.fullPageStyleWidth,v.element.style.height=v.fullPageStyleHeight)),v.navigator&&v.viewport&&setTimeout(function(){v.navigator.update(v.viewport)}),v.raiseEvent("full-screen",{fullScreen:O})};e.addEvent(document,e.fullScreenEventName,b),e.addEvent(document,e.fullScreenErrorEventName,b),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},setVisible:function(c){return this.container.style.visibility=c?"":"hidden",this.raiseEvent("visible",{visible:c}),this},addTiledImage:function(c){e.console.assert(c,"[Viewer.addTiledImage] options is required"),e.console.assert(c.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!c.replace||c.index>-1&&c.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var v=this;c.replace&&(c.replaceItem=v.world.getItemAt(c.index)),this._hideMessage(),c.placeholderFillStyle===void 0&&(c.placeholderFillStyle=this.placeholderFillStyle),c.opacity===void 0&&(c.opacity=this.opacity),c.preload===void 0&&(c.preload=this.preload),c.compositeOperation===void 0&&(c.compositeOperation=this.compositeOperation),c.crossOriginPolicy===void 0&&(c.crossOriginPolicy=c.tileSource.crossOriginPolicy!==void 0?c.tileSource.crossOriginPolicy:this.crossOriginPolicy),c.ajaxWithCredentials===void 0&&(c.ajaxWithCredentials=this.ajaxWithCredentials),c.loadTilesWithAjax===void 0&&(c.loadTilesWithAjax=this.loadTilesWithAjax),c.ajaxHeaders===void 0||c.ajaxHeaders===null?c.ajaxHeaders=this.ajaxHeaders:e.isPlainObject(c.ajaxHeaders)&&e.isPlainObject(this.ajaxHeaders)&&(c.ajaxHeaders=e.extend({},this.ajaxHeaders,c.ajaxHeaders));var P={options:c};function b(B){for(var z=0;z<v._loadQueue.length;z++)if(v._loadQueue[z]===P){v._loadQueue.splice(z,1);break}v._loadQueue.length===0&&O(P),v.raiseEvent("add-item-failed",B),c.error&&c.error(B)}function O(B){v.collectionMode&&(v.world.arrange({immediately:B.options.collectionImmediately,rows:v.collectionRows,columns:v.collectionColumns,layout:v.collectionLayout,tileSize:v.collectionTileSize,tileMargin:v.collectionTileMargin}),v.world.setAutoRefigureSizes(!0))}if(e.isArray(c.tileSource)){setTimeout(function(){b({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:c.tileSource,options:c})});return}this._loadQueue.push(P);function M(){for(var B,z,N;v._loadQueue.length&&(B=v._loadQueue[0],!!B.tileSource);){if(v._loadQueue.splice(0,1),B.options.replace){var V=v.world.getIndexOfItem(B.options.replaceItem);V!==-1&&(B.options.index=V),v.world.removeItem(B.options.replaceItem)}z=new e.TiledImage({viewer:v,source:B.tileSource,viewport:v.viewport,drawer:v.drawer,tileCache:v.tileCache,imageLoader:v.imageLoader,x:B.options.x,y:B.options.y,width:B.options.width,height:B.options.height,fitBounds:B.options.fitBounds,fitBoundsPlacement:B.options.fitBoundsPlacement,clip:B.options.clip,placeholderFillStyle:B.options.placeholderFillStyle,opacity:B.options.opacity,preload:B.options.preload,degrees:B.options.degrees,flipped:B.options.flipped,compositeOperation:B.options.compositeOperation,springStiffness:v.springStiffness,animationTime:v.animationTime,minZoomImageRatio:v.minZoomImageRatio,wrapHorizontal:v.wrapHorizontal,wrapVertical:v.wrapVertical,immediateRender:v.immediateRender,blendTime:v.blendTime,alwaysBlend:v.alwaysBlend,minPixelRatio:v.minPixelRatio,smoothTileEdgesMinZoom:v.smoothTileEdgesMinZoom,iOSDevice:v.iOSDevice,crossOriginPolicy:B.options.crossOriginPolicy,ajaxWithCredentials:B.options.ajaxWithCredentials,loadTilesWithAjax:B.options.loadTilesWithAjax,ajaxHeaders:B.options.ajaxHeaders,debugMode:v.debugMode}),v.collectionMode&&v.world.setAutoRefigureSizes(!1),v.navigator&&(N=e.extend({},B.options,{replace:!1,originalTiledImage:z,tileSource:B.tileSource}),v.navigator.addTiledImage(N)),v.world.addItem(z,{index:B.options.index}),v._loadQueue.length===0&&O(B),v.world.getItemCount()===1&&!v.preserveViewport&&v.viewport.goHome(!0),B.options.success&&B.options.success({item:z})}}u(this,c.tileSource,c,function(B){P.tileSource=B,M()},function(B){B.options=c,b(B),M()})},addSimpleImage:function(c){e.console.assert(c,"[Viewer.addSimpleImage] options is required"),e.console.assert(c.url,"[Viewer.addSimpleImage] options.url is required");var v=e.extend({},c,{tileSource:{type:"image",url:c.url}});delete v.url,this.addTiledImage(v)},addLayer:function(c){var v=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var P=e.extend({},c,{success:function(b){v.raiseEvent("add-layer",{options:c,drawer:b.item})},error:function(b){v.raiseEvent("add-layer-failed",b)}});return this.addTiledImage(P),this},getLayerAtLevel:function(c){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(c)},getLevelOfLayer:function(c){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(c)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(c,v){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(c,v)},removeLayer:function(c){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(c)},forceRedraw:function(){return i[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var c=e.delegate(this,E),v=e.delegate(this,C),P=e.delegate(this,this.goToNextPage),b=e.delegate(this,this.goToPreviousPage),O=this.navImages,M=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(M=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:X(this.prefixUrl,O.previous.REST),srcGroup:X(this.prefixUrl,O.previous.GROUP),srcHover:X(this.prefixUrl,O.previous.HOVER),srcDown:X(this.prefixUrl,O.previous.DOWN),onRelease:b,onFocus:c,onBlur:v}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:X(this.prefixUrl,O.next.REST),srcGroup:X(this.prefixUrl,O.next.GROUP),srcHover:X(this.prefixUrl,O.next.HOVER),srcDown:X(this.prefixUrl,O.next.DOWN),onRelease:P,onFocus:c,onBlur:v}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),M&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var c=e.delegate(this,Ee),v=e.delegate(this,Ce),P=e.delegate(this,Y),b=e.delegate(this,Ae),O=e.delegate(this,G),M=e.delegate(this,ve),B=e.delegate(this,ye),z=e.delegate(this,ce),N=e.delegate(this,le),V=e.delegate(this,S),I=e.delegate(this,E),Z=e.delegate(this,C),q=this.navImages,re=[],ge=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(ge=!1),this.showZoomControl&&(re.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:X(this.prefixUrl,q.zoomIn.REST),srcGroup:X(this.prefixUrl,q.zoomIn.GROUP),srcHover:X(this.prefixUrl,q.zoomIn.HOVER),srcDown:X(this.prefixUrl,q.zoomIn.DOWN),onPress:c,onRelease:v,onClick:P,onEnter:c,onExit:v,onFocus:I,onBlur:Z})),re.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:X(this.prefixUrl,q.zoomOut.REST),srcGroup:X(this.prefixUrl,q.zoomOut.GROUP),srcHover:X(this.prefixUrl,q.zoomOut.HOVER),srcDown:X(this.prefixUrl,q.zoomOut.DOWN),onPress:b,onRelease:v,onClick:O,onEnter:b,onExit:v,onFocus:I,onBlur:Z}))),this.showHomeControl&&re.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:X(this.prefixUrl,q.home.REST),srcGroup:X(this.prefixUrl,q.home.GROUP),srcHover:X(this.prefixUrl,q.home.HOVER),srcDown:X(this.prefixUrl,q.home.DOWN),onRelease:M,onFocus:I,onBlur:Z})),this.showFullPageControl&&re.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:X(this.prefixUrl,q.fullpage.REST),srcGroup:X(this.prefixUrl,q.fullpage.GROUP),srcHover:X(this.prefixUrl,q.fullpage.HOVER),srcDown:X(this.prefixUrl,q.fullpage.DOWN),onRelease:B,onFocus:I,onBlur:Z})),this.showRotationControl&&(re.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:X(this.prefixUrl,q.rotateleft.REST),srcGroup:X(this.prefixUrl,q.rotateleft.GROUP),srcHover:X(this.prefixUrl,q.rotateleft.HOVER),srcDown:X(this.prefixUrl,q.rotateleft.DOWN),onRelease:z,onFocus:I,onBlur:Z})),re.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:X(this.prefixUrl,q.rotateright.REST),srcGroup:X(this.prefixUrl,q.rotateright.GROUP),srcHover:X(this.prefixUrl,q.rotateright.HOVER),srcDown:X(this.prefixUrl,q.rotateright.DOWN),onRelease:N,onFocus:I,onBlur:Z}))),this.showFlipControl&&re.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:X(this.prefixUrl,q.flip.REST),srcGroup:X(this.prefixUrl,q.flip.GROUP),srcHover:X(this.prefixUrl,q.flip.HOVER),srcDown:X(this.prefixUrl,q.flip.DOWN),onRelease:V,onFocus:I,onBlur:Z})),ge?(this.buttonGroup=new e.ButtonGroup({buttons:re,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,$)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=re),this},currentPage:function(){return this._sequenceIndex},goToPage:function(c){return this.tileSources&&c>=0&&c<this.tileSources.length&&(this._sequenceIndex=c,this._updateSequenceButtons(c),this.open(this.tileSources[c]),this.referenceStrip&&this.referenceStrip.setFocus(c),this.raiseEvent("page",{page:c})),this},addOverlay:function(c,v,P,b){var O;if(e.isPlainObject(c)?O=c:O={element:c,location:v,placement:P,onDraw:b},c=e.getElement(O.element),o(this.currentOverlays,c)>=0)return this;var M=l(this,O);return this.currentOverlays.push(M),M.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:c,location:O.location,placement:O.placement}),this},updateOverlay:function(c,v,P){var b;return c=e.getElement(c),b=o(this.currentOverlays,c),b>=0&&(this.currentOverlays[b].update(v,P),i[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:c,location:v,placement:P})),this},removeOverlay:function(c){var v;return c=e.getElement(c),v=o(this.currentOverlays,c),v>=0&&(this.currentOverlays[v].destroy(),this.currentOverlays.splice(v,1),i[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:c})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return i[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(c){var v;return c=e.getElement(c),v=o(this.currentOverlays,c),v>=0?this.currentOverlays[v]:null},_updateSequenceButtons:function(c){this.nextButton&&(!this.tileSources||this.tileSources.length-1===c?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(c>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(c){this._hideMessage();var v=e.makeNeutralElement("div");v.appendChild(document.createTextNode(c)),this.messageDiv=e.makeCenteredNode(v),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var c=this.messageDiv;c&&(c.parentNode.removeChild(c),delete this.messageDiv)},gestureSettingsByDeviceType:function(c){switch(c){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var c,v=this.currentOverlays.length;for(c=0;c<v;c++)this.currentOverlays[c].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var c=e.pixelDensityRatio,v=e.getCurrentPixelDensityRatio();c!==v&&(e.pixelDensityRatio=v,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var c=this._sequenceIndex-1;this.navPrevNextWrap&&c<0&&(c+=this.tileSources.length),this.goToPage(c)},goToNextPage:function(){var c=this._sequenceIndex+1;this.navPrevNextWrap&&c>=this.tileSources.length&&(c=0),this.goToPage(c)}});function s(c){return c=e.getElement(c),new e.Point(c.clientWidth===0?1:c.clientWidth,c.clientHeight===0?1:c.clientHeight)}function u(c,v,P,b,O){var M=c;if(e.type(v)==="string"){if(v.match(/^\s*<.*>\s*$/))v=e.parseXml(v);else if(v.match(/^\s*[{[].*[}\]]\s*$/))try{var B=e.parseJSON(v);v=B}catch{}}function z(N,V){N.ready?b(N):(N.addHandler("ready",function(){b(N)}),N.addHandler("open-failed",function(I){O({message:I.message,source:V})}))}setTimeout(function(){if(e.type(v)==="string")v=new e.TileSource({url:v,crossOriginPolicy:P.crossOriginPolicy!==void 0?P.crossOriginPolicy:c.crossOriginPolicy,ajaxWithCredentials:c.ajaxWithCredentials,ajaxHeaders:P.ajaxHeaders?P.ajaxHeaders:c.ajaxHeaders,useCanvas:c.useCanvas,success:function(Z){b(Z.tileSource)}}),v.addHandler("open-failed",function(Z){O(Z)});else if(e.isPlainObject(v)||v.nodeType)if(v.crossOriginPolicy===void 0&&(P.crossOriginPolicy!==void 0||c.crossOriginPolicy!==void 0)&&(v.crossOriginPolicy=P.crossOriginPolicy!==void 0?P.crossOriginPolicy:c.crossOriginPolicy),v.ajaxWithCredentials===void 0&&(v.ajaxWithCredentials=c.ajaxWithCredentials),v.useCanvas===void 0&&(v.useCanvas=c.useCanvas),e.isFunction(v.getTileUrl)){var N=new e.TileSource(v);N.getTileUrl=v.getTileUrl,b(N)}else{var V=e.TileSource.determineType(M,v);if(!V){O({message:"Unable to load TileSource",source:v});return}var I=V.prototype.configure.apply(M,[v]);z(new V(I),v)}else z(v,v)})}function l(c,v){if(v instanceof e.Overlay)return v;var P=null;if(v.element)P=e.getElement(v.element);else{var b=v.id?v.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);P=e.getElement(v.id),P||(P=document.createElement("a"),P.href="#/overlay/"+b),P.id=b,e.addClass(P,v.className?v.className:"openseadragon-overlay")}var O=v.location,M=v.width,B=v.height;if(!O){var z=v.x,N=v.y;if(v.px!==void 0){var V=c.viewport.imageToViewportRectangle(new e.Rect(v.px,v.py,M||0,B||0));z=V.x,N=V.y,M=M!==void 0?V.width:void 0,B=B!==void 0?V.height:void 0}O=new e.Point(z,N)}var I=v.placement;return I&&e.type(I)==="string"&&(I=e.Placement[v.placement.toUpperCase()]),new e.Overlay({element:P,location:O,placement:I,onDraw:v.onDraw,checkResize:v.checkResize,width:M,height:B,rotationMode:v.rotationMode})}function o(c,v){var P;for(P=c.length-1;P>=0;P--)if(c[P].element===v)return P;return-1}function a(c,v){return e.requestAnimationFrame(function(){v(c)})}function h(c){e.requestAnimationFrame(function(){d(c)})}function p(c){!c.autoHideControls||(c.controlsShouldFade=!0,c.controlsFadeBeginTime=e.now()+c.controlsFadeDelay,window.setTimeout(function(){h(c)},c.controlsFadeDelay))}function d(c){var v,P,b,O;if(c.controlsShouldFade){for(v=e.now(),P=v-c.controlsFadeBeginTime,b=1-P/c.controlsFadeLength,b=Math.min(1,b),b=Math.max(0,b),O=c.controls.length-1;O>=0;O--)c.controls[O].autoFade&&c.controls[O].setOpacity(b);b>0&&h(c)}}function T(c){var v;for(c.controlsShouldFade=!1,v=c.controls.length-1;v>=0;v--)c.controls[v].setOpacity(1)}function E(){T(this)}function C(){p(this)}function _(c){var v={tracker:c.eventSource,position:c.position,originalEvent:c.originalEvent,preventDefault:c.preventDefault};this.raiseEvent("canvas-contextmenu",v),c.preventDefault=v.preventDefault}function R(c){var v={originalEvent:c.originalEvent,preventDefaultAction:!1,preventVerticalPan:c.preventVerticalPan,preventHorizontalPan:c.preventHorizontalPan};if(this.raiseEvent("canvas-key",v),!v.preventDefaultAction&&!c.ctrl&&!c.alt&&!c.meta)switch(c.keyCode){case 38:v.preventVerticalPan||(c.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),c.preventDefault=!0;break;case 40:v.preventVerticalPan||(c.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),c.preventDefault=!0;break;case 37:v.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),c.preventDefault=!0;break;case 39:v.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),c.preventDefault=!0;break;default:c.preventDefault=!1;break}else c.preventDefault=!1}function f(c){var v={originalEvent:c.originalEvent,preventDefaultAction:!1,preventVerticalPan:c.preventVerticalPan,preventHorizontalPan:c.preventHorizontalPan};if(this.raiseEvent("canvas-key",v),!v.preventDefaultAction&&!c.ctrl&&!c.alt&&!c.meta)switch(c.keyCode){case 43:case 61:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),c.preventDefault=!0;break;case 45:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),c.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),c.preventDefault=!0;break;case 119:case 87:v.preventVerticalPan||(c.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),c.preventDefault=!0;break;case 115:case 83:v.preventVerticalPan||(c.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),c.preventDefault=!0;break;case 97:v.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),c.preventDefault=!0;break;case 100:v.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),c.preventDefault=!0;break;case 114:this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),c.preventDefault=!0;break;case 82:this.viewport.flipped?this.viewport.setRotation(e.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(e.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),c.preventDefault=!0;break;case 102:this.viewport.toggleFlip(),c.preventDefault=!0;break;case 106:this.goToPreviousPage();break;case 107:this.goToNextPage();break;default:c.preventDefault=!1;break}else c.preventDefault=!1}function x(c){var v,P=document.activeElement===this.canvas;P||this.canvas.focus(),this.viewport.flipped&&(c.position.x=this.viewport.getContainerSize().x-c.position.x);var b={tracker:c.eventSource,position:c.position,quick:c.quick,shift:c.shift,originalEvent:c.originalEvent,originalTarget:c.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",b),!b.preventDefaultAction&&this.viewport&&c.quick&&(v=this.gestureSettingsByDeviceType(c.pointerType),v.clickToZoom&&(this.viewport.zoomBy(c.shift?1/this.zoomPerClick:this.zoomPerClick,v.zoomToRefPoint?this.viewport.pointFromPixel(c.position,!0):null),this.viewport.applyConstraints()))}function D(c){var v,P={tracker:c.eventSource,position:c.position,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",P),!P.preventDefaultAction&&this.viewport&&(v=this.gestureSettingsByDeviceType(c.pointerType),v.dblClickToZoom&&(this.viewport.zoomBy(c.shift?1/this.zoomPerClick:this.zoomPerClick,v.zoomToRefPoint?this.viewport.pointFromPixel(c.position,!0):null),this.viewport.applyConstraints()))}function H(c){var v,P={tracker:c.eventSource,pointerType:c.pointerType,position:c.position,delta:c.delta,speed:c.speed,direction:c.direction,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",P),v=this.gestureSettingsByDeviceType(c.pointerType),v.dragToPan&&!P.preventDefaultAction&&this.viewport){if(this.panHorizontal||(c.delta.x=0),this.panVertical||(c.delta.y=0),this.viewport.flipped&&(c.delta.x=-c.delta.x),this.constrainDuringPan){var b=this.viewport.deltaPointsFromPixels(c.delta.negate());this.viewport.centerSpringX.target.value+=b.x,this.viewport.centerSpringY.target.value+=b.y;var O=this.viewport.getBounds(),M=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=b.x,this.viewport.centerSpringY.target.value-=b.y,O.x!==M.x&&(c.delta.x=0),O.y!==M.y&&(c.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(c.delta.negate()),v.flickEnabled&&!this.constrainDuringPan)}}function A(c){var v={tracker:c.eventSource,pointerType:c.pointerType,position:c.position,speed:c.speed,direction:c.direction,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",v),!v.preventDefaultAction&&this.viewport){var P=this.gestureSettingsByDeviceType(c.pointerType);if(P.flickEnabled&&c.speed>=P.flickMinSpeed){var b=0;this.panHorizontal&&(b=P.flickMomentum*c.speed*Math.cos(c.direction));var O=0;this.panVertical&&(O=P.flickMomentum*c.speed*Math.sin(c.direction));var M=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),B=this.viewport.pointFromPixel(new e.Point(M.x-b,M.y-O));this.viewport.panTo(B,!1)}this.viewport.applyConstraints()}}function L(c){this.raiseEvent("canvas-enter",{tracker:c.eventSource,pointerType:c.pointerType,position:c.position,buttons:c.buttons,pointers:c.pointers,insideElementPressed:c.insideElementPressed,buttonDownAny:c.buttonDownAny,originalEvent:c.originalEvent})}function W(c){this.raiseEvent("canvas-exit",{tracker:c.eventSource,pointerType:c.pointerType,position:c.position,buttons:c.buttons,pointers:c.pointers,insideElementPressed:c.insideElementPressed,buttonDownAny:c.buttonDownAny,originalEvent:c.originalEvent})}function j(c){this.raiseEvent("canvas-press",{tracker:c.eventSource,pointerType:c.pointerType,position:c.position,insideElementPressed:c.insideElementPressed,insideElementReleased:c.insideElementReleased,originalEvent:c.originalEvent})}function J(c){this.raiseEvent("canvas-release",{tracker:c.eventSource,pointerType:c.pointerType,position:c.position,insideElementPressed:c.insideElementPressed,insideElementReleased:c.insideElementReleased,originalEvent:c.originalEvent})}function ee(c){this.raiseEvent("canvas-nonprimary-press",{tracker:c.eventSource,position:c.position,pointerType:c.pointerType,button:c.button,buttons:c.buttons,originalEvent:c.originalEvent})}function K(c){this.raiseEvent("canvas-nonprimary-release",{tracker:c.eventSource,position:c.position,pointerType:c.pointerType,button:c.button,buttons:c.buttons,originalEvent:c.originalEvent})}function ae(c){var v,P,b,O,M={tracker:c.eventSource,pointerType:c.pointerType,gesturePoints:c.gesturePoints,lastCenter:c.lastCenter,center:c.center,lastDistance:c.lastDistance,distance:c.distance,shift:c.shift,originalEvent:c.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",M),this.viewport&&(v=this.gestureSettingsByDeviceType(c.pointerType),v.pinchToZoom&&(!M.preventDefaultPanAction||!M.preventDefaultZoomAction)&&(P=this.viewport.pointFromPixel(c.center,!0),M.preventDefaultZoomAction||this.viewport.zoomBy(c.distance/c.lastDistance,P,!0),v.zoomToRefPoint&&!M.preventDefaultPanAction&&(b=this.viewport.pointFromPixel(c.lastCenter,!0),O=b.minus(P),this.panHorizontal||(O.x=0),this.panVertical||(O.y=0),this.viewport.panBy(O,!0)),this.viewport.applyConstraints()),v.pinchRotate&&!M.preventDefaultRotateAction)){var B=Math.atan2(c.gesturePoints[0].currentPos.y-c.gesturePoints[1].currentPos.y,c.gesturePoints[0].currentPos.x-c.gesturePoints[1].currentPos.x),z=Math.atan2(c.gesturePoints[0].lastPos.y-c.gesturePoints[1].lastPos.y,c.gesturePoints[0].lastPos.x-c.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(B-z)*(180/Math.PI))}}function oe(c){var v,P,b,O,M;O=e.now(),M=O-this._lastScrollTime,M>this.minScrollDeltaTime?(this._lastScrollTime=O,v={tracker:c.eventSource,position:c.position,scroll:c.scroll,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",v),!v.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(c.position.x=this.viewport.getContainerSize().x-c.position.x),P=this.gestureSettingsByDeviceType(c.pointerType),P.scrollToZoom&&(b=Math.pow(this.zoomPerScroll,c.scroll),this.viewport.zoomBy(b,P.zoomToRefPoint?this.viewport.pointFromPixel(c.position,!0):null),this.viewport.applyConstraints())),c.preventDefault=v.preventDefault):c.preventDefault=!0}function de(c){i[this.hash].mouseInside=!0,T(this),this.raiseEvent("container-enter",{tracker:c.eventSource,pointerType:c.pointerType,position:c.position,buttons:c.buttons,pointers:c.pointers,insideElementPressed:c.insideElementPressed,buttonDownAny:c.buttonDownAny,originalEvent:c.originalEvent})}function se(c){c.pointers<1&&(i[this.hash].mouseInside=!1,i[this.hash].animating||p(this)),this.raiseEvent("container-exit",{tracker:c.eventSource,pointerType:c.pointerType,position:c.position,buttons:c.buttons,pointers:c.pointers,insideElementPressed:c.insideElementPressed,buttonDownAny:c.buttonDownAny,originalEvent:c.originalEvent})}function ne(c){te(c),c.isOpen()?c._updateRequestId=a(c,ne):c._updateRequestId=!1}function te(c){if(!(c._opening||!i[c.hash])){if(c.autoResize){var v=s(c.container),P=i[c.hash].prevContainerSize;if(!v.equals(P)){var b=c.viewport;if(c.preserveImageSizeOnResize){var O=P.x/v.x,M=b.getZoom()*O,B=b.getCenter();b.resize(v,!1),b.zoomTo(M,null,!0),b.panTo(B,!0)}else{var z=b.getBounds();b.resize(v,!0),b.fitBoundsWithConstraints(z,!0)}i[c.hash].prevContainerSize=v,i[c.hash].forceRedraw=!0}}var N=c.viewport.update(),V=c.world.update()||N;N&&c.raiseEvent("viewport-change"),c.referenceStrip&&(V=c.referenceStrip.update(c.viewport)||V),!i[c.hash].animating&&V&&(c.raiseEvent("animation-start"),T(c)),(V||i[c.hash].forceRedraw||c.world.needsDraw())&&(pe(c),c._drawOverlays(),c.navigator&&c.navigator.update(c.viewport),i[c.hash].forceRedraw=!1,V&&c.raiseEvent("animation")),i[c.hash].animating&&!V&&(c.raiseEvent("animation-finish"),i[c.hash].mouseInside||p(c)),i[c.hash].animating=V}}function pe(c){c.imageLoader.clear(),c.drawer.clear(),c.world.draw(),c.raiseEvent("update-viewport",{})}function X(c,v){return c?c+v:v}function Ee(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=this.zoomPerSecond,i[this.hash].zooming=!0,Ve(this)}function Ae(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=1/this.zoomPerSecond,i[this.hash].zooming=!0,Ve(this)}function Ce(){i[this.hash].zooming=!1}function Ve(c){e.requestAnimationFrame(e.delegate(c,k))}function k(){var c,v,P;i[this.hash].zooming&&this.viewport&&(c=e.now(),v=c-i[this.hash].lastZoomTime,P=Math.pow(i[this.hash].zoomFactor,v/1e3),this.viewport.zoomBy(P),this.viewport.applyConstraints(),i[this.hash].lastZoomTime=c,Ve(this))}function Y(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function G(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function $(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function ve(){this.viewport&&this.viewport.goHome()}function ye(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function ce(){if(this.viewport){var c=this.viewport.getRotation();this.viewport.flipped?c=e.positiveModulo(c+this.rotationIncrement,360):c=e.positiveModulo(c-this.rotationIncrement,360),this.viewport.setRotation(c)}}function le(){if(this.viewport){var c=this.viewport.getRotation();this.viewport.flipped?c=e.positiveModulo(c-this.rotationIncrement,360):c=e.positiveModulo(c+this.rotationIncrement,360),this.viewport.setRotation(c)}}function S(){this.viewport.toggleFlip()}}(r),function(e){e.Navigator=function(a){var h=a.viewer,p=this,d,T;a.id?(this.element=document.getElementById(a.id),a.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(a.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),a.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:a.autoFade},a.position&&(a.position==="BOTTOM_RIGHT"?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:a.position==="BOTTOM_LEFT"?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:a.position==="TOP_RIGHT"?a.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:a.position==="TOP_LEFT"?a.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:a.position==="ABSOLUTE"&&(a.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,a.controlOptions.top=a.top,a.controlOptions.left=a.left,a.controlOptions.height=a.height,a.controlOptions.width=a.width))),this.element.id=a.id,this.element.className+=" navigator",a=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},a,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:a.autoResize,minZoomImageRatio:1,background:a.background,opacity:a.opacity,borderColor:a.borderColor,displayRegionColor:a.displayRegionColor}),a.minPixelRatio=this.minPixelRatio=h.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),a.controlOptions.anchor!==e.ControlAnchor.NONE&&function(_,R){_.margin="0px",_.border=R+"px solid "+a.borderColor,_.padding="0px",_.background=a.background,_.opacity=a.opacity,_.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(_,R){_.position="relative",_.top="0px",_.left="0px",_.fontSize="0px",_.overflow="hidden",_.border=R+"px solid "+a.displayRegionColor,_.margin="0px",_.padding="0px",_.background="transparent",_.float="left",_.cssFloat="left",_.styleFloat="left",_.zIndex=999999999,_.cursor="default"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),h.addControl(this.element,a.controlOptions),this._resizeWithViewer=a.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&a.controlOptions.anchor!==e.ControlAnchor.NONE,a.width&&a.height?(this.setWidth(a.width),this.setHeight(a.height)):this._resizeWithViewer&&(d=e.getElementSize(h.element),this.element.style.height=Math.round(d.y*a.sizeRatio)+"px",this.element.style.width=Math.round(d.x*a.sizeRatio)+"px",this.oldViewerSize=d,T=e.getElementSize(this.element),this.elementArea=T.x*T.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[a]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function E(_){l(p.displayRegionContainer,_),l(p.displayRegion,-_),p.viewport.setRotation(_)}if(a.navigatorRotate){var C=a.viewer.viewport?a.viewer.viewport.getRotation():a.viewer.degrees||0;E(C),a.viewer.addHandler("rotate",function(_){E(_.degrees)})}this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,n),clickHandler:e.delegate(this,i),releaseHandler:e.delegate(this,s),scrollHandler:e.delegate(this,u),preProcessEventHandler:function(_){_.eventType==="wheel"&&(_.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){p.viewport&&p.viewport.goHome(!0)}),h.world.addHandler("item-index-change",function(_){window.setTimeout(function(){var R=p.world.getItemAt(_.previousIndex);p.world.setItemIndex(R,_.newIndex)},1)}),h.world.addHandler("remove-item",function(_){var R=_.item,f=p._getMatchingItem(R);f&&p.world.removeItem(f)}),this.update(h.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var a=new e.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);a.equals(this.oldContainerSize)||(this.viewport.resize(a,!0),this.viewport.goHome(!0),this.oldContainerSize=a,this.drawer.clear(),this.world.draw())}},setWidth:function(a){this.width=a,this.element.style.width=typeof a=="number"?a+"px":a,this._resizeWithViewer=!1},setHeight:function(a){this.height=a,this.element.style.height=typeof a=="number"?a+"px":a,this._resizeWithViewer=!1},setFlip:function(a){return this.viewport.setFlip(a),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(a){o(this.displayRegion,a),o(this.canvas,a),o(this.element,a)},update:function(a){var h,p,d,T,E,C;if(h=e.getElementSize(this.viewer.element),this._resizeWithViewer&&h.x&&h.y&&!h.equals(this.oldViewerSize)&&(this.oldViewerSize=h,this.maintainSizeRatio||!this.elementArea?(p=h.x*this.sizeRatio,d=h.y*this.sizeRatio):(p=Math.sqrt(this.elementArea*(h.x/h.y)),d=this.elementArea/p),this.element.style.width=Math.round(p)+"px",this.element.style.height=Math.round(d)+"px",this.elementArea||(this.elementArea=p*d),this.updateSize()),a&&this.viewport){T=a.getBoundsNoRotate(!0),E=this.viewport.pixelFromPointNoRotate(T.getTopLeft(),!1),C=this.viewport.pixelFromPointNoRotate(T.getBottomRight(),!1).minus(this.totalBorderWidths);var _=this.displayRegion.style;_.display=this.world.getItemCount()?"block":"none",_.top=Math.round(E.y)+"px",_.left=Math.round(E.x)+"px";var R=Math.abs(E.x-C.x),f=Math.abs(E.y-C.y);_.width=Math.round(Math.max(R,0))+"px",_.height=Math.round(Math.max(f,0))+"px"}},addTiledImage:function(a){var h=this,p=a.originalTiledImage;delete a.original;var d=e.extend({},a,{success:function(T){var E=T.item;E._originalForNavigator=p,h._matchBounds(E,p,!0),h._matchOpacity(E,p),h._matchCompositeOperation(E,p);function C(){h._matchBounds(E,p)}function _(){h._matchOpacity(E,p)}function R(){h._matchCompositeOperation(E,p)}p.addHandler("bounds-change",C),p.addHandler("clip-change",C),p.addHandler("opacity-change",_),p.addHandler("composite-operation-change",R)}});return e.Viewer.prototype.addTiledImage.apply(this,[d])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(a){for(var h=this.world.getItemCount(),p,d=0;d<h;d++)if(p=this.world.getItemAt(d),p._originalForNavigator===a)return p;return null},_matchBounds:function(a,h,p){var d=h.getBoundsNoRotate();a.setPosition(d.getTopLeft(),p),a.setWidth(d.width,p),a.setRotation(h.getRotation(),p),a.setClip(h.getClip()),a.setFlip(h.getFlip())},_matchOpacity:function(a,h){a.setOpacity(h.opacity)},_matchCompositeOperation:function(a,h){a.setCompositeOperation(h.compositeOperation)}});function i(a){var h={tracker:a.eventSource,position:a.position,quick:a.quick,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",h),!h.preventDefaultAction&&a.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(a.position.x=this.viewport.getContainerSize().x-a.position.x);var p=this.viewport.pointFromPixel(a.position);this.panVertical?this.panHorizontal||(p.x=this.viewer.viewport.getCenter(!0).x):p.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(p),this.viewer.viewport.applyConstraints()}}function n(a){var h={tracker:a.eventSource,position:a.position,delta:a.delta,speed:a.speed,direction:a.direction,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",h),!h.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(a.delta.x=0),this.panVertical||(a.delta.y=0),this.viewer.viewport.flipped&&(a.delta.x=-a.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(a.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function s(a){a.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function u(a){var h={tracker:a.eventSource,position:a.position,scroll:a.scroll,shift:a.shift,originalEvent:a.originalEvent,preventDefault:a.preventDefault};this.viewer.raiseEvent("navigator-scroll",h),a.preventDefault=h.preventDefault}function l(a,h){o(a,"rotate("+h+"deg)")}function o(a,h){a.style.webkitTransform=h,a.style.mozTransform=h,a.style.msTransform=h,a.style.oTransform=h,a.style.transform=h}}(r),function(e){var i={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(n){var s=n.split("."),u=null,l=arguments,o=i,a;for(a=0;a<s.length-1;a++)o=o[s[a]]||{};return u=o[s[a]],typeof u!="string"&&(e.console.log("Untranslated source string:",n),u=""),u.replace(/\{\d+\}/g,function(h){var p=parseInt(h.match(/\d+/),10)+1;return p<l.length?l[p]:""})},setString:function(n,s){var u=n.split("."),l=i,o;for(o=0;o<u.length-1;o++)l[u[o]]||(l[u[o]]={}),l=l[u[o]];l[u[o]]=s}})}(r),function(e){e.Point=function(i,n){this.x=typeof i=="number"?i:0,this.y=typeof n=="number"?n:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(i){return new e.Point(this.x+i.x,this.y+i.y)},minus:function(i){return new e.Point(this.x-i.x,this.y-i.y)},times:function(i){return new e.Point(this.x*i,this.y*i)},divide:function(i){return new e.Point(this.x/i,this.y/i)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(i){return Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))},squaredDistanceTo:function(i){return Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)},apply:function(i){return new e.Point(i(this.x),i(this.y))},equals:function(i){return i instanceof e.Point&&this.x===i.x&&this.y===i.y},rotate:function(i,n){n=n||new e.Point(0,0);var s,u;if(i%90==0){var l=e.positiveModulo(i,360);switch(l){case 0:s=1,u=0;break;case 90:s=0,u=1;break;case 180:s=-1,u=0;break;case 270:s=0,u=-1;break}}else{var o=i*Math.PI/180;s=Math.cos(o),u=Math.sin(o)}var a=s*(this.x-n.x)-u*(this.y-n.y)+n.x,h=u*(this.x-n.x)+s*(this.y-n.y)+n.y;return new e.Point(a,h)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(r),function(e){e.TileSource=function(n,s,u,l,o,a){var h=this,p=arguments,d,T;if(e.isPlainObject(n)?d=n:d={width:p[0],height:p[1],tileSize:p[2],tileOverlap:p[3],minLevel:p[4],maxLevel:p[5]},e.EventSource.call(this),e.extend(!0,this,d),!this.success){for(T=0;T<arguments.length;T++)if(e.isFunction(arguments[T])){this.success=arguments[T];break}}this.success&&this.addHandler("ready",function(E){h.success(E)}),e.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=d.width&&d.height?d.width/d.height:1,this.dimensions=new e.Point(d.width,d.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=d.tileOverlap?d.tileOverlap:0,this.minLevel=d.minLevel?d.minLevel:0,this.maxLevel=d.maxLevel!==void 0&&d.maxLevel!==null?d.maxLevel:d.width&&d.height?Math.ceil(Math.log(Math.max(d.width,d.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(n){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(n){return this._tileWidth?this._tileWidth:this.getTileSize(n)},getTileHeight:function(n){return this._tileHeight?this._tileHeight:this.getTileSize(n)},setMaxLevel:function(n){this.maxLevel=n,this._memoizeLevelScale()},getLevelScale:function(n){return this._memoizeLevelScale(),this.getLevelScale(n)},_memoizeLevelScale:function(){var n={},s;for(s=0;s<=this.maxLevel;s++)n[s]=1/Math.pow(2,this.maxLevel-s);this.getLevelScale=function(u){return n[u]}},getNumTiles:function(n){var s=this.getLevelScale(n),u=Math.ceil(s*this.dimensions.x/this.getTileWidth(n)),l=Math.ceil(s*this.dimensions.y/this.getTileHeight(n));return new e.Point(u,l)},getPixelRatio:function(n){var s=this.dimensions.times(this.getLevelScale(n)),u=1/s.x*e.pixelDensityRatio,l=1/s.y*e.pixelDensityRatio;return new e.Point(u,l)},getClosestLevel:function(){var n,s;for(n=this.minLevel+1;n<=this.maxLevel&&(s=this.getNumTiles(n),!(s.x>1||s.y>1));n++);return n-1},getTileAtPoint:function(n,s){var u=s.x>=0&&s.x<=1&&s.y>=0&&s.y<=1/this.aspectRatio;e.console.assert(u,"[TileSource.getTileAtPoint] must be called with a valid point.");var l=this.dimensions.x*this.getLevelScale(n),o=s.x*l,a=s.y*l,h=Math.floor(o/this.getTileWidth(n)),p=Math.floor(a/this.getTileHeight(n));s.x>=1&&(h=this.getNumTiles(n).x-1);var d=1e-15;return s.y>=1/this.aspectRatio-d&&(p=this.getNumTiles(n).y-1),new e.Point(h,p)},getTileBounds:function(n,s,u,l){var o=this.dimensions.times(this.getLevelScale(n)),a=this.getTileWidth(n),h=this.getTileHeight(n),p=s===0?0:a*s-this.tileOverlap,d=u===0?0:h*u-this.tileOverlap,T=a+(s===0?1:2)*this.tileOverlap,E=h+(u===0?1:2)*this.tileOverlap,C=1/o.x;return T=Math.min(T,o.x-p),E=Math.min(E,o.y-d),l?new e.Rect(0,0,T,E):new e.Rect(p*C,d*C,T*C,E*C)},getImageInfo:function(n){var s=this,u,l,o,a,h,p,d;n&&(h=n.split("/"),p=h[h.length-1],d=p.lastIndexOf("."),d>-1&&(h[h.length-1]=p.slice(0,d))),l=function(T){typeof T=="string"&&(T=e.parseXml(T));var E=e.TileSource.determineType(s,T,n);if(!E){s.raiseEvent("open-failed",{message:"Unable to load TileSource",source:n});return}a=E.prototype.configure.apply(s,[T,n]),a.ajaxWithCredentials===void 0&&(a.ajaxWithCredentials=s.ajaxWithCredentials),o=new E(a),s.ready=!0,s.raiseEvent("ready",{tileSource:o})},n.match(/\.js$/)?(u=n.split("/").pop().replace(".js",""),e.jsonp({url:n,async:!1,callbackName:u,callback:l})):e.makeAjaxRequest({url:n,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(T){var E=i(T);l(E)},error:function(T,E){var C;try{C="HTTP "+T.status+" attempting to load TileSource"}catch{var _;typeof E=="undefined"||!E.toString?_="Unknown error":_=E.toString(),C=_+" attempting to load TileSource"}s.raiseEvent("open-failed",{message:C,source:n})}})},supports:function(n,s){return!1},configure:function(n,s){throw new Error("Method not implemented.")},getTileUrl:function(n,s,u){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(n,s,u){return{}},tileExists:function(n,s,u){var l=this.getNumTiles(n);return n>=this.minLevel&&n<=this.maxLevel&&s>=0&&u>=0&&s<l.x&&u<l.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype);function i(n){var s=n.responseText,u=n.status,l,o;if(n){if(n.status!==200&&n.status!==0)throw u=n.status,l=u===404?"Not Found":n.statusText,new Error(e.getString("Errors.Status",u,l))}else throw new Error(e.getString("Errors.Security"));if(s.match(/\s*<.*/))try{o=n.responseXML&&n.responseXML.documentElement?n.responseXML:e.parseXml(s)}catch{o=n.responseText}else if(s.match(/\s*[{[].*/))try{o=e.parseJSON(s)}catch{o=s}else o=s;return o}e.TileSource.determineType=function(n,s,u){var l;for(l in r)if(l.match(/.+TileSource$/)&&e.isFunction(r[l])&&e.isFunction(r[l].prototype.supports)&&r[l].prototype.supports.call(n,s,u))return r[l];return e.console.error("No TileSource was able to open %s %s",u,s),null}}(r),function(e){e.DziTileSource=function(s,u,l,o,a,h,p,d,T){var E,C,_,R;if(e.isPlainObject(s)?R=s:R={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=R.tilesUrl,this.fileFormat=R.fileFormat,this.displayRects=R.displayRects,this.displayRects)for(E=this.displayRects.length-1;E>=0;E--)for(C=this.displayRects[E],_=C.minLevel;_<=C.maxLevel;_++)this._levelRects[_]||(this._levelRects[_]=[]),this._levelRects[_].push(C);e.TileSource.apply(this,[R])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(s,u){var l;return s.Image?l=s.Image.xmlns:s.documentElement&&(s.documentElement.localName==="Image"||s.documentElement.tagName==="Image")&&(l=s.documentElement.namespaceURI),l=(l||"").toLowerCase(),l.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||l.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(s,u){var l;return e.isPlainObject(s)?l=n(this,s):l=i(this,s),u&&!l.tilesUrl&&(l.tilesUrl=u.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),u.search(/\.(dzi|xml|js)\?/)!==-1?l.queryParams=u.match(/\?.*/):l.queryParams=""),l},getTileUrl:function(s,u,l){return[this.tilesUrl,s,"/",u,"_",l,".",this.fileFormat,this.queryParams].join("")},tileExists:function(s,u,l){var o=this._levelRects[s],a,h,p,d,T,E,C;if(this.minLevel&&s<this.minLevel||this.maxLevel&&s>this.maxLevel)return!1;if(!o||!o.length)return!0;for(C=o.length-1;C>=0;C--)if(a=o[C],!(s<a.minLevel||s>a.maxLevel)&&(h=this.getLevelScale(s),p=a.x*h,d=a.y*h,T=p+a.width*h,E=d+a.height*h,p=Math.floor(p/this._tileWidth),d=Math.floor(d/this._tileWidth),T=Math.ceil(T/this._tileWidth),E=Math.ceil(E/this._tileWidth),p<=u&&u<T&&d<=l&&l<E))return!0;return!1}});function i(s,u){if(!u||!u.documentElement)throw new Error(e.getString("Errors.Xml"));var l=u.documentElement,o=l.localName||l.tagName,a=u.documentElement.namespaceURI,h=null,p=[],d,T,E,C,_;if(o==="Image")try{if(C=l.getElementsByTagName("Size")[0],C===void 0&&(C=l.getElementsByTagNameNS(a,"Size")[0]),h={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:l.getAttribute("Url"),Format:l.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(l.getAttribute("Overlap"),10),TileSize:parseInt(l.getAttribute("TileSize"),10),Size:{Height:parseInt(C.getAttribute("Height"),10),Width:parseInt(C.getAttribute("Width"),10)}}},!e.imageFormatSupported(h.Image.Format))throw new Error(e.getString("Errors.ImageFormat",h.Image.Format.toUpperCase()));for(d=l.getElementsByTagName("DisplayRect"),d===void 0&&(d=l.getElementsByTagNameNS(a,"DisplayRect")[0]),_=0;_<d.length;_++)T=d[_],E=T.getElementsByTagName("Rect")[0],E===void 0&&(E=T.getElementsByTagNameNS(a,"Rect")[0]),p.push({Rect:{X:parseInt(E.getAttribute("X"),10),Y:parseInt(E.getAttribute("Y"),10),Width:parseInt(E.getAttribute("Width"),10),Height:parseInt(E.getAttribute("Height"),10),MinLevel:parseInt(T.getAttribute("MinLevel"),10),MaxLevel:parseInt(T.getAttribute("MaxLevel"),10)}});return p.length&&(h.Image.DisplayRect=p),n(s,h)}catch(x){throw x instanceof Error?x:new Error(e.getString("Errors.Dzi"))}else{if(o==="Collection")throw new Error(e.getString("Errors.Dzc"));if(o==="Error"){var R=l.getElementsByTagName("Message")[0],f=R.firstChild.nodeValue;throw new Error(f)}}throw new Error(e.getString("Errors.Dzi"))}function n(s,u){var l=u.Image,o=l.Url,a=l.Format,h=l.Size,p=l.DisplayRect||[],d=parseInt(h.Width,10),T=parseInt(h.Height,10),E=parseInt(l.TileSize,10),C=parseInt(l.Overlap,10),_=[],R,f;for(f=0;f<p.length;f++)R=p[f].Rect,_.push(new e.DisplayRect(parseInt(R.X,10),parseInt(R.Y,10),parseInt(R.Width,10),parseInt(R.Height,10),parseInt(R.MinLevel,10),parseInt(R.MaxLevel,10)));return e.extend(!0,{width:d,height:T,tileSize:E,tileOverlap:C,minLevel:null,maxLevel:null,tilesUrl:o,fileFormat:a,displayRects:_},u)}}(r),function(e){e.IIIFTileSource=function(l){if(e.extend(!0,this,l),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(l.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=l.version,this.tile_width&&this.tile_height)l.tileWidth=this.tile_width,l.tileHeight=this.tile_height;else if(this.tile_width)l.tileSize=this.tile_width;else if(this.tile_height)l.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)l.tileWidth=this.tiles[0].width,l.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var o=0;o<this.tiles.length;o++)for(var a=0;a<this.tiles[o].scaleFactors.length;a++){var h=this.tiles[o].scaleFactors[a];this.scale_factors.push(h),l.tileSizePerScaleFactor[h]={width:this.tiles[o].width,height:this.tiles[o].height||this.tiles[o].width}}}else if(i(l)){for(var p=Math.min(this.height,this.width),d=[256,512,1024],T=[],E=0;E<d.length;E++)d[E]<=p&&T.push(d[E]);T.length>0?l.tileSize=Math.max.apply(null,T):l.tileSize=p}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,l.levels=n(this),e.extend(!0,l,{width:l.levels[l.levels.length-1].width,height:l.levels[l.levels.length-1].height,tileSize:Math.max(l.height,l.width),tileOverlap:0,minLevel:0,maxLevel:l.levels.length-1}),this.levels=l.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!l.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)l.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));else{var C=Math.max.apply(null,this.scale_factors);l.maxLevel=Math.round(Math.log(C)*Math.LOG2E)}e.TileSource.apply(this,[l])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(l,o){return l.protocol&&l.protocol==="http://iiif.io/api/image"||l["@context"]&&(l["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||l["@context"]==="http://iiif.io/api/image/1/context.json")||l.profile&&l.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||l.identifier&&l.width&&l.height?!0:!!(l.documentElement&&l.documentElement.tagName==="info"&&l.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(l,o){if(e.isPlainObject(l)){if(!l["@context"])l["@context"]="http://iiif.io/api/image/1.0/context.json",l["@id"]=o.replace("/info.json",""),l.version=1;else{var h=l["@context"];if(Array.isArray(h)){for(var p=0;p<h.length;p++)if(typeof h[p]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(h[p])||h[p]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){h=h[p];break}}switch(h){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":l.version=1;break;case"http://iiif.io/api/image/2/context.json":l.version=2;break;case"http://iiif.io/api/image/3/context.json":l.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(!l["@id"]&&l.id&&(l["@id"]=l.id),l.preferredFormats){for(var d=0;d<l.preferredFormats.length;d++)if(r.imageFormatSupported(l.preferredFormats[d])){l.tileFormat=l.preferredFormats[d];break}}return l}else{var a=s(l);return a["@context"]="http://iiif.io/api/image/1.0/context.json",a["@id"]=o.replace("/info.xml",""),a.version=1,a}},getTileWidth:function(l){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,l);var o=Math.pow(2,this.maxLevel-l);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[o]?this.tileSizePerScaleFactor[o].width:this._tileWidth},getTileHeight:function(l){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,l);var o=Math.pow(2,this.maxLevel-l);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[o]?this.tileSizePerScaleFactor[o].height:this._tileHeight},getLevelScale:function(l){if(this.emulateLegacyImagePyramid){var o=NaN;return this.levels.length>0&&l>=this.minLevel&&l<=this.maxLevel&&(o=this.levels[l].width/this.levels[this.maxLevel].width),o}return e.TileSource.prototype.getLevelScale.call(this,l)},getNumTiles:function(l){if(this.emulateLegacyImagePyramid){var o=this.getLevelScale(l);return o?new e.Point(1,1):new e.Point(0,0)}return e.TileSource.prototype.getNumTiles.call(this,l)},getTileAtPoint:function(l,o){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,l,o)},getTileUrl:function(l,o,a){if(this.emulateLegacyImagePyramid){var h=null;return this.levels.length>0&&l>=this.minLevel&&l<=this.maxLevel&&(h=this.levels[l].url),h}var p="0",d=Math.pow(.5,this.maxLevel-l),T=Math.ceil(this.width*d),E=Math.ceil(this.height*d),C,_,R,f,x,D,H,A,L,W,j,J,ee,K;return C=this.getTileWidth(l),_=this.getTileHeight(l),R=Math.ceil(C/d),f=Math.ceil(_/d),this.version===1?ee="native."+this.tileFormat:ee="default."+this.tileFormat,T<C&&E<_?(this.version===2&&T===this.width?W="full":this.version===3&&T===this.width&&E===this.height?W="max":this.version===3?W=T+","+E:W=T+",",x="full"):(D=o*R,H=a*f,A=Math.min(R,this.width-D),L=Math.min(f,this.height-H),o===0&&a===0&&A===this.width&&L===this.height?x="full":x=[D,H,A,L].join(","),j=Math.ceil(A*d),J=Math.ceil(L*d),this.version===2&&j===this.width?W="full":this.version===3&&j===this.width&&J===this.height?W="max":this.version===3?W=j+","+J:W=j+","),K=[this["@id"],x,W,p,ee].join("/"),K},__testonly__:{canBeTiled:i,constructLevels:n}});function i(l){var o=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],a=Array.isArray(l.profile)?l.profile[0]:l.profile,h=o.indexOf(a)!==-1,p=!1;return l.version===2&&l.profile.length>1&&l.profile[1].supports&&(p=l.profile[1].supports.indexOf("sizeByW")!==-1),l.version===3&&l.extraFeatures&&(p=l.extraFeatures.indexOf("sizeByWh")!==-1),!h||p}function n(l){for(var o=[],a=0;a<l.sizes.length;a++)o.push({url:l["@id"]+"/full/"+l.sizes[a].width+","+(l.version===3?l.sizes[a].height:"")+"/0/default."+l.tileFormat,width:l.sizes[a].width,height:l.sizes[a].height});return o.sort(function(h,p){return h.width-p.width})}function s(l){if(!l||!l.documentElement)throw new Error(e.getString("Errors.Xml"));var o=l.documentElement,a=o.tagName,h=null;if(a==="info")try{return h={},u(o,h),h}catch(p){throw p instanceof Error?p:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}function u(l,o,a){var h,p;if(l.nodeType===3&&a)p=l.nodeValue.trim(),p.match(/^\d*$/)&&(p=Number(p)),o[a]?(e.isArray(o[a])||(o[a]=[o[a]]),o[a].push(p)):o[a]=p;else if(l.nodeType===1)for(h=0;h<l.childNodes.length;h++)u(l.childNodes[h],o,l.nodeName)}}(r),function(e){e.OsmTileSource=function(i,n,s,u,l){var o;e.isPlainObject(i)?o=i:o={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!o.width||!o.height)&&(o.width=65572864,o.height=65572864),o.tileSize||(o.tileSize=256,o.tileOverlap=0),o.tilesUrl||(o.tilesUrl="http://tile.openstreetmap.org/"),o.minLevel=8,e.TileSource.apply(this,[o])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(i,n){return i.type&&i.type==="openstreetmaps"},configure:function(i,n){return i},getTileUrl:function(i,n,s){return this.tilesUrl+(i-8)+"/"+n+"/"+s+".png"}})}(r),function(e){e.TmsTileSource=function(i,n,s,u,l){var o;e.isPlainObject(i)?o=i:o={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a=Math.ceil(o.width/256)*256,h=Math.ceil(o.height/256)*256,p;a>h?p=a/256:p=h/256,o.maxLevel=Math.ceil(Math.log(p)/Math.log(2))-1,o.tileSize=256,o.width=a,o.height=h,e.TileSource.apply(this,[o])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(i,n){return i.type&&i.type==="tiledmapservice"},configure:function(i,n){return i},getTileUrl:function(i,n,s){var u=this.getNumTiles(i).y-1;return this.tilesUrl+i+"/"+n+"/"+(u-s)+".png"}})}(r),function(e){e.ZoomifyTileSource=function(i){typeof i.tileSize=="undefined"&&(i.tileSize=256),typeof i.fileFormat=="undefined"&&(i.fileFormat="jpg",this.fileFormat=i.fileFormat);var n={x:i.width,y:i.height};for(i.imageSizes=[{x:i.width,y:i.height}],i.gridSize=[this._getGridSize(i.width,i.height,i.tileSize)];parseInt(n.x,10)>i.tileSize||parseInt(n.y,10)>i.tileSize;)n.x=Math.floor(n.x/2),n.y=Math.floor(n.y/2),i.imageSizes.push({x:n.x,y:n.y}),i.gridSize.push(this._getGridSize(n.x,n.y,i.tileSize));i.imageSizes.reverse(),i.gridSize.reverse(),i.minLevel=0,i.maxLevel=i.gridSize.length-1,r.TileSource.apply(this,[i])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(i,n,s){return{x:Math.ceil(i/s),y:Math.ceil(n/s)}},_calculateAbsoluteTileNumber:function(i,n,s){for(var u=0,l={},o=0;o<i;o++)l=this.gridSize[o],u+=l.x*l.y;return l=this.gridSize[i],u+=l.x*s+n,u},supports:function(i,n){return i.type&&i.type==="zoomifytileservice"},configure:function(i,n){return i},getTileUrl:function(i,n,s){var u=0,l=this._calculateAbsoluteTileNumber(i,n,s);return u=Math.floor(l/256),this.tilesUrl+"TileGroup"+u+"/"+i+"-"+n+"-"+s+"."+this.fileFormat}})}(r),function(e){e.LegacyTileSource=function(u){var l,o,a;e.isArray(u)&&(l={type:"legacy-image-pyramid",levels:u}),l.levels=i(l.levels),l.levels.length>0?(o=l.levels[l.levels.length-1].width,a=l.levels[l.levels.length-1].height):(o=0,a=0,e.console.error("No supported image formats found")),e.extend(!0,l,{width:o,height:a,tileSize:Math.max(a,o),tileOverlap:0,minLevel:0,maxLevel:l.levels.length>0?l.levels.length-1:0}),e.TileSource.apply(this,[l]),this.levels=l.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(u,l){return u.type&&u.type==="legacy-image-pyramid"||u.documentElement&&u.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(u,l){var o;return e.isPlainObject(u)?o=s(this,u):o=n(this,u),o},getLevelScale:function(u){var l=NaN;return this.levels.length>0&&u>=this.minLevel&&u<=this.maxLevel&&(l=this.levels[u].width/this.levels[this.maxLevel].width),l},getNumTiles:function(u){var l=this.getLevelScale(u);return l?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(u,l,o){var a=null;return this.levels.length>0&&u>=this.minLevel&&u<=this.maxLevel&&(a=this.levels[u].url),a}});function i(u){var l=[],o,a;for(a=0;a<u.length;a++)o=u[a],o.height&&o.width&&o.url?l.push({url:o.url,width:Number(o.width),height:Number(o.height)}):e.console.error("Unsupported image format: %s",o.url?o.url:"<no URL>");return l.sort(function(h,p){return h.height-p.height})}function n(u,l){if(!l||!l.documentElement)throw new Error(e.getString("Errors.Xml"));var o=l.documentElement,a=o.tagName,h=null,p=[],d,T;if(a==="image")try{for(h={type:o.getAttribute("type"),levels:[]},p=o.getElementsByTagName("level"),T=0;T<p.length;T++)d=p[T],h.levels.push({url:d.getAttribute("url"),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10)});return s(u,h)}catch(E){throw E instanceof Error?E:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(a==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(a==="error")throw new Error("Error: "+l)}throw new Error("Unknown element "+a)}function s(u,l){return l.levels}}(r),function(e){e.ImageTileSource=function(i){i=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},i),e.TileSource.apply(this,[i])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(i,n){return i.type&&i.type==="image"},configure:function(i,n){return i},getImageInfo:function(i){var n=this._image=new Image,s=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),e.addEvent(n,"load",function(){s.width=n.naturalWidth,s.height=n.naturalHeight,s.aspectRatio=s.width/s.height,s.dimensions=new e.Point(s.width,s.height),s._tileWidth=s.width,s._tileHeight=s.height,s.tileOverlap=0,s.minLevel=0,s.levels=s._buildLevels(),s.maxLevel=s.levels.length-1,s.ready=!0,s.raiseEvent("ready",{tileSource:s})}),e.addEvent(n,"error",function(){s.raiseEvent("open-failed",{message:"Error loading image at "+i,source:i})}),n.src=i},getLevelScale:function(i){var n=NaN;return i>=this.minLevel&&i<=this.maxLevel&&(n=this.levels[i].width/this.levels[this.maxLevel].width),n},getNumTiles:function(i){var n=this.getLevelScale(i);return n?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(i,n,s){var u=null;return i>=this.minLevel&&i<=this.maxLevel&&(u=this.levels[i].url),u},getContext2D:function(i,n,s){var u=null;return i>=this.minLevel&&i<=this.maxLevel&&(u=this.levels[i].context2D),u},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var i=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,i;var n=this._image.naturalWidth,s=this._image.naturalHeight,u=document.createElement("canvas"),l=u.getContext("2d");if(u.width=n,u.height=s,l.drawImage(this._image,0,0,n,s),i[0].context2D=l,delete this._image,e.isCanvasTainted(u))return i;for(;n>=2&&s>=2;){n=Math.floor(n/2),s=Math.floor(s/2);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=n,o.height=s,a.drawImage(u,0,0,n,s),i.splice(0,0,{context2D:a,width:n,height:s}),u=o,l=a}return i},_freeupCanvasMemory:function(){for(var i=0;i<this.levels.length;i++)this.levels[i].context2D.canvas.height=0,this.levels[i].context2D.canvas.width=0}})}(r),function(e){e.TileSourceCollection=function(i,n,s,u){e.console.error("TileSourceCollection is deprecated; use World instead")}}(r),function(e){e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(a){var h=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},a),this.element=a.element||e.makeNeutralElement("div"),a.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor===e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(p){p.insideElementPressed?(l(h,e.ButtonState.DOWN),h.raiseEvent("enter",{originalEvent:p.originalEvent})):p.buttonDownAny||l(h,e.ButtonState.HOVER)},focusHandler:function(p){h.tracker.enterHandler(p),h.raiseEvent("focus",{originalEvent:p.originalEvent})},leaveHandler:function(p){o(h,e.ButtonState.GROUP),p.insideElementPressed&&h.raiseEvent("exit",{originalEvent:p.originalEvent})},blurHandler:function(p){h.tracker.leaveHandler(p),h.raiseEvent("blur",{originalEvent:p.originalEvent})},pressHandler:function(p){l(h,e.ButtonState.DOWN),h.raiseEvent("press",{originalEvent:p.originalEvent})},releaseHandler:function(p){p.insideElementPressed&&p.insideElementReleased?(o(h,e.ButtonState.HOVER),h.raiseEvent("release",{originalEvent:p.originalEvent})):p.insideElementPressed?o(h,e.ButtonState.GROUP):l(h,e.ButtonState.HOVER)},clickHandler:function(p){p.quick&&h.raiseEvent("click",{originalEvent:p.originalEvent})},keyHandler:function(p){p.keyCode===13?(h.raiseEvent("click",{originalEvent:p.originalEvent}),h.raiseEvent("release",{originalEvent:p.originalEvent}),p.preventDefault=!0):p.preventDefault=!1}}),o(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){l(this,e.ButtonState.GROUP)},notifyGroupExit:function(){o(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function i(a){e.requestAnimationFrame(function(){n(a)})}function n(a){var h,p,d;a.shouldFade&&(h=e.now(),p=h-a.fadeBeginTime,d=1-p/a.fadeLength,d=Math.min(1,d),d=Math.max(0,d),a.imgGroup&&e.setElementOpacity(a.imgGroup,d,!0),d>0&&i(a))}function s(a){a.shouldFade=!0,a.fadeBeginTime=e.now()+a.fadeDelay,window.setTimeout(function(){i(a)},a.fadeDelay)}function u(a){a.shouldFade=!1,a.imgGroup&&e.setElementOpacity(a.imgGroup,1,!0)}function l(a,h){a.element.disabled||(h>=e.ButtonState.GROUP&&a.currentState===e.ButtonState.REST&&(u(a),a.currentState=e.ButtonState.GROUP),h>=e.ButtonState.HOVER&&a.currentState===e.ButtonState.GROUP&&(a.imgHover&&(a.imgHover.style.visibility=""),a.currentState=e.ButtonState.HOVER),h>=e.ButtonState.DOWN&&a.currentState===e.ButtonState.HOVER&&(a.imgDown&&(a.imgDown.style.visibility=""),a.currentState=e.ButtonState.DOWN))}function o(a,h){a.element.disabled||(h<=e.ButtonState.HOVER&&a.currentState===e.ButtonState.DOWN&&(a.imgDown&&(a.imgDown.style.visibility="hidden"),a.currentState=e.ButtonState.HOVER),h<=e.ButtonState.GROUP&&a.currentState===e.ButtonState.HOVER&&(a.imgHover&&(a.imgHover.style.visibility="hidden"),a.currentState=e.ButtonState.GROUP),h<=e.ButtonState.REST&&a.currentState===e.ButtonState.GROUP&&(s(a),a.currentState=e.ButtonState.REST))}}(r),function(e){e.ButtonGroup=function(i){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},i);var n=this.buttons.concat([]),s=this,u;if(this.element=i.element||e.makeNeutralElement("div"),!i.group)for(this.element.style.display="inline-block",u=0;u<n.length;u++)this.element.appendChild(n[u].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(l){var o;for(o=0;o<s.buttons.length;o++)s.buttons[o].notifyGroupEnter()},leaveHandler:function(l){var o;if(!l.insideElementPressed)for(o=0;o<s.buttons.length;o++)s.buttons[o].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var i=this.buttons.pop();this.element.removeChild(i.element),i.destroy()}this.tracker.destroy(),this.element=null}}}(r),function(e){e.Rect=function(i,n,s,u,l){this.x=typeof i=="number"?i:0,this.y=typeof n=="number"?n:0,this.width=typeof s=="number"?s:0,this.height=typeof u=="number"?u:0,this.degrees=typeof l=="number"?l:0,this.degrees=e.positiveModulo(this.degrees,360);var o,a;this.degrees>=270?(o=this.getTopRight(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(o=this.getBottomRight(),this.x=o.x,this.y=o.y,this.degrees-=180):this.degrees>=90&&(o=this.getBottomLeft(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},e.Rect.fromSummits=function(i,n,s){var u=i.distanceTo(n),l=i.distanceTo(s),o=n.minus(i),a=Math.atan(o.y/o.x);return o.x<0?a+=Math.PI:o.y<0&&(a+=2*Math.PI),new e.Rect(i.x,i.y,u,l,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(i){return i instanceof e.Rect&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height&&this.degrees===i.degrees},times:function(i){return new e.Rect(this.x*i,this.y*i,this.width*i,this.height*i,this.degrees)},translate:function(i){return new e.Rect(this.x+i.x,this.y+i.y,this.width,this.height,this.degrees)},union:function(i){var n=this.getBoundingBox(),s=i.getBoundingBox(),u=Math.min(n.x,s.x),l=Math.min(n.y,s.y),o=Math.max(n.x+n.width,s.x+s.width),a=Math.max(n.y+n.height,s.y+s.height);return new e.Rect(u,l,o-u,a-l)},intersection:function(i){var n=1e-10,s=[],u=this.getTopLeft();i.containsPoint(u,n)&&s.push(u);var l=this.getTopRight();i.containsPoint(l,n)&&s.push(l);var o=this.getBottomLeft();i.containsPoint(o,n)&&s.push(o);var a=this.getBottomRight();i.containsPoint(a,n)&&s.push(a);var h=i.getTopLeft();this.containsPoint(h,n)&&s.push(h);var p=i.getTopRight();this.containsPoint(p,n)&&s.push(p);var d=i.getBottomLeft();this.containsPoint(d,n)&&s.push(d);var T=i.getBottomRight();this.containsPoint(T,n)&&s.push(T);for(var E=this._getSegments(),C=i._getSegments(),_=0;_<E.length;_++)for(var R=E[_],f=0;f<C.length;f++){var x=C[f],D=H(R[0],R[1],x[0],x[1]);D&&s.push(D)}function H(K,ae,oe,de){var se=ae.minus(K),ne=de.minus(oe),te=-ne.x*se.y+se.x*ne.y;if(te===0)return null;var pe=(se.x*(K.y-oe.y)-se.y*(K.x-oe.x))/te,X=(ne.x*(K.y-oe.y)-ne.y*(K.x-oe.x))/te;return-n<=pe&&pe<=1-n&&-n<=X&&X<=1-n?new e.Point(K.x+X*se.x,K.y+X*se.y):null}if(s.length===0)return null;for(var A=s[0].x,L=s[0].x,W=s[0].y,j=s[0].y,J=1;J<s.length;J++){var ee=s[J];ee.x<A&&(A=ee.x),ee.x>L&&(L=ee.x),ee.y<W&&(W=ee.y),ee.y>j&&(j=ee.y)}return new e.Rect(A,W,L-A,j-W)},_getSegments:function(){var i=this.getTopLeft(),n=this.getTopRight(),s=this.getBottomLeft(),u=this.getBottomRight();return[[i,n],[n,u],[u,s],[s,i]]},rotate:function(i,n){if(i=e.positiveModulo(i,360),i===0)return this.clone();n=n||this.getCenter();var s=this.getTopLeft().rotate(i,n),u=this.getTopRight().rotate(i,n),l=u.minus(s);l=l.apply(function(a){var h=1e-15;return Math.abs(a)<h?0:a});var o=Math.atan(l.y/l.x);return l.x<0?o+=Math.PI:l.y<0&&(o+=2*Math.PI),new e.Rect(s.x,s.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var i=this.getTopLeft(),n=this.getTopRight(),s=this.getBottomLeft(),u=this.getBottomRight(),l=Math.min(i.x,n.x,s.x,u.x),o=Math.max(i.x,n.x,s.x,u.x),a=Math.min(i.y,n.y,s.y,u.y),h=Math.max(i.y,n.y,s.y,u.y);return new e.Rect(l,a,o-l,h-a)},getIntegerBoundingBox:function(){var i=this.getBoundingBox(),n=Math.floor(i.x),s=Math.floor(i.y),u=Math.ceil(i.width+i.x-n),l=Math.ceil(i.height+i.y-s);return new e.Rect(n,s,u,l)},containsPoint:function(i,n){n=n||0;var s=this.getTopLeft(),u=this.getTopRight(),l=this.getBottomLeft(),o=u.minus(s),a=l.minus(s);return(i.x-s.x)*o.x+(i.y-s.y)*o.y>=-n&&(i.x-u.x)*o.x+(i.y-u.y)*o.y<=n&&(i.x-s.x)*a.x+(i.y-s.y)*a.y>=-n&&(i.x-l.x)*a.x+(i.y-l.y)*a.y<=n},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(r),function(e){var i={};e.ReferenceStrip=function(d){var T=this,E=d.viewer,C=e.getElementSize(E.element),_,R,f;for(d.id||(d.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=d.id,this.element.className="referencestrip"),d=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},d,{element:this.element}),e.extend(this,d),i[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,R=this.element.style,R.marginTop="0px",R.marginRight="0px",R.marginBottom="0px",R.marginLeft="0px",R.left="0px",R.bottom="0px",R.border="0px",R.background="#000",R.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=E,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,n),dragHandler:e.delegate(this,s),scrollHandler:e.delegate(this,u),enterHandler:e.delegate(this,o),leaveHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,h),keyHandler:e.delegate(this,p),preProcessEventHandler:function(x){x.eventType==="wheel"&&(x.preventDefault=!0)}}),d.width&&d.height?(this.element.style.width=d.width+"px",this.element.style.height=d.height+"px",E.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):d.scroll==="horizontal"?(this.element.style.width=C.x*d.sizeRatio*E.tileSources.length+12*E.tileSources.length+"px",this.element.style.height=C.y*d.sizeRatio+"px",E.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=C.y*d.sizeRatio*E.tileSources.length+12*E.tileSources.length+"px",this.element.style.width=C.x*d.sizeRatio+"px",E.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=C.x*this.sizeRatio+8,this.panelHeight=C.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},f=0;f<E.tileSources.length;f++)_=e.makeNeutralElement("div"),_.id=this.element.id+"-"+f,_.style.width=T.panelWidth+"px",_.style.height=T.panelHeight+"px",_.style.display="inline",_.style.float="left",_.style.cssFloat="left",_.style.styleFloat="left",_.style.padding="2px",e.setElementTouchActionNone(_),e.setElementPointerEventsNone(_),this.element.appendChild(_),_.activePanel=!1,this.panels.push(_);l(this,this.scroll==="vertical"?C.y:C.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(d){var T=this.element.querySelector("#"+this.element.id+"-"+d),E=e.getElementSize(this.viewer.canvas),C=Number(this.element.style.width.replace("px","")),_=Number(this.element.style.height.replace("px","")),R=-Number(this.element.style.marginLeft.replace("px","")),f=-Number(this.element.style.marginTop.replace("px","")),x;this.currentSelected!==T&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=T,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(x=Number(d)*(this.panelWidth+3),x>R+E.x-this.panelWidth?(x=Math.min(x,C-E.x),this.element.style.marginLeft=-x+"px",l(this,E.x,-x)):x<R&&(x=Math.max(0,x-E.x/2),this.element.style.marginLeft=-x+"px",l(this,E.x,-x))):(x=Number(d)*(this.panelHeight+3),x>f+E.y-this.panelHeight?(x=Math.min(x,_-E.y),this.element.style.marginTop=-x+"px",l(this,E.y,-x)):x<f&&(x=Math.max(0,x-E.y/2),this.element.style.marginTop=-x+"px",l(this,E.y,-x))),this.currentPage=d,o.call(this,{eventSource:this.tracker}))},update:function(){return i[this.id].animating?(e.console.log("image reference strip update"),!0):!1},destroy:function(){if(this.miniViewers)for(var d in this.miniViewers)this.miniViewers[d].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function n(d){if(d.quick){var T;this.scroll==="horizontal"?T=Math.floor(d.position.x/this.panelWidth):T=Math.floor(d.position.y/this.panelHeight),this.viewer.goToPage(T)}this.element.focus()}function s(d){if(this.dragging=!0,this.element){var T=Number(this.element.style.marginLeft.replace("px","")),E=Number(this.element.style.marginTop.replace("px","")),C=Number(this.element.style.width.replace("px","")),_=Number(this.element.style.height.replace("px","")),R=e.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-d.delta.x>0?T>-(C-R.x)&&(this.element.style.marginLeft=T+d.delta.x*2+"px",l(this,R.x,T+d.delta.x*2)):-d.delta.x<0&&T<0&&(this.element.style.marginLeft=T+d.delta.x*2+"px",l(this,R.x,T+d.delta.x*2)):-d.delta.y>0?E>-(_-R.y)&&(this.element.style.marginTop=E+d.delta.y*2+"px",l(this,R.y,E+d.delta.y*2)):-d.delta.y<0&&E<0&&(this.element.style.marginTop=E+d.delta.y*2+"px",l(this,R.y,E+d.delta.y*2))}}function u(d){if(this.element){var T=Number(this.element.style.marginLeft.replace("px","")),E=Number(this.element.style.marginTop.replace("px","")),C=Number(this.element.style.width.replace("px","")),_=Number(this.element.style.height.replace("px","")),R=e.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?d.scroll>0?T>-(C-R.x)&&(this.element.style.marginLeft=T-d.scroll*60+"px",l(this,R.x,T-d.scroll*60)):d.scroll<0&&T<0&&(this.element.style.marginLeft=T-d.scroll*60+"px",l(this,R.x,T-d.scroll*60)):d.scroll<0?E>R.y-_&&(this.element.style.marginTop=E+d.scroll*60+"px",l(this,R.y,E+d.scroll*60)):d.scroll>0&&E<0&&(this.element.style.marginTop=E+d.scroll*60+"px",l(this,R.y,E+d.scroll*60)),d.preventDefault=!0}}function l(d,T,E){var C,_,R,f,x,D;for(d.scroll==="horizontal"?C=d.panelWidth:C=d.panelHeight,_=Math.ceil(T/C)+5,R=Math.ceil((Math.abs(E)+T)/C)+1,_=R-_,_=_<0?0:_,x=_;x<R&&x<d.panels.length;x++)if(D=d.panels[x],!D.activePanel){var H,A=d.viewer.tileSources[x];A.referenceStripThumbnailUrl?H={type:"image",url:A.referenceStripThumbnailUrl}:H=A,f=new e.Viewer({id:D.id,tileSources:[H],element:D,navigatorSizeRatio:d.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:d.viewer.loadTilesWithAjax,ajaxHeaders:d.viewer.ajaxHeaders,useCanvas:d.useCanvas}),e.setElementPointerEventsNone(f.canvas),e.setElementPointerEventsNone(f.container),f.innerTracker.setTracking(!1),f.outerTracker.setTracking(!1),d.miniViewers[D.id]=f,D.activePanel=!0}}function o(d){var T=d.eventSource.element;this.scroll==="horizontal"?T.style.marginBottom="0px":T.style.marginLeft="0px"}function a(d){var T=d.eventSource.element;this.scroll==="horizontal"?T.style.marginBottom="-"+e.getElementSize(T).y/2+"px":T.style.marginLeft="-"+e.getElementSize(T).x/2+"px"}function h(d){if(!d.ctrl&&!d.alt&&!d.meta)switch(d.keyCode){case 38:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;case 40:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 37:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 39:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;default:d.preventDefault=!1;break}else d.preventDefault=!1}function p(d){if(!d.ctrl&&!d.alt&&!d.meta)switch(d.keyCode){case 61:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;case 45:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 48:case 119:case 87:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;case 115:case 83:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 97:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 100:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;default:d.preventDefault=!1;break}else d.preventDefault=!1}}(r),function(e){e.DisplayRect=function(i,n,s,u,l,o){e.Rect.apply(this,[i,n,s,u]),this.minLevel=l,this.maxLevel=o},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(r),function(e){e.Spring=function(n){var s=arguments;typeof n!="object"&&(n={initial:s.length&&typeof s[0]=="number"?s[0]:void 0,springStiffness:s.length>1?s[1].springStiffness:5,animationTime:s.length>1?s[1].animationTime:1.5}),e.console.assert(typeof n.springStiffness=="number"&&n.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert(typeof n.animationTime=="number"&&n.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),n.exponential&&(this._exponential=!0,delete n.exponential),e.extend(!0,this,n),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(n){e.console.assert(!this._exponential||n!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=n,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(n){e.console.assert(!this._exponential||n!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=n,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(n){this.start.value+=n,this.target.value+=n,this._exponential&&(e.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(n){this._exponential=n,this._exponential&&(e.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=e.now();var n,s;this._exponential?(n=this.start._logValue,s=this.target._logValue):(n=this.start.value,s=this.target.value);var u=this.current.time>=this.target.time?s:n+(s-n)*i(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),l=this.current.value;return this._exponential?this.current.value=Math.exp(u):this.current.value=u,l!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function i(n,s){return(1-Math.exp(n*-s))/(1-Math.exp(-n))}}(r),function(e){function i(s){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},s),this.image=null}i.prototype={errorMsg:null,start:function(){var s=this,u=this.abort;this.image=new Image,this.image.onload=function(){s.finish(!0)},this.image.onabort=this.image.onerror=function(){s.errorMsg="Image load aborted",s.finish(!1)},this.jobId=window.setTimeout(function(){s.errorMsg="Image load exceeded timeout ("+s.timeout+" ms)",s.finish(!1)},this.timeout),this.loadWithAjax?(this.request=e.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(l){var o;try{o=new window.Blob([l.response])}catch(d){var a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(d.name==="TypeError"&&a){var h=new a;h.append(l.response),o=h.getBlob()}}o.size===0&&(s.errorMsg="Empty image response.",s.finish(!1));var p=(window.URL||window.webkitURL).createObjectURL(o);s.image.src=p},error:function(l){s.errorMsg="Image load aborted - XHR error",s.finish(!1)}}),this.abort=function(){s.request.abort(),typeof u=="function"&&u()}):(this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(s){this.image.onload=this.image.onerror=this.image.onabort=null,s||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(s){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},s)},e.ImageLoader.prototype={addJob:function(s){var u=this,l=function(h){n(u,h,s.callback)},o={src:s.src,loadWithAjax:s.loadWithAjax,ajaxHeaders:s.loadWithAjax?s.ajaxHeaders:null,crossOriginPolicy:s.crossOriginPolicy,ajaxWithCredentials:s.ajaxWithCredentials,callback:l,abort:s.abort,timeout:this.timeout},a=new i(o);!this.jobLimit||this.jobsInProgress<this.jobLimit?(a.start(),this.jobsInProgress++):this.jobQueue.push(a)},clear:function(){for(var s=0;s<this.jobQueue.length;s++){var u=this.jobQueue[s];typeof u.abort=="function"&&u.abort()}this.jobQueue=[]}};function n(s,u,l){var o;s.jobsInProgress--,(!s.jobLimit||s.jobsInProgress<s.jobLimit)&&s.jobQueue.length>0&&(o=s.jobQueue.shift(),o.start(),s.jobsInProgress++),l(u.image,u.errorMsg,u.request)}}(r),function(e){e.Tile=function(i,n,s,u,l,o,a,h,p,d){this.level=i,this.x=n,this.y=s,this.bounds=u,this.sourceBounds=d,this.exists=l,this.url=o,this.context2D=a,this.loadWithAjax=h,this.ajaxHeaders=p,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(i){if(!this.cacheImageRecord){e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!==i&&i.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),e.setElementOpacity(this.element,this.opacity)},drawCanvas:function(i,n,s,u){var l=this.position.times(e.pixelDensityRatio),o=this.size.times(e.pixelDensityRatio),a;if(!this.context2D&&!this.cacheImageRecord){e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(a=this.context2D||this.cacheImageRecord.getRenderedContext(),!this.loaded||!a){e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}i.save(),i.globalAlpha=this.opacity,typeof s=="number"&&s!==1&&(l=l.times(s),o=o.times(s)),u instanceof e.Point&&(l=l.plus(u)),i.globalAlpha===1&&this._hasTransparencyChannel()&&i.clearRect(l.x,l.y,o.x,o.y),n({context:i,tile:this,rendered:a});var h,p;this.sourceBounds?(h=Math.min(this.sourceBounds.width,a.canvas.width),p=Math.min(this.sourceBounds.height,a.canvas.height)):(h=a.canvas.width,p=a.canvas.height),i.translate(l.x+o.x/2,0),this.flipped&&i.scale(-1,1),i.drawImage(a.canvas,0,0,h,p,-o.x/2,l.y,o.x,o.y),i.restore()},getScaleForEdgeSmoothing:function(){var i;if(this.cacheImageRecord)i=this.cacheImageRecord.getRenderedContext();else if(this.context2D)i=this.context2D;else return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return i.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(i,n,s){var u=Math.max(1,Math.ceil((s.x-n.x)/2)),l=Math.max(1,Math.ceil((s.y-n.y)/2));return new e.Point(u,l).minus(this.position.times(e.pixelDensityRatio).times(i||1).apply(function(o){return o%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(r),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(i,n,s){var u;e.isPlainObject(i)?u=i:u={element:i,location:n,placement:s},this.element=u.element,this.style=u.element.style,this._init(u)},e.Overlay.prototype={_init:function(i){this.location=i.location,this.placement=i.placement===void 0?e.Placement.TOP_LEFT:i.placement,this.onDraw=i.onDraw,this.checkResize=i.checkResize===void 0?!0:i.checkResize,this.width=i.width===void 0?null:i.width,this.height=i.height===void 0?null:i.height,this.rotationMode=i.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(i,n){var s=e.Placement.properties[this.placement];!s||(s.isHorizontallyCentered?i.x-=n.x/2:s.isRight&&(i.x-=n.x),s.isVerticallyCentered?i.y-=n.y/2:s.isBottom&&(i.y-=n.y))},destroy:function(){var i=this.element,n=this.style;i.parentNode&&(i.parentNode.removeChild(i),i.prevElementParent&&(n.display="none",document.body.appendChild(i))),this.onDraw=null,n.top="",n.left="",n.position="",this.width!==null&&(n.width=""),this.height!==null&&(n.height="");var s=e.getCssPropertyWithVendorPrefix("transformOrigin"),u=e.getCssPropertyWithVendorPrefix("transform");s&&u&&(n[s]="",n[u]="")},drawHTML:function(i,n){var s=this.element;s.parentNode!==i&&(s.prevElementParent=s.parentNode,s.prevNextSibling=s.nextSibling,i.appendChild(s),this.style.position="absolute",this.size=e.getElementSize(s));var u=this._getOverlayPositionAndSize(n),l=u.position,o=this.size=u.size,a=u.rotate;if(this.onDraw)this.onDraw(l,o,this.element);else{var h=this.style;h.left=l.x+"px",h.top=l.y+"px",this.width!==null&&(h.width=o.x+"px"),this.height!==null&&(h.height=o.y+"px");var p=e.getCssPropertyWithVendorPrefix("transformOrigin"),d=e.getCssPropertyWithVendorPrefix("transform");p&&d&&(a?(h[p]=this._getTransformOrigin(),h[d]="rotate("+a+"deg)"):(h[p]="",h[d]="")),h.display="block"}},_getOverlayPositionAndSize:function(i){var n=i.pixelFromPoint(this.location,!0),s=this._getSizeInPixels(i);this.adjust(n,s);var u=0;if(i.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var l=new e.Rect(n.x,n.y,s.x,s.y),o=this._getBoundingBox(l,i.degrees);n=o.getTopLeft(),s=o.getSize()}else u=i.degrees;return{position:n,size:s,rotate:u}},_getSizeInPixels:function(i){var n=this.size.x,s=this.size.y;if(this.width!==null||this.height!==null){var u=i.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);this.width!==null&&(n=u.x),this.height!==null&&(s=u.y)}if(this.checkResize&&(this.width===null||this.height===null)){var l=this.size=e.getElementSize(this.element);this.width===null&&(n=l.x),this.height===null&&(s=l.y)}return new e.Point(n,s)},_getBoundingBox:function(i,n){var s=this._getPlacementPoint(i);return i.rotate(n,s).getBoundingBox()},_getPlacementPoint:function(i){var n=new e.Point(i.x,i.y),s=e.Placement.properties[this.placement];return s&&(s.isHorizontallyCentered?n.x+=i.width/2:s.isRight&&(n.x+=i.width),s.isVerticallyCentered?n.y+=i.height/2:s.isBottom&&(n.y+=i.height)),n},_getTransformOrigin:function(){var i="",n=e.Placement.properties[this.placement];return n&&(n.isLeft?i="left":n.isRight&&(i="right"),n.isTop?i+=" top":n.isBottom&&(i+=" bottom")),i},update:function(i,n){var s=e.isPlainObject(i)?i:{location:i,placement:n};this._init({location:s.location||this.location,placement:s.placement!==void 0?s.placement:this.placement,onDraw:s.onDraw||this.onDraw,checkResize:s.checkResize||this.checkResize,width:s.width!==void 0?s.width:this.width,height:s.height!==void 0?s.height:this.height,rotationMode:s.rotationMode||this.rotationMode})},getBounds:function(i){e.console.assert(i,"A viewport must now be passed to Overlay.getBounds.");var n=this.width,s=this.height;if(n===null||s===null){var u=i.deltaPointsFromPixelsNoRotate(this.size,!0);n===null&&(n=u.x),s===null&&(s=u.y)}var l=this.location.clone();return this.adjust(l,new e.Point(n,s)),this._adjustBoundsForRotation(i,new e.Rect(l.x,l.y,n,s))},_adjustBoundsForRotation:function(i,n){if(!i||i.degrees===0||this.rotationMode===e.OverlayRotationMode.EXACT)return n;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return n;var s=this._getOverlayPositionAndSize(i);return i.viewerElementToViewportRectangle(new e.Rect(s.position.x,s.position.y,s.size.x,s.size.y))}return n.rotate(-i.degrees,this._getPlacementPoint(n))}}}(r),function(e){e.Drawer=function(i){e.console.assert(i.viewer,"[Drawer] options.viewer is required");var n=arguments;if(e.isPlainObject(i)||(i={source:n[0],viewport:n[1],element:n[2]}),e.console.assert(i.viewport,"[Drawer] options.viewport is required"),e.console.assert(i.element,"[Drawer] options.element is required"),i.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=i.viewer,this.viewport=i.viewport,this.debugGridColor=typeof i.debugGridColor=="string"?[i.debugGridColor]:i.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,i.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=e.getElement(i.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var s=this._calculateCanvasSize();this.canvas.width=s.x,this.canvas.height=s.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(i,n,s,u){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(i,n,s,u),this},updateOverlay:function(i,n,s){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(i,n,s),this},removeOverlay:function(i){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(i),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(i){var n=this.viewport.pixelFromPointNoRotate(i,!0);return new e.Point(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)},clipWithPolygons:function(i,n){if(!!this.useCanvas){var s=this._getContext(n);s.beginPath(),i.forEach(function(u){u.forEach(function(l,o){s[o===0?"moveTo":"lineTo"](l.x,l.y)})}),s.clip()}},setOpacity:function(i){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,s=0;s<n.getItemCount();s++)n.getItemAt(s).setOpacity(i);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var i=this.viewer.world,n=0,s=0;s<i.getItemCount();s++){var u=i.getItemAt(s).getOpacity();u>n&&(n=u)}return n},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var i=this._calculateCanvasSize();if((this.canvas.width!==i.x||this.canvas.height!==i.y)&&(this.canvas.width=i.x,this.canvas.height=i.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var n=this._calculateSketchCanvasSize();this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(i,n){if(!!this.useCanvas){var s=this._getContext(i);if(n)s.clearRect(n.x,n.y,n.width,n.height);else{var u=s.canvas;s.clearRect(0,0,u.width,u.height)}}},viewportToDrawerRectangle:function(i){var n=this.viewport.pixelFromPointNoRotate(i.getTopLeft(),!0),s=this.viewport.deltaPixelsFromPointsNoRotate(i.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,s.x*e.pixelDensityRatio,s.y*e.pixelDensityRatio)},drawTile:function(i,n,s,u,l){if(e.console.assert(i,"[Drawer.drawTile] tile is required"),e.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var o=this._getContext(s);u=u||1,i.drawCanvas(o,n,u,l)}else i.drawHTML(this.canvas)},_getContext:function(i){var n=this.context;if(i){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var s=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=s.x,this.sketchCanvas.height=s.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var u=this;this.viewer.addHandler("rotate",function l(){if(u.viewport.getRotation()!==0){u.viewer.removeHandler("rotate",l);var o=u._calculateSketchCanvasSize();u.sketchCanvas.width=o.x,u.sketchCanvas.height=o.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}n=this.sketchContext}return n},saveContext:function(i){!this.useCanvas||this._getContext(i).save()},restoreContext:function(i){!this.useCanvas||this._getContext(i).restore()},setClip:function(i,n){if(!!this.useCanvas){var s=this._getContext(n);s.beginPath(),s.rect(i.x,i.y,i.width,i.height),s.clip()}},drawRectangle:function(i,n,s){if(!!this.useCanvas){var u=this._getContext(s);u.save(),u.fillStyle=n,u.fillRect(i.x,i.y,i.width,i.height),u.restore()}},blendSketch:function(i,n,s,u){var l=i;if(e.isPlainObject(l)||(l={opacity:i,scale:n,translate:s,compositeOperation:u}),!(!this.useCanvas||!this.sketchCanvas)){i=l.opacity,u=l.compositeOperation;var o=l.bounds;if(this.context.save(),this.context.globalAlpha=i,u&&(this.context.globalCompositeOperation=u),o)o.x<0&&(o.width+=o.x,o.x=0),o.x+o.width>this.canvas.width&&(o.width=this.canvas.width-o.x),o.y<0&&(o.height+=o.y,o.y=0),o.y+o.height>this.canvas.height&&(o.height=this.canvas.height-o.y),this.context.drawImage(this.sketchCanvas,o.x,o.y,o.width,o.height,o.x,o.y,o.width,o.height);else{n=l.scale||1,s=l.translate;var a=s instanceof e.Point?s:new e.Point(0,0),h=0,p=0;if(s){var d=this.sketchCanvas.width-this.canvas.width,T=this.sketchCanvas.height-this.canvas.height;h=Math.round(d/2),p=Math.round(T/2)}this.context.drawImage(this.sketchCanvas,a.x-h*n,a.y-p*n,(this.canvas.width+2*h)*n,(this.canvas.height+2*p)*n,-h,-p,this.canvas.width+2*h,this.canvas.height+2*p)}this.context.restore()}},drawDebugInfo:function(i,n,s,u){if(!!this.useCanvas){var l=this.viewer.world.getIndexOfItem(u)%this.debugGridColor.length,o=this.context;o.save(),o.lineWidth=2*e.pixelDensityRatio,o.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",o.strokeStyle=this.debugGridColor[l],o.fillStyle=this.debugGridColor[l],this.viewport.degrees!==0&&this._offsetForRotation({degrees:this.viewport.degrees}),u.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:u.getRotation(!0),point:u.viewport.pixelFromPointNoRotate(u._getRotationPoint(!0),!0)}),u.viewport.degrees===0&&u.getRotation(!0)%360==0&&u._drawer.viewer.viewport.getFlip()&&u._drawer._flip(),o.strokeRect(i.position.x*e.pixelDensityRatio,i.position.y*e.pixelDensityRatio,i.size.x*e.pixelDensityRatio,i.size.y*e.pixelDensityRatio);var a=(i.position.x+i.size.x/2)*e.pixelDensityRatio,h=(i.position.y+i.size.y/2)*e.pixelDensityRatio;o.translate(a,h),o.rotate(Math.PI/180*-this.viewport.degrees),o.translate(-a,-h),i.x===0&&i.y===0&&(o.fillText("Zoom: "+this.viewport.getZoom(),i.position.x*e.pixelDensityRatio,(i.position.y-30)*e.pixelDensityRatio),o.fillText("Pan: "+this.viewport.getBounds().toString(),i.position.x*e.pixelDensityRatio,(i.position.y-20)*e.pixelDensityRatio)),o.fillText("Level: "+i.level,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+20)*e.pixelDensityRatio),o.fillText("Column: "+i.x,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+30)*e.pixelDensityRatio),o.fillText("Row: "+i.y,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+40)*e.pixelDensityRatio),o.fillText("Order: "+s+" of "+n,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+50)*e.pixelDensityRatio),o.fillText("Size: "+i.size.toString(),(i.position.x+10)*e.pixelDensityRatio,(i.position.y+60)*e.pixelDensityRatio),o.fillText("Position: "+i.position.toString(),(i.position.x+10)*e.pixelDensityRatio,(i.position.y+70)*e.pixelDensityRatio),this.viewport.degrees!==0&&this._restoreRotationChanges(),u.getRotation(!0)%360!=0&&this._restoreRotationChanges(),u.viewport.degrees===0&&u.getRotation(!0)%360==0&&u._drawer.viewer.viewport.getFlip()&&u._drawer._flip(),o.restore()}},debugRect:function(i){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio,i.width*e.pixelDensityRatio,i.height*e.pixelDensityRatio),n.restore()}},setImageSmoothingEnabled:function(i){this.useCanvas&&(this._imageSmoothingEnabled=i,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(i){i.msImageSmoothingEnabled=this._imageSmoothingEnabled,i.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(i){var n=this._getContext(i).canvas;return new e.Point(n.width,n.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(i){var n=i.point?i.point.times(e.pixelDensityRatio):this.getCanvasCenter(),s=this._getContext(i.useSketch);s.save(),s.translate(n.x,n.y),this.viewer.viewport.flipped?(s.rotate(Math.PI/180*-i.degrees),s.scale(-1,1)):s.rotate(Math.PI/180*i.degrees),s.translate(-n.x,-n.y)},_flip:function(i){i=i||{};var n=i.point?i.point.times(e.pixelDensityRatio):this.getCanvasCenter(),s=this._getContext(i.useSketch);s.translate(n.x,0),s.scale(-1,1),s.translate(-n.x,0)},_restoreRotationChanges:function(i){var n=this._getContext(i);n.restore()},_calculateCanvasSize:function(){var i=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:Math.round(n.x*i),y:Math.round(n.y*i)}},_calculateSketchCanvasSize:function(){var i=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return i;var n=Math.ceil(Math.sqrt(i.x*i.x+i.y*i.y));return{x:n,y:n}}}}(r),function(e){e.Viewport=function(i){var n=arguments;n.length&&n[0]instanceof e.Point&&(i={containerSize:n[0],contentSize:n[1],config:n[2]}),i.config&&(e.extend(!0,i,i.config),delete i.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},i.margins||{}),delete i.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer},i),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(i){return e.console.assert(i,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(i instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(i.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(i.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,i.y/i.x),i.x),this},setHomeBounds:function(i,n){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(i,n)},_setContentBounds:function(i,n){e.console.assert(i,"[Viewport._setContentBounds] bounds is required"),e.console.assert(i instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(i.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(i.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=i.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=i.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var i=this._contentAspectRatio/this.getAspectRatio(),n;return this.homeFillsViewer?n=i>=1?i:1:n=i>=1?1:i,n/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var i=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),s=n/this.getAspectRatio();return new e.Rect(i.x-n/2,i.y-s/2,n,s)},goHome:function(i){return this.viewer&&this.viewer.raiseEvent("home",{immediately:i}),this.fitBounds(this.getHomeBounds(),i)},getMinZoom:function(){var i=this.getHomeZoom(),n=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*i;return n},getMaxZoom:function(){var i=this.maxZoomLevel;return i||(i=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,i/=this._contentBounds.width),Math.max(i,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(i){e.console.assert(e.type(i)==="object","[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},i),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(i){return this.getBoundsNoRotate(i).rotate(-this.getRotation())},getBoundsNoRotate:function(i){var n=this.getCenter(i),s=1/this.getZoom(i),u=s/this.getAspectRatio();return new e.Rect(n.x-s/2,n.y-u/2,s,u)},getBoundsWithMargins:function(i){return this.getBoundsNoRotateWithMargins(i).rotate(-this.getRotation(),this.getCenter(i))},getBoundsNoRotateWithMargins:function(i){var n=this.getBoundsNoRotate(i),s=this._containerInnerSize.x*this.getZoom(i);return n.x-=this._margins.left/s,n.y-=this._margins.top/s,n.width+=(this._margins.left+this._margins.right)/s,n.height+=(this._margins.top+this._margins.bottom)/s,n},getCenter:function(i){var n=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),s=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),u,l,o,a,h,p,d,T;return i?n:this.zoomPoint?(u=this.pixelFromPoint(this.zoomPoint,!0),l=this.getZoom(),o=1/l,a=o/this.getAspectRatio(),h=new e.Rect(n.x-o/2,n.y-a/2,o,a),p=this._pixelFromPoint(this.zoomPoint,h),d=p.minus(u),T=d.divide(this._containerInnerSize.x*l),s.plus(T)):s},getZoom:function(i){return i?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(i){return Math.max(Math.min(i,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(i){var n=new e.Rect(i.x,i.y,i.width,i.height);if(!this.wrapHorizontal){var s=this.visibilityRatio*n.width,u=n.x+n.width,l=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,o=this._contentBoundsNoRotate.x-u+s,a=l-n.x-s;s>this._contentBoundsNoRotate.width?n.x+=(o+a)/2:a<0?n.x+=a:o>0&&(n.x+=o)}if(!this.wrapVertical){var h=this.visibilityRatio*n.height,p=n.y+n.height,d=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,T=this._contentBoundsNoRotate.y-p+h,E=d-n.y-h;h>this._contentBoundsNoRotate.height?n.y+=(T+E)/2:E<0?n.y+=E:T>0&&(n.y+=T)}return n},_raiseConstraintsEvent:function(i){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:i})},applyConstraints:function(i){var n=this.getZoom(),s=this._applyZoomConstraints(n);n!==s&&this.zoomTo(s,this.zoomPoint,i);var u=this.getBoundsNoRotate(),l=this._applyBoundaryConstraints(u);return this._raiseConstraintsEvent(i),(u.x!==l.x||u.y!==l.y||i)&&this.fitBounds(l.rotate(-this.getRotation()),i),this},ensureVisible:function(i){return this.applyConstraints(i)},_fitBounds:function(i,n){n=n||{};var s=n.immediately||!1,u=n.constraints||!1,l=this.getAspectRatio(),o=i.getCenter(),a=new e.Rect(i.x,i.y,i.width,i.height,i.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=l?a.height=a.width/l:a.width=a.height*l,a.x=o.x-a.width/2,a.y=o.y-a.height/2;var h=1/a.width;if(u){var p=a.getAspectRatio(),d=this._applyZoomConstraints(h);h!==d&&(h=d,a.width=1/h,a.x=o.x-a.width/2,a.height=a.width/p,a.y=o.y-a.height/2),a=this._applyBoundaryConstraints(a),o=a.getCenter(),this._raiseConstraintsEvent(s)}if(s)return this.panTo(o,!0),this.zoomTo(h,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var T=this.getBounds(),E=this.getZoom();if(E===0||Math.abs(h/E-1)<1e-8)return this.zoomTo(h,!0),this.panTo(o,s);a=a.rotate(-this.getRotation());var C=a.getTopLeft().times(h).minus(T.getTopLeft().times(E)).divide(h-E);return this.zoomTo(h,C,s)},fitBounds:function(i,n){return this._fitBounds(i,{immediately:n,constraints:!1})},fitBoundsWithConstraints:function(i,n){return this._fitBounds(i,{immediately:n,constraints:!0})},fitVertically:function(i){var n=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,i)},fitHorizontally:function(i){var n=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,i)},getConstrainedBounds:function(i){var n,s;return n=this.getBounds(i),s=this._applyBoundaryConstraints(n),s},panBy:function(i,n){var s=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(s.plus(i),n)},panTo:function(i,n){return n?(this.centerSpringX.resetTo(i.x),this.centerSpringY.resetTo(i.y)):(this.centerSpringX.springTo(i.x),this.centerSpringY.springTo(i.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:i,immediately:n}),this},zoomBy:function(i,n,s){return this.zoomTo(this.zoomSpring.target.value*i,n,s)},zoomTo:function(i,n,s){var u=this;return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,s?this._adjustCenterSpringsForZoomPoint(function(){u.zoomSpring.resetTo(i)}):this.zoomSpring.springTo(i),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:i,refPoint:n,immediately:s}),this},setRotation:function(i){return!this.viewer||!this.viewer.drawer.canRotate()?this:(this.degrees=e.positiveModulo(i,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:i}),this)},getRotation:function(){return this.degrees},resize:function(i,n){var s=this.getBoundsNoRotate(),u=s,l;return this.containerSize.x=i.x,this.containerSize.y=i.y,this._updateContainerInnerSize(),n&&(l=i.x/this.containerSize.x,u.width=s.width*l,u.height=u.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:i,maintain:n}),this.fitBounds(u,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var i=this;this._adjustCenterSpringsForZoomPoint(function(){i.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var n=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,n},_adjustCenterSpringsForZoomPoint:function(i){if(this.zoomPoint){var n=this.pixelFromPoint(this.zoomPoint,!0);i();var s=this.pixelFromPoint(this.zoomPoint,!0),u=s.minus(n),l=this.deltaPointsFromPixels(u,!0);this.centerSpringX.shiftBy(l.x),this.centerSpringY.shiftBy(l.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else i()},deltaPixelsFromPointsNoRotate:function(i,n){return i.times(this._containerInnerSize.x*this.getZoom(n))},deltaPixelsFromPoints:function(i,n){return this.deltaPixelsFromPointsNoRotate(i.rotate(this.getRotation()),n)},deltaPointsFromPixelsNoRotate:function(i,n){return i.divide(this._containerInnerSize.x*this.getZoom(n))},deltaPointsFromPixels:function(i,n){return this.deltaPointsFromPixelsNoRotate(i,n).rotate(-this.getRotation())},pixelFromPointNoRotate:function(i,n){return this._pixelFromPointNoRotate(i,this.getBoundsNoRotate(n))},pixelFromPoint:function(i,n){return this._pixelFromPoint(i,this.getBoundsNoRotate(n))},_pixelFromPointNoRotate:function(i,n){return i.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(i,n){return this._pixelFromPointNoRotate(i.rotate(this.getRotation(),this.getCenter(!0)),n)},pointFromPixelNoRotate:function(i,n){var s=this.getBoundsNoRotate(n);return i.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/s.width).plus(s.getTopLeft())},pointFromPixel:function(i,n){return this.pointFromPixelNoRotate(i,n).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(i,n){var s=this._contentBoundsNoRotate.width;return new e.Point(i*this._contentSizeNoRotate.x/s,n*this._contentSizeNoRotate.x/s)},viewportToImageCoordinates:function(i,n){if(i instanceof e.Point)return this.viewportToImageCoordinates(i.x,i.y);if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(s===1){var u=this.viewer.world.getItemAt(0);return u.viewportToImageCoordinates(i,n,!0)}}return this._viewportToImageDelta(i-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(i,n){var s=this._contentBoundsNoRotate.width;return new e.Point(i/this._contentSizeNoRotate.x*s,n/this._contentSizeNoRotate.x*s)},imageToViewportCoordinates:function(i,n){if(i instanceof e.Point)return this.imageToViewportCoordinates(i.x,i.y);if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(s===1){var u=this.viewer.world.getItemAt(0);return u.imageToViewportCoordinates(i,n,!0)}}var l=this._imageToViewportDelta(i,n);return l.x+=this._contentBoundsNoRotate.x,l.y+=this._contentBoundsNoRotate.y,l},imageToViewportRectangle:function(i,n,s,u){var l=i;if(l instanceof e.Rect||(l=new e.Rect(i,n,s,u)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(o===1){var a=this.viewer.world.getItemAt(0);return a.imageToViewportRectangle(i,n,s,u,!0)}}var h=this.imageToViewportCoordinates(l.x,l.y),p=this._imageToViewportDelta(l.width,l.height);return new e.Rect(h.x,h.y,p.x,p.y,l.degrees)},viewportToImageRectangle:function(i,n,s,u){var l=i;if(l instanceof e.Rect||(l=new e.Rect(i,n,s,u)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(o===1){var a=this.viewer.world.getItemAt(0);return a.viewportToImageRectangle(i,n,s,u,!0)}}var h=this.viewportToImageCoordinates(l.x,l.y),p=this._viewportToImageDelta(l.width,l.height);return new e.Rect(h.x,h.y,p.x,p.y,l.degrees)},viewerElementToImageCoordinates:function(i){var n=this.pointFromPixel(i,!0);return this.viewportToImageCoordinates(n)},imageToViewerElementCoordinates:function(i){var n=this.imageToViewportCoordinates(i);return this.pixelFromPoint(n,!0)},windowToImageCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=i.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var n=this.imageToViewerElementCoordinates(i);return n.plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(i){return this.pointFromPixel(i,!0)},viewportToViewerElementCoordinates:function(i){return this.pixelFromPoint(i,!0)},viewerElementToViewportRectangle:function(i){return e.Rect.fromSummits(this.pointFromPixel(i.getTopLeft(),!0),this.pointFromPixel(i.getTopRight(),!0),this.pointFromPixel(i.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(i){return e.Rect.fromSummits(this.pixelFromPoint(i.getTopLeft(),!0),this.pixelFromPoint(i.getTopRight(),!0),this.pixelFromPoint(i.getBottomLeft(),!0))},windowToViewportCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=i.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var n=this.viewportToViewerElementCoordinates(i);return n.plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(i){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(n===1){var s=this.viewer.world.getItemAt(0);return s.viewportToImageZoom(i)}}var u=this._contentSizeNoRotate.x,l=this._containerInnerSize.x,o=this._contentBoundsNoRotate.width,a=l/u*o;return i*a},imageToViewportZoom:function(i){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(n===1){var s=this.viewer.world.getItemAt(0);return s.imageToViewportZoom(i)}}var u=this._contentSizeNoRotate.x,l=this._containerInnerSize.x,o=this._contentBoundsNoRotate.width,a=u/l/o;return i*a},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(i){return this.flipped===i?this:(this.flipped=i,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:i}),this)}}}(r),function(e){e.TiledImage=function(f){var x=this;e.console.assert(f.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(f.drawer,"[TiledImage] options.drawer is required"),e.console.assert(f.viewer,"[TiledImage] options.viewer is required"),e.console.assert(f.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(f.source,"[TiledImage] options.source is required"),e.console.assert(!f.clip||f.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=f.tileCache,delete f.tileCache,this._drawer=f.drawer,delete f.drawer,this._imageLoader=f.imageLoader,delete f.imageLoader,f.clip instanceof e.Rect&&(this._clip=f.clip.clone()),delete f.clip;var D=f.x||0;delete f.x;var H=f.y||0;delete f.y,this.normHeight=f.source.dimensions.y/f.source.dimensions.x,this.contentAspectX=f.source.dimensions.x/f.source.dimensions.y;var A=1;f.width?(A=f.width,delete f.width,f.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete f.height)):f.height&&(A=f.height/this.normHeight,delete f.height);var L=f.fitBounds;delete f.fitBounds;var W=f.fitBoundsPlacement||r.Placement.CENTER;delete f.fitBoundsPlacement;var j=f.degrees||0;delete f.degrees,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation},f),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:D,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:H,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:A,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:j,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),L&&this.fitBounds(L,W,!0),this._drawingHandler=function(J){x.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:x},J))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(f){f!==this._fullyLoaded&&(this._fullyLoaded=f,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var f=this._xSpring.update(),x=this._ySpring.update(),D=this._scaleSpring.update(),H=this._degreesSpring.update();return f||x||D||H?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(f){return this.getBoundsNoRotate(f).rotate(this.getRotation(f),this._getRotationPoint(f))},getBoundsNoRotate:function(f){return f?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(f){var x=this.getBoundsNoRotate(f);if(this._clip){var D=f?this._worldWidthCurrent:this._worldWidthTarget,H=D/this.source.dimensions.x,A=this._clip.times(H);x=new e.Rect(x.x+A.x,x.y+A.y,A.width,A.height)}return x.rotate(this.getRotation(f),this._getRotationPoint(f))},getTileBounds:function(f,x,D){var H=this.source.getNumTiles(f),A=(H.x+x%H.x)%H.x,L=(H.y+D%H.y)%H.y,W=this.source.getTileBounds(f,A,L);return this.getFlip()&&(W.x=1-W.x-W.width),W.x+=(x-A)/H.x,W.y+=this._worldHeightCurrent/this._worldWidthCurrent*((D-L)/H.y),W},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var f=this.imageToWindowCoordinates(new e.Point(0,0)),x=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(x.x-f.x,x.y-f.y)},_viewportToImageDelta:function(f,x,D){var H=D?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(f*(this.source.dimensions.x/H),x*(this.source.dimensions.y*this.contentAspectX/H))},viewportToImageCoordinates:function(f,x,D){var H;return f instanceof e.Point?(D=x,H=f):H=new e.Point(f,x),H=H.rotate(-this.getRotation(D),this._getRotationPoint(D)),D?this._viewportToImageDelta(H.x-this._xSpring.current.value,H.y-this._ySpring.current.value):this._viewportToImageDelta(H.x-this._xSpring.target.value,H.y-this._ySpring.target.value)},_imageToViewportDelta:function(f,x,D){var H=D?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(f/this.source.dimensions.x*H,x/this.source.dimensions.y/this.contentAspectX*H)},imageToViewportCoordinates:function(f,x,D){f instanceof e.Point&&(D=x,x=f.y,f=f.x);var H=this._imageToViewportDelta(f,x);return D?(H.x+=this._xSpring.current.value,H.y+=this._ySpring.current.value):(H.x+=this._xSpring.target.value,H.y+=this._ySpring.target.value),H.rotate(this.getRotation(D),this._getRotationPoint(D))},imageToViewportRectangle:function(f,x,D,H,A){var L=f;L instanceof e.Rect?A=x:L=new e.Rect(f,x,D,H);var W=this.imageToViewportCoordinates(L.getTopLeft(),A),j=this._imageToViewportDelta(L.width,L.height,A);return new e.Rect(W.x,W.y,j.x,j.y,L.degrees+this.getRotation(A))},viewportToImageRectangle:function(f,x,D,H,A){var L=f;f instanceof e.Rect?A=x:L=new e.Rect(f,x,D,H);var W=this.viewportToImageCoordinates(L.getTopLeft(),A),j=this._viewportToImageDelta(L.width,L.height,A);return new e.Rect(W.x,W.y,j.x,j.y,L.degrees-this.getRotation(A))},viewerElementToImageCoordinates:function(f){var x=this.viewport.pointFromPixel(f,!0);return this.viewportToImageCoordinates(x)},imageToViewerElementCoordinates:function(f){var x=this.imageToViewportCoordinates(f);return this.viewport.pixelFromPoint(x,!0)},windowToImageCoordinates:function(f){var x=f.minus(r.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(x)},imageToWindowCoordinates:function(f){var x=this.imageToViewerElementCoordinates(f);return x.plus(r.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(f){var x=this._scaleSpring.current.value;return f=f.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((f.x-this._xSpring.current.value)/x,(f.y-this._ySpring.current.value)/x,f.width/x,f.height/x,f.degrees)},viewportToImageZoom:function(f){var x=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return x*f},imageToViewportZoom:function(f){var x=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return f/x},setPosition:function(f,x){var D=this._xSpring.target.value===f.x&&this._ySpring.target.value===f.y;if(x){if(D&&this._xSpring.current.value===f.x&&this._ySpring.current.value===f.y)return;this._xSpring.resetTo(f.x),this._ySpring.resetTo(f.y),this._needsDraw=!0}else{if(D)return;this._xSpring.springTo(f.x),this._ySpring.springTo(f.y),this._needsDraw=!0}D||this._raiseBoundsChange()},setWidth:function(f,x){this._setScale(f,x)},setHeight:function(f,x){this._setScale(f/this.normHeight,x)},setCroppingPolygons:function(f){var x=function(H){return H instanceof e.Point||typeof H.x=="number"&&typeof H.y=="number"},D=function(H){return H.map(function(A){try{if(x(A))return{x:A.x,y:A.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!e.isArray(f))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=f.map(function(H){return D(H)})}catch(H){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(H),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(f,x,D){x=x||e.Placement.CENTER;var H=e.Placement.properties[x],A=this.contentAspectX,L=0,W=0,j=1,J=1;if(this._clip&&(A=this._clip.getAspectRatio(),j=this._clip.width/this.source.dimensions.x,J=this._clip.height/this.source.dimensions.y,f.getAspectRatio()>A?(L=this._clip.x/this._clip.height*f.height,W=this._clip.y/this._clip.height*f.height):(L=this._clip.x/this._clip.width*f.width,W=this._clip.y/this._clip.width*f.width)),f.getAspectRatio()>A){var ee=f.height/J,K=0;H.isHorizontallyCentered?K=(f.width-f.height*A)/2:H.isRight&&(K=f.width-f.height*A),this.setPosition(new e.Point(f.x-L+K,f.y-W),D),this.setHeight(ee,D)}else{var ae=f.width/j,oe=0;H.isVerticallyCentered?oe=(f.height-f.width/A)/2:H.isBottom&&(oe=f.height-f.width/A),this.setPosition(new e.Point(f.x-L,f.y-W+oe),D),this.setWidth(ae,D)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(f){e.console.assert(!f||f instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),f instanceof e.Rect?this._clip=f.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(f){this.flipped=!!f,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(f){f!==this.opacity&&(this.opacity=f,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(f){this._preload=!!f,this._needsDraw=!0},getRotation:function(f){return f?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(f,x){this._degreesSpring.target.value===f&&this._degreesSpring.isAtTargetValue()||(x?this._degreesSpring.resetTo(f):this._degreesSpring.springTo(f),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(f){return this.getBoundsNoRotate(f).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(f){f!==this.compositeOperation&&(this.compositeOperation=f,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(f,x){var D=this._scaleSpring.target.value===f;if(x){if(D&&this._scaleSpring.current.value===f)return;this._scaleSpring.resetTo(f),this._updateForScale(),this._needsDraw=!0}else{if(D)return;this._scaleSpring.springTo(f),this._updateForScale(),this._needsDraw=!0}D||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var f=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),x=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,D=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(x/this.minPixelRatio)/Math.log(2))));return D=Math.max(D,this.source.minLevel||0),f=Math.min(f,D),{lowestLevel:f,highestLevel:D}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var f=this.lastDrawn.pop();f.beingDrawn=!1}var x=this.viewport,D=this._viewportToTiledImageRectangle(x.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var H=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(D=D.intersection(H),D===null)return}for(var A=this._getLevelsInterval(),L=A.lowestLevel,W=A.highestLevel,j=null,J=!1,ee=e.now(),K=W;K>=L;K--){var ae=!1,oe=x.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(K),!0).x*this._scaleSpring.current.value;if(K===L||!J&&oe>=this.minPixelRatio)ae=!0,J=!0;else if(!J)continue;var de=x.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(K),!1).x*this._scaleSpring.current.value,se=x.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,ne=this.immediateRender?1:se,te=Math.min(1,(oe-.5)/.5),pe=ne/Math.abs(ne-de);if(j=i(this,J,ae,K,te,pe,D,ee,j),p(this.coverage,K))break}_(this,this.lastDrawn),j&&!j.context2D?(u(this,j,ee),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(f,x,D){var H,A;this.wrapHorizontal?(H=e.positiveModulo(x.x,1),A=e.positiveModulo(D.x,1)):(H=Math.max(0,x.x),A=Math.min(1,D.x));var L,W,j=1/this.source.aspectRatio;this.wrapVertical?(L=e.positiveModulo(x.y,j),W=e.positiveModulo(D.y,j)):(L=Math.max(0,x.y),W=Math.min(j,D.y));var J=this.source.getTileAtPoint(f,new e.Point(H,L)),ee=this.source.getTileAtPoint(f,new e.Point(A,W)),K=this.source.getNumTiles(f);return this.wrapHorizontal&&(J.x+=K.x*Math.floor(x.x),ee.x+=K.x*Math.floor(D.x)),this.wrapVertical&&(J.y+=K.y*Math.floor(x.y/j),ee.y+=K.y*Math.floor(D.y/j)),{topLeft:J,bottomRight:ee}}});function i(f,x,D,H,A,L,W,j,J){var ee=W.getBoundingBox().getTopLeft(),K=W.getBoundingBox().getBottomRight();f.viewer&&f.viewer.raiseEvent("update-level",{tiledImage:f,havedrawn:x,level:H,opacity:A,visibility:L,drawArea:W,topleft:ee,bottomright:K,currenttime:j,best:J}),E(f.coverage,H),E(f.loadingCoverage,H);var ae=f._getCornerTiles(H,ee,K),oe=ae.topLeft,de=ae.bottomRight,se=f.source.getNumTiles(H),ne=f.viewport.pixelFromPoint(f.viewport.getCenter());f.getFlip()&&(de.x+=1,f.wrapHorizontal||(de.x=Math.min(de.x,se.x-1)));for(var te=oe.x;te<=de.x;te++)for(var pe=oe.y;pe<=de.y;pe++){var X;if(f.getFlip()){var Ee=(se.x+te%se.x)%se.x;X=te+se.x-Ee-Ee-1}else X=te;W.intersection(f.getTileBounds(H,X,pe))!==null&&(J=n(f,D,x,X,pe,H,A,L,ne,se,j,J))}return J}function n(f,x,D,H,A,L,W,j,J,ee,K,ae){var oe=s(H,A,L,f,f.source,f.tilesMatrix,K,ee,f._worldWidthCurrent,f._worldHeightCurrent),de=D;f.viewer&&f.viewer.raiseEvent("update-tile",{tiledImage:f,tile:oe}),T(f.coverage,L,H,A,!1);var se=oe.loaded||oe.loading||d(f.loadingCoverage,L,H,A);if(T(f.loadingCoverage,L,H,A,se),!oe.exists||(x&&!de&&(d(f.coverage,L,H,A)?T(f.coverage,L,H,A,!0):de=!0),!de))return ae;if(a(oe,f.source.tileOverlap,f.viewport,J,j,f),!oe.loaded)if(oe.context2D)o(f,oe);else{var ne=f._tileCache.getImageRecord(oe.cacheKey);if(ne){var te=ne.getImage();o(f,oe,te)}}if(oe.loaded){var pe=h(f,oe,H,A,L,W,K);pe&&(f._needsDraw=!0)}else oe.loading?f._tilesLoading++:se||(ae=C(ae,oe));return ae}function s(f,x,D,H,A,L,W,j,J,ee){var K,ae,oe,de,se,ne,te,pe,X;return L[D]||(L[D]={}),L[D][f]||(L[D][f]={}),(!L[D][f][x]||!L[D][f][x].flipped!=!H.flipped)&&(K=(j.x+f%j.x)%j.x,ae=(j.y+x%j.y)%j.y,oe=H.getTileBounds(D,f,x),de=A.getTileBounds(D,K,ae,!0),se=A.tileExists(D,K,ae),ne=A.getTileUrl(D,K,ae),H.loadTilesWithAjax?(te=A.getTileAjaxHeaders(D,K,ae),e.isPlainObject(H.ajaxHeaders)&&(te=e.extend({},H.ajaxHeaders,te))):te=null,pe=A.getContext2D?A.getContext2D(D,K,ae):void 0,X=new e.Tile(D,f,x,oe,se,ne,pe,H.loadTilesWithAjax,te,de),H.getFlip()?K===0&&(X.isRightMost=!0):K===j.x-1&&(X.isRightMost=!0),ae===j.y-1&&(X.isBottomMost=!0),X.flipped=H.flipped,L[D][f][x]=X),X=L[D][f][x],X.lastTouchTime=W,X}function u(f,x,D){x.loading=!0,f._imageLoader.addJob({src:x.url,loadWithAjax:x.loadWithAjax,ajaxHeaders:x.ajaxHeaders,crossOriginPolicy:f.crossOriginPolicy,ajaxWithCredentials:f.ajaxWithCredentials,callback:function(H,A,L){l(f,x,D,H,A,L)},abort:function(){x.loading=!1}})}function l(f,x,D,H,A,L){if(!H){e.console.log("Tile %s failed to load: %s - error: %s",x,x.url,A),f.viewer.raiseEvent("tile-load-failed",{tile:x,tiledImage:f,time:D,message:A,tileRequest:L}),x.loading=!1,x.exists=!1;return}if(D<f.lastResetTime){e.console.log("Ignoring tile %s loaded before reset: %s",x,x.url),x.loading=!1;return}var W=function(){var j=f.source.getClosestLevel();o(f,x,H,j,L)};f._midDraw?window.setTimeout(W,1):W()}function o(f,x,D,H,A){var L=0;function W(){return L++,j}function j(){L--,L===0&&(x.loading=!1,x.loaded=!0,x.context2D||f._tileCache.cacheTile({image:D,tile:x,cutoff:H,tiledImage:f}),f._needsDraw=!0)}f.viewer.raiseEvent("tile-loaded",{tile:x,tiledImage:f,tileRequest:A,image:D,getCompletionCallback:W}),W()()}function a(f,x,D,H,A,L){var W=f.bounds.getTopLeft();W.x*=L._scaleSpring.current.value,W.y*=L._scaleSpring.current.value,W.x+=L._xSpring.current.value,W.y+=L._ySpring.current.value;var j=f.bounds.getSize();j.x*=L._scaleSpring.current.value,j.y*=L._scaleSpring.current.value;var J=D.pixelFromPointNoRotate(W,!0),ee=D.pixelFromPointNoRotate(W,!1),K=D.deltaPixelsFromPointsNoRotate(j,!0),ae=D.deltaPixelsFromPointsNoRotate(j,!1),oe=ee.plus(ae.divide(2)),de=H.squaredDistanceTo(oe);x||(K=K.plus(new e.Point(1,1))),f.isRightMost&&L.wrapHorizontal&&(K.x+=.75),f.isBottomMost&&L.wrapVertical&&(K.y+=.75),f.position=J,f.size=K,f.squaredDistance=de,f.visibility=A}function h(f,x,D,H,A,L,W){var j=1e3*f.blendTime,J,ee;if(x.blendStart||(x.blendStart=W),J=W-x.blendStart,ee=j?Math.min(1,J/j):1,f.alwaysBlend&&(ee*=L),x.opacity=ee,f.lastDrawn.push(x),ee===1)T(f.coverage,A,D,H,!0),f._hasOpaqueTile=!0;else if(J<j)return!0;return!1}function p(f,x,D,H){var A,L,W,j;if(!f[x])return!1;if(D===void 0||H===void 0){A=f[x];for(W in A)if(Object.prototype.hasOwnProperty.call(A,W)){L=A[W];for(j in L)if(Object.prototype.hasOwnProperty.call(L,j)&&!L[j])return!1}return!0}return f[x][D]===void 0||f[x][D][H]===void 0||f[x][D][H]===!0}function d(f,x,D,H){return D===void 0||H===void 0?p(f,x+1):p(f,x+1,2*D,2*H)&&p(f,x+1,2*D,2*H+1)&&p(f,x+1,2*D+1,2*H)&&p(f,x+1,2*D+1,2*H+1)}function T(f,x,D,H,A){if(!f[x]){e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",x);return}f[x][D]||(f[x][D]={}),f[x][D][H]=A}function E(f,x){f[x]={}}function C(f,x){return!f||x.visibility>f.visibility||x.visibility===f.visibility&&x.squaredDistance<f.squaredDistance?x:f}function _(f,x){if(!(f.opacity===0||x.length===0&&!f.placeholderFillStyle)){var D=x[0],H;D&&(H=f.opacity<1||f.compositeOperation&&f.compositeOperation!=="source-over"||!f._isBottomItem()&&D._hasTransparencyChannel());var A,L,W=f.viewport.getZoom(!0),j=f.viewportToImageZoom(W);x.length>1&&j>f.smoothTileEdgesMinZoom&&!f.iOSDevice&&f.getRotation(!0)%360==0&&e.supportsCanvas&&(H=!0,A=D.getScaleForEdgeSmoothing(),L=D.getTranslationForEdgeSmoothing(A,f._drawer.getCanvasSize(!1),f._drawer.getCanvasSize(!0)));var J;H&&(A||(J=f.viewport.viewportToViewerElementRectangle(f.getClippedBounds(!0)).getIntegerBoundingBox(),f._drawer.viewer.viewport.getFlip()&&(f.viewport.degrees!==0||f.getRotation(!0)%360!=0)&&(J.x=f._drawer.viewer.container.clientWidth-(J.x+J.width)),J=J.times(e.pixelDensityRatio)),f._drawer._clear(!0,J)),A||(f.viewport.degrees!==0&&f._drawer._offsetForRotation({degrees:f.viewport.degrees,useSketch:H}),f.getRotation(!0)%360!=0&&f._drawer._offsetForRotation({degrees:f.getRotation(!0),point:f.viewport.pixelFromPointNoRotate(f._getRotationPoint(!0),!0),useSketch:H}),f.viewport.degrees===0&&f.getRotation(!0)%360==0&&f._drawer.viewer.viewport.getFlip()&&f._drawer._flip());var ee=!1;if(f._clip){f._drawer.saveContext(H);var K=f.imageToViewportRectangle(f._clip,!0);K=K.rotate(-f.getRotation(!0),f._getRotationPoint(!0));var ae=f._drawer.viewportToDrawerRectangle(K);A&&(ae=ae.times(A)),L&&(ae=ae.translate(L)),f._drawer.setClip(ae,H),ee=!0}if(f._croppingPolygons){f._drawer.saveContext(H);try{var oe=f._croppingPolygons.map(function(te){return te.map(function(pe){var X=f.imageToViewportCoordinates(pe.x,pe.y,!0).rotate(-f.getRotation(!0),f._getRotationPoint(!0)),Ee=f._drawer.viewportCoordToDrawerCoord(X);return A&&(Ee=Ee.times(A)),Ee})});f._drawer.clipWithPolygons(oe,H)}catch(te){e.console.error(te)}ee=!0}if(f.placeholderFillStyle&&f._hasOpaqueTile===!1){var de=f._drawer.viewportToDrawerRectangle(f.getBounds(!0));A&&(de=de.times(A)),L&&(de=de.translate(L));var se=null;typeof f.placeholderFillStyle=="function"?se=f.placeholderFillStyle(f,f._drawer.context):se=f.placeholderFillStyle,f._drawer.drawRectangle(de,se,H)}for(var ne=x.length-1;ne>=0;ne--)D=x[ne],f._drawer.drawTile(D,f._drawingHandler,H,A,L),D.beingDrawn=!0,f.viewer&&f.viewer.raiseEvent("tile-drawn",{tiledImage:f,tile:D});ee&&f._drawer.restoreContext(H),A||(f.getRotation(!0)%360!=0&&f._drawer._restoreRotationChanges(H),f.viewport.degrees!==0&&f._drawer._restoreRotationChanges(H)),H&&(A&&(f.viewport.degrees!==0&&f._drawer._offsetForRotation({degrees:f.viewport.degrees,useSketch:!1}),f.getRotation(!0)%360!=0&&f._drawer._offsetForRotation({degrees:f.getRotation(!0),point:f.viewport.pixelFromPointNoRotate(f._getRotationPoint(!0),!0),useSketch:!1})),f._drawer.blendSketch({opacity:f.opacity,scale:A,translate:L,compositeOperation:f.compositeOperation,bounds:J}),A&&(f.getRotation(!0)%360!=0&&f._drawer._restoreRotationChanges(!1),f.viewport.degrees!==0&&f._drawer._restoreRotationChanges(!1))),A||f.viewport.degrees===0&&f.getRotation(!0)%360==0&&f._drawer.viewer.viewport.getFlip()&&f._drawer._flip(),R(f,x)}}function R(f,x){if(f.debugMode)for(var D=x.length-1;D>=0;D--){var H=x[D];try{f._drawer.drawDebugInfo(H,x.length,D,f)}catch(A){e.console.error(A)}}}}(r),function(e){var i=function(s){e.console.assert(s,"[TileCache.cacheTile] options is required"),e.console.assert(s.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(s.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=s.tile,this.tiledImage=s.tiledImage},n=function(s){e.console.assert(s,"[ImageRecord] options is required"),e.console.assert(s.image,"[ImageRecord] options.image is required"),this._image=s.image,this._tiles=[]};n.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var s=document.createElement("canvas");s.width=this._image.width,s.height=this._image.height,this._renderedContext=s.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(s){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=s},addTile:function(s){e.console.assert(s,"[ImageRecord.addTile] tile is required"),this._tiles.push(s)},removeTile:function(s){for(var u=0;u<this._tiles.length;u++)if(this._tiles[u]===s){this._tiles.splice(u,1);return}e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",s)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(s){s=s||{},this._maxImageCacheCount=s.maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(s){e.console.assert(s,"[TileCache.cacheTile] options is required"),e.console.assert(s.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(s.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(s.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var u=s.cutoff||0,l=this._tilesLoaded.length,o=this._imagesLoaded[s.tile.cacheKey];if(o||(e.console.assert(s.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),o=this._imagesLoaded[s.tile.cacheKey]=new n({image:s.image}),this._imagesLoadedCount++),o.addTile(s.tile),s.tile.cacheImageRecord=o,this._imagesLoadedCount>this._maxImageCacheCount){for(var a=null,h=-1,p=null,d,T,E,C,_,R,f=this._tilesLoaded.length-1;f>=0;f--)if(R=this._tilesLoaded[f],d=R.tile,!(d.level<=u||d.beingDrawn)){if(!a){a=d,h=f,p=R;continue}C=d.lastTouchTime,T=a.lastTouchTime,_=d.level,E=a.level,(C<T||C===T&&_>E)&&(a=d,h=f,p=R)}a&&h>=0&&(this._unloadTile(p),l=h)}this._tilesLoaded[l]=new i({tile:s.tile,tiledImage:s.tiledImage})},clearTilesFor:function(s){e.console.assert(s,"[TileCache.clearTilesFor] tiledImage is required");for(var u,l=0;l<this._tilesLoaded.length;++l)u=this._tilesLoaded[l],u.tiledImage===s&&(this._unloadTile(u),this._tilesLoaded.splice(l,1),l--)},getImageRecord:function(s){return e.console.assert(s,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[s]},_unloadTile:function(s){e.console.assert(s,"[TileCache._unloadTile] tileRecord is required");var u=s.tile,l=s.tiledImage;u.unload(),u.cacheImageRecord=null;var o=this._imagesLoaded[u.cacheKey];o.removeTile(u),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[u.cacheKey],this._imagesLoadedCount--),l.viewer.raiseEvent("tile-unloaded",{tile:u,tiledImage:l})}}}(r),function(e){e.World=function(i){var n=this;e.console.assert(i.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=i.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(s){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(i,n){if(e.console.assert(i,"[World.addItem] item is required"),e.console.assert(i instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),n=n||{},n.index!==void 0){var s=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(s,0,i)}else this._items.push(i);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,i.addHandler("bounds-change",this._delegatedFigureSizes),i.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:i})},getItemAt:function(i){return e.console.assert(i!==void 0,"[World.getItemAt] index is required"),this._items[i]},getIndexOfItem:function(i){return e.console.assert(i,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,i)},getItemCount:function(){return this._items.length},setItemIndex:function(i,n){e.console.assert(i,"[World.setItemIndex] item is required"),e.console.assert(n!==void 0,"[World.setItemIndex] index is required");var s=this.getIndexOfItem(i);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n===s||s===-1||(this._items.splice(s,1),this._items.splice(n,0,i),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:i,previousIndex:s,newIndex:n}))},removeItem:function(i){e.console.assert(i,"[World.removeItem] item is required");var n=e.indexOf(this._items,i);n!==-1&&(i.removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(i))},removeAll:function(){this.viewer._cancelPendingImages();var i,n;for(n=0;n<this._items.length;n++)i=this._items[n],i.removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy();var s=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,n=0;n<s.length;n++)i=s[n],this._raiseRemoveItem(i)},resetItems:function(){for(var i=0;i<this._items.length;i++)this._items[i].reset()},update:function(){for(var i=!1,n=0;n<this._items.length;n++)i=this._items[n].update()||i;return i},draw:function(){for(var i=0;i<this._items.length;i++)this._items[i].draw();this._needsDraw=!1},needsDraw:function(){for(var i=0;i<this._items.length;i++)if(this._items[i].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(i){this._autoRefigureSizes=i,i&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(i){i=i||{};var n=i.immediately||!1,s=i.layout||e.DEFAULT_SETTINGS.collectionLayout,u=i.rows||e.DEFAULT_SETTINGS.collectionRows,l=i.columns||e.DEFAULT_SETTINGS.collectionColumns,o=i.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,a=i.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin,h=o+a,p;!i.rows&&l?p=l:p=Math.ceil(this._items.length/u);var d=0,T=0,E,C,_,R,f;this.setAutoRefigureSizes(!1);for(var x=0;x<this._items.length;x++)x&&x%p==0&&(s==="horizontal"?(T+=h,d=0):(d+=h,T=0)),E=this._items[x],C=E.getBounds(),C.width>C.height?_=o:_=o*(C.width/C.height),R=_*(C.height/C.width),f=new e.Point(d+(o-_)/2,T+(o-R)/2),E.setPosition(f,n),E.setWidth(_,n),s==="horizontal"?d+=h:T+=h;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var i=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,s=this._contentFactor||0;if(!this._items.length)this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;else{var u=this._items[0],l=u.getBounds();this._contentFactor=u.getContentSize().x/l.width;for(var o=u.getClippedBounds().getBoundingBox(),a=o.x,h=o.y,p=o.x+o.width,d=o.y+o.height,T=1;T<this._items.length;T++)u=this._items[T],l=u.getBounds(),this._contentFactor=Math.max(this._contentFactor,u.getContentSize().x/l.width),o=u.getClippedBounds().getBoundingBox(),a=Math.min(a,o.x),h=Math.min(h,o.y),p=Math.max(p,o.x+o.width),d=Math.max(d,o.y+o.height);this._homeBounds=new e.Rect(a,h,p-a,d-h),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==s||!this._homeBounds.equals(i)||!this._contentSize.equals(n))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(i){this.raiseEvent("remove-item",{item:i})}})}(r)})(so);var xh=so.exports,Wn={exports:{}},oo=function(r,e){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return r.apply(e,n)}},nc=oo,ut=Object.prototype.toString;function jn(t){return Array.isArray(t)}function Vn(t){return typeof t=="undefined"}function rc(t){return t!==null&&!Vn(t)&&t.constructor!==null&&!Vn(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function ao(t){return ut.call(t)==="[object ArrayBuffer]"}function sc(t){return ut.call(t)==="[object FormData]"}function oc(t){var r;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&ao(t.buffer),r}function ac(t){return typeof t=="string"}function lc(t){return typeof t=="number"}function lo(t){return t!==null&&typeof t=="object"}function Ai(t){if(ut.call(t)!=="[object Object]")return!1;var r=Object.getPrototypeOf(t);return r===null||r===Object.prototype}function uc(t){return ut.call(t)==="[object Date]"}function cc(t){return ut.call(t)==="[object File]"}function hc(t){return ut.call(t)==="[object Blob]"}function uo(t){return ut.call(t)==="[object Function]"}function fc(t){return lo(t)&&uo(t.pipe)}function dc(t){return ut.call(t)==="[object URLSearchParams]"}function pc(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function gc(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Gn(t,r){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),jn(t))for(var e=0,i=t.length;e<i;e++)r.call(null,t[e],e,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.call(null,t[n],n,t)}function qn(){var t={};function r(n,s){Ai(t[s])&&Ai(n)?t[s]=qn(t[s],n):Ai(n)?t[s]=qn({},n):jn(n)?t[s]=n.slice():t[s]=n}for(var e=0,i=arguments.length;e<i;e++)Gn(arguments[e],r);return t}function mc(t,r,e){return Gn(r,function(n,s){e&&typeof n=="function"?t[s]=nc(n,e):t[s]=n}),t}function vc(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Fe={isArray:jn,isArrayBuffer:ao,isBuffer:rc,isFormData:sc,isArrayBufferView:oc,isString:ac,isNumber:lc,isObject:lo,isPlainObject:Ai,isUndefined:Vn,isDate:uc,isFile:cc,isBlob:hc,isFunction:uo,isStream:fc,isURLSearchParams:dc,isStandardBrowserEnv:gc,forEach:Gn,merge:qn,extend:mc,trim:pc,stripBOM:vc},kt=Fe;function co(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ho=function(r,e,i){if(!e)return r;var n;if(i)n=i(e);else if(kt.isURLSearchParams(e))n=e.toString();else{var s=[];kt.forEach(e,function(o,a){o===null||typeof o=="undefined"||(kt.isArray(o)?a=a+"[]":o=[o],kt.forEach(o,function(p){kt.isDate(p)?p=p.toISOString():kt.isObject(p)&&(p=JSON.stringify(p)),s.push(co(a)+"="+co(p))}))}),n=s.join("&")}if(n){var u=r.indexOf("#");u!==-1&&(r=r.slice(0,u)),r+=(r.indexOf("?")===-1?"?":"&")+n}return r},yc=Fe;function Li(){this.handlers=[]}Li.prototype.use=function(r,e,i){return this.handlers.push({fulfilled:r,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};Li.prototype.eject=function(r){this.handlers[r]&&(this.handlers[r]=null)};Li.prototype.forEach=function(r){yc.forEach(this.handlers,function(i){i!==null&&r(i)})};var wc=Li,Tc=Fe,xc=function(r,e){Tc.forEach(r,function(n,s){s!==e&&s.toUpperCase()===e.toUpperCase()&&(r[e]=n,delete r[s])})},fo=function(r,e,i,n,s){return r.config=e,i&&(r.code=i),r.request=n,r.response=s,r.isAxiosError=!0,r.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},r},po={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ec=fo,go=function(r,e,i,n,s){var u=new Error(r);return Ec(u,e,i,n,s)},Sc=go,Pc=function(r,e,i){var n=i.config.validateStatus;!i.status||!n||n(i.status)?r(i):e(Sc("Request failed with status code "+i.status,i.config,null,i.request,i))},Fi=Fe,_c=Fi.isStandardBrowserEnv()?function(){return{write:function(e,i,n,s,u,l){var o=[];o.push(e+"="+encodeURIComponent(i)),Fi.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Fi.isString(s)&&o.push("path="+s),Fi.isString(u)&&o.push("domain="+u),l===!0&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var i=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Cc=function(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)},bc=function(r,e){return e?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r},Rc=Cc,Oc=bc,Dc=function(r,e){return r&&!Rc(e)?Oc(r,e):e},Zn=Fe,Hc=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Bc=function(r){var e={},i,n,s;return r&&Zn.forEach(r.split(`
`),function(l){if(s=l.indexOf(":"),i=Zn.trim(l.substr(0,s)).toLowerCase(),n=Zn.trim(l.substr(s+1)),i){if(e[i]&&Hc.indexOf(i)>=0)return;i==="set-cookie"?e[i]=(e[i]?e[i]:[]).concat([n]):e[i]=e[i]?e[i]+", "+n:n}}),e},mo=Fe,Ac=mo.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a"),i;function n(s){var u=s;return r&&(e.setAttribute("href",u),u=e.href),e.setAttribute("href",u),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return i=n(window.location.href),function(u){var l=mo.isString(u)?n(u):u;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}();function Kn(t){this.message=t}Kn.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Kn.prototype.__CANCEL__=!0;var Mi=Kn,Ni=Fe,Lc=Pc,Fc=_c,Mc=ho,Nc=Dc,zc=Bc,kc=Ac,Xn=go,Ic=po,Uc=Mi,vo=function(r){return new Promise(function(i,n){var s=r.data,u=r.headers,l=r.responseType,o;function a(){r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}Ni.isFormData(s)&&delete u["Content-Type"];var h=new XMLHttpRequest;if(r.auth){var p=r.auth.username||"",d=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";u.Authorization="Basic "+btoa(p+":"+d)}var T=Nc(r.baseURL,r.url);h.open(r.method.toUpperCase(),Mc(T,r.params,r.paramsSerializer),!0),h.timeout=r.timeout;function E(){if(!!h){var _="getAllResponseHeaders"in h?zc(h.getAllResponseHeaders()):null,R=!l||l==="text"||l==="json"?h.responseText:h.response,f={data:R,status:h.status,statusText:h.statusText,headers:_,config:r,request:h};Lc(function(D){i(D),a()},function(D){n(D),a()},f),h=null}}if("onloadend"in h?h.onloadend=E:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(E)},h.onabort=function(){!h||(n(Xn("Request aborted",r,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(Xn("Network Error",r,null,h)),h=null},h.ontimeout=function(){var R=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded",f=r.transitional||Ic;r.timeoutErrorMessage&&(R=r.timeoutErrorMessage),n(Xn(R,r,f.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},Ni.isStandardBrowserEnv()){var C=(r.withCredentials||kc(T))&&r.xsrfCookieName?Fc.read(r.xsrfCookieName):void 0;C&&(u[r.xsrfHeaderName]=C)}"setRequestHeader"in h&&Ni.forEach(u,function(R,f){typeof s=="undefined"&&f.toLowerCase()==="content-type"?delete u[f]:h.setRequestHeader(f,R)}),Ni.isUndefined(r.withCredentials)||(h.withCredentials=!!r.withCredentials),l&&l!=="json"&&(h.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&h.addEventListener("progress",r.onDownloadProgress),typeof r.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",r.onUploadProgress),(r.cancelToken||r.signal)&&(o=function(_){!h||(n(!_||_&&_.type?new Uc("canceled"):_),h.abort(),h=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o))),s||(s=null),h.send(s)})},be=Fe,yo=xc,Wc=fo,jc=po,Vc={"Content-Type":"application/x-www-form-urlencoded"};function wo(t,r){!be.isUndefined(t)&&be.isUndefined(t["Content-Type"])&&(t["Content-Type"]=r)}function Gc(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=vo),t}function qc(t,r,e){if(be.isString(t))try{return(r||JSON.parse)(t),be.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(t)}var zi={transitional:jc,adapter:Gc(),transformRequest:[function(r,e){return yo(e,"Accept"),yo(e,"Content-Type"),be.isFormData(r)||be.isArrayBuffer(r)||be.isBuffer(r)||be.isStream(r)||be.isFile(r)||be.isBlob(r)?r:be.isArrayBufferView(r)?r.buffer:be.isURLSearchParams(r)?(wo(e,"application/x-www-form-urlencoded;charset=utf-8"),r.toString()):be.isObject(r)||e&&e["Content-Type"]==="application/json"?(wo(e,"application/json"),qc(r)):r}],transformResponse:[function(r){var e=this.transitional||zi.transitional,i=e&&e.silentJSONParsing,n=e&&e.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||n&&be.isString(r)&&r.length)try{return JSON.parse(r)}catch(u){if(s)throw u.name==="SyntaxError"?Wc(u,this,"E_JSON_PARSE"):u}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};be.forEach(["delete","get","head"],function(r){zi.headers[r]={}});be.forEach(["post","put","patch"],function(r){zi.headers[r]=be.merge(Vc)});var Yn=zi,Zc=Fe,Kc=Yn,Xc=function(r,e,i){var n=this||Kc;return Zc.forEach(i,function(u){r=u.call(n,r,e)}),r},To=function(r){return!!(r&&r.__CANCEL__)},xo=Fe,Jn=Xc,Yc=To,Jc=Yn,Qc=Mi;function Qn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Qc("canceled")}var $c=function(r){Qn(r),r.headers=r.headers||{},r.data=Jn.call(r,r.data,r.headers,r.transformRequest),r.headers=xo.merge(r.headers.common||{},r.headers[r.method]||{},r.headers),xo.forEach(["delete","get","head","post","put","patch","common"],function(n){delete r.headers[n]});var e=r.adapter||Jc.adapter;return e(r).then(function(n){return Qn(r),n.data=Jn.call(r,n.data,n.headers,r.transformResponse),n},function(n){return Yc(n)||(Qn(r),n&&n.response&&(n.response.data=Jn.call(r,n.response.data,n.response.headers,r.transformResponse))),Promise.reject(n)})},ze=Fe,Eo=function(r,e){e=e||{};var i={};function n(h,p){return ze.isPlainObject(h)&&ze.isPlainObject(p)?ze.merge(h,p):ze.isPlainObject(p)?ze.merge({},p):ze.isArray(p)?p.slice():p}function s(h){if(ze.isUndefined(e[h])){if(!ze.isUndefined(r[h]))return n(void 0,r[h])}else return n(r[h],e[h])}function u(h){if(!ze.isUndefined(e[h]))return n(void 0,e[h])}function l(h){if(ze.isUndefined(e[h])){if(!ze.isUndefined(r[h]))return n(void 0,r[h])}else return n(void 0,e[h])}function o(h){if(h in e)return n(r[h],e[h]);if(h in r)return n(void 0,r[h])}var a={url:u,method:u,data:u,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o};return ze.forEach(Object.keys(r).concat(Object.keys(e)),function(p){var d=a[p]||s,T=d(p);ze.isUndefined(T)&&d!==o||(i[p]=T)}),i},So={version:"0.26.1"},eh=So.version,$n={};["object","boolean","number","function","string","symbol"].forEach(function(t,r){$n[t]=function(i){return typeof i===t||"a"+(r<1?"n ":" ")+t}});var Po={};$n.transitional=function(r,e,i){function n(s,u){return"[Axios v"+eh+"] Transitional option '"+s+"'"+u+(i?". "+i:"")}return function(s,u,l){if(r===!1)throw new Error(n(u," has been removed"+(e?" in "+e:"")));return e&&!Po[u]&&(Po[u]=!0,console.warn(n(u," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(s,u,l):!0}};function th(t,r,e){if(typeof t!="object")throw new TypeError("options must be an object");for(var i=Object.keys(t),n=i.length;n-- >0;){var s=i[n],u=r[s];if(u){var l=t[s],o=l===void 0||u(l,s,t);if(o!==!0)throw new TypeError("option "+s+" must be "+o);continue}if(e!==!0)throw Error("Unknown option "+s)}}var ih={assertOptions:th,validators:$n},_o=Fe,nh=ho,Co=wc,bo=$c,ki=Eo,Ro=ih,It=Ro.validators;function ni(t){this.defaults=t,this.interceptors={request:new Co,response:new Co}}ni.prototype.request=function(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=ki(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var i=e.transitional;i!==void 0&&Ro.assertOptions(i,{silentJSONParsing:It.transitional(It.boolean),forcedJSONParsing:It.transitional(It.boolean),clarifyTimeoutError:It.transitional(It.boolean)},!1);var n=[],s=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(e)===!1||(s=s&&T.synchronous,n.unshift(T.fulfilled,T.rejected))});var u=[];this.interceptors.response.forEach(function(T){u.push(T.fulfilled,T.rejected)});var l;if(!s){var o=[bo,void 0];for(Array.prototype.unshift.apply(o,n),o=o.concat(u),l=Promise.resolve(e);o.length;)l=l.then(o.shift(),o.shift());return l}for(var a=e;n.length;){var h=n.shift(),p=n.shift();try{a=h(a)}catch(d){p(d);break}}try{l=bo(a)}catch(d){return Promise.reject(d)}for(;u.length;)l=l.then(u.shift(),u.shift());return l};ni.prototype.getUri=function(r){return r=ki(this.defaults,r),nh(r.url,r.params,r.paramsSerializer).replace(/^\?/,"")};_o.forEach(["delete","get","head","options"],function(r){ni.prototype[r]=function(e,i){return this.request(ki(i||{},{method:r,url:e,data:(i||{}).data}))}});_o.forEach(["post","put","patch"],function(r){ni.prototype[r]=function(e,i,n){return this.request(ki(n||{},{method:r,url:e,data:i}))}});var rh=ni,sh=Mi;function Ut(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(n){r=n});var e=this;this.promise.then(function(i){if(!!e._listeners){var n,s=e._listeners.length;for(n=0;n<s;n++)e._listeners[n](i);e._listeners=null}}),this.promise.then=function(i){var n,s=new Promise(function(u){e.subscribe(u),n=u}).then(i);return s.cancel=function(){e.unsubscribe(n)},s},t(function(n){e.reason||(e.reason=new sh(n),r(e.reason))})}Ut.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Ut.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]};Ut.prototype.unsubscribe=function(r){if(!!this._listeners){var e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}};Ut.source=function(){var r,e=new Ut(function(n){r=n});return{token:e,cancel:r}};var oh=Ut,ah=function(r){return function(i){return r.apply(null,i)}},lh=Fe,uh=function(r){return lh.isObject(r)&&r.isAxiosError===!0},Oo=Fe,ch=oo,Ii=rh,hh=Eo,fh=Yn;function Do(t){var r=new Ii(t),e=ch(Ii.prototype.request,r);return Oo.extend(e,Ii.prototype,r),Oo.extend(e,r),e.create=function(n){return Do(hh(t,n))},e}var Ye=Do(fh);Ye.Axios=Ii;Ye.Cancel=Mi;Ye.CancelToken=oh;Ye.isCancel=To;Ye.VERSION=So.version;Ye.all=function(r){return Promise.all(r)};Ye.spread=ah;Ye.isAxiosError=uh;Wn.exports=Ye;Wn.exports.default=Ye;var Eh=Wn.exports;export{Ze as F,xh as O,Ur as a,Eh as b,vh as c,kr as d,mh as e,wa as f,cs as g,Ie as h,Th as i,wh as j,yh as k,Wi as n,gh as o,ph as r,dh as t,Zt as u};
